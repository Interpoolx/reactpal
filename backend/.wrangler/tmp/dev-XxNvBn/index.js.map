{
  "version": 3,
  "sources": ["../bundle-Fb88eC/strip-cf-connecting-ip-header.js", "../../../../node_modules/unenv/dist/runtime/_internal/utils.mjs", "../../../../node_modules/unenv/dist/runtime/node/internal/perf_hooks/performance.mjs", "../../../../node_modules/unenv/dist/runtime/node/perf_hooks.mjs", "../../../../node_modules/@cloudflare/unenv-preset/dist/runtime/polyfill/performance.mjs", "../../../../node_modules/unenv/dist/runtime/mock/noop.mjs", "../../../../node_modules/unenv/dist/runtime/node/console.mjs", "../../../../node_modules/@cloudflare/unenv-preset/dist/runtime/node/console.mjs", "../../../node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-console", "../../../../node_modules/unenv/dist/runtime/node/internal/process/hrtime.mjs", "../../../../node_modules/unenv/dist/runtime/node/internal/tty/read-stream.mjs", "../../../../node_modules/unenv/dist/runtime/node/internal/tty/write-stream.mjs", "../../../../node_modules/unenv/dist/runtime/node/tty.mjs", "../../../../node_modules/unenv/dist/runtime/node/internal/process/process.mjs", "../../../../node_modules/@cloudflare/unenv-preset/dist/runtime/node/process.mjs", "../../../node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-process", "wrangler-modules-watch:wrangler:modules-watch", "../../../node_modules/wrangler/templates/modules-watch-stub.js", "../../../../node_modules/hono/dist/compose.js", "../../../../node_modules/hono/dist/http-exception.js", "../../../../node_modules/hono/dist/request/constants.js", "../../../../node_modules/hono/dist/utils/body.js", "../../../../node_modules/hono/dist/utils/url.js", "../../../../node_modules/hono/dist/request.js", "../../../../node_modules/hono/dist/utils/html.js", "../../../../node_modules/hono/dist/context.js", "../../../../node_modules/hono/dist/router.js", "../../../../node_modules/hono/dist/utils/constants.js", "../../../../node_modules/hono/dist/hono-base.js", "../../../../node_modules/hono/dist/router/reg-exp-router/matcher.js", "../../../../node_modules/hono/dist/router/reg-exp-router/node.js", "../../../../node_modules/hono/dist/router/reg-exp-router/trie.js", "../../../../node_modules/hono/dist/router/reg-exp-router/router.js", "../../../../node_modules/hono/dist/router/reg-exp-router/prepared-router.js", "../../../../node_modules/hono/dist/router/reg-exp-router/index.js", "../../../../node_modules/hono/dist/router/smart-router/router.js", "../../../../node_modules/hono/dist/router/smart-router/index.js", "../../../../node_modules/hono/dist/router/trie-router/node.js", "../../../../node_modules/hono/dist/router/trie-router/router.js", "../../../../node_modules/hono/dist/router/trie-router/index.js", "../../../../node_modules/hono/dist/hono.js", "../../../../node_modules/hono/dist/index.js", "../../../../packages/core-registry/src/types.ts", "../../../../packages/core-registry/src/SettingsRegistry.ts", "../../../../packages/core-registry/src/ModuleRegistry.ts", "../../../../packages/core-registry/src/EventBus.ts", "../../../../packages/core-registry/src/index.ts", "../../../src/lib/migrations-manifest.json", "../../../../node_modules/unenv/dist/runtime/node/internal/fs/promises.mjs", "../../../../node_modules/unenv/dist/runtime/node/internal/fs/constants.mjs", "../../../../node_modules/unenv/dist/runtime/node/fs/promises.mjs", "../../../../node_modules/unenv/dist/runtime/node/internal/fs/classes.mjs", "../../../../node_modules/unenv/dist/runtime/node/internal/fs/fs.mjs", "../../../../node_modules/unenv/dist/runtime/node/fs.mjs", "../../../../packages/modules-core/src/index.ts", "../../../../packages/modules-auth/src/routes/authRoutes.ts", "../../../../packages/modules-auth/src/settings/authSettings.ts", "../../../../packages/modules-auth/src/module.config.ts", "../../../../packages/modules-auth/src/index.ts", "../../../../packages/modules-users/src/routes/usersRoutes.ts", "../../../../packages/modules-users/src/settings/usersSettings.ts", "../../../../packages/modules-users/src/module.config.ts", "../../../../packages/modules-users/src/index.ts", "../../../../packages/modules-tenants/src/routes/tenantsRoutes.ts", "../../../../packages/modules-tenants/src/settings/tenantsSettings.ts", "../../../../packages/modules-tenants/src/module.config.ts", "../../../../packages/modules-tenants/src/index.ts", "../../../../packages/modules-cms/src/index.ts", "../../../../packages/modules-crm/src/index.ts", "../../../../packages/modules-seo/src/index.ts", "../bundle-Fb88eC/middleware-loader.entry.ts", "../bundle-Fb88eC/middleware-insertion-facade.js", "../../../src/index.ts", "../../../../node_modules/hono/dist/middleware/cors/index.js", "../../../src/middleware/tenant-resolver.ts", "../../../src/middleware/admin-auth.ts", "../../../src/routes/v1/resolver.ts", "../../../src/routes/v1/settings.ts", "../../../src/routes/v1/schema.ts", "../../../src/routes/v1/database.ts", "../../../src/db/schema/index.ts", "../../../src/db/schema/tenants.ts", "../../../../node_modules/src/column.ts", "../../../../node_modules/src/entity.ts", "../../../../node_modules/src/sql/sql.ts", "../../../../node_modules/src/pg-core/columns/enum.ts", "../../../../node_modules/src/pg-core/columns/common.ts", "../../../../node_modules/src/column-builder.ts", "../../../../node_modules/src/pg-core/foreign-keys.ts", "../../../../node_modules/src/table.utils.ts", "../../../../node_modules/src/tracing-utils.ts", "../../../../node_modules/src/pg-core/unique-constraint.ts", "../../../../node_modules/src/pg-core/utils/array.ts", "../../../../node_modules/src/subquery.ts", "../../../../node_modules/src/tracing.ts", "../../../../node_modules/drizzle-orm/version.js", "../../../../node_modules/src/view-common.ts", "../../../../node_modules/src/table.ts", "../../../../node_modules/src/sqlite-core/columns/blob.ts", "../../../../node_modules/src/utils.ts", "../../../../node_modules/src/sqlite-core/columns/common.ts", "../../../../node_modules/src/sqlite-core/foreign-keys.ts", "../../../../node_modules/src/sqlite-core/unique-constraint.ts", "../../../../node_modules/src/sqlite-core/columns/custom.ts", "../../../../node_modules/src/sqlite-core/columns/integer.ts", "../../../../node_modules/src/sqlite-core/columns/numeric.ts", "../../../../node_modules/src/sqlite-core/columns/real.ts", "../../../../node_modules/src/sqlite-core/columns/text.ts", "../../../../node_modules/src/sqlite-core/table.ts", "../../../../node_modules/src/sqlite-core/columns/all.ts", "../../../../node_modules/src/sqlite-core/indexes.ts", "../../../src/db/schema/domains.ts", "../../../src/db/schema/audit.ts", "../../../src/db/schema/settings.ts", "../../../src/lib/migrationLoader.ts", "../../../src/routes/v1/modules.ts", "../../../src/lib/bootstrap.ts", "../../../src/lib/ModuleLoader.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../../../node_modules/wrangler/templates/middleware/common.ts"],
  "sourceRoot": "D:\\react-projects\\reactpal\\backend\\.wrangler\\tmp\\dev-XxNvBn",
  "sourcesContent": ["function stripCfConnectingIPHeader(input, init) {\n\tconst request = new Request(input, init);\n\trequest.headers.delete(\"CF-Connecting-IP\");\n\treturn request;\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\treturn Reflect.apply(target, thisArg, [\n\t\t\tstripCfConnectingIPHeader.apply(null, argArray),\n\t\t]);\n\t},\n});\n", "/*@__NO_SIDE_EFFECTS__*/ export function rawHeaders(headers) {\n\tconst rawHeaders = [];\n\tfor (const key in headers) {\n\t\tif (Array.isArray(headers[key])) {\n\t\t\tfor (const h of headers[key]) {\n\t\t\t\trawHeaders.push(key, h);\n\t\t\t}\n\t\t} else {\n\t\t\trawHeaders.push(key, headers[key]);\n\t\t}\n\t}\n\treturn rawHeaders;\n}\n/*@__NO_SIDE_EFFECTS__*/ export function mergeFns(...functions) {\n\treturn function(...args) {\n\t\tfor (const fn of functions) {\n\t\t\tfn(...args);\n\t\t}\n\t};\n}\n/*@__NO_SIDE_EFFECTS__*/ export function createNotImplementedError(name) {\n\treturn new Error(`[unenv] ${name} is not implemented yet!`);\n}\n/*@__NO_SIDE_EFFECTS__*/ export function notImplemented(name) {\n\tconst fn = () => {\n\t\tthrow createNotImplementedError(name);\n\t};\n\treturn Object.assign(fn, { __unenv__: true });\n}\n/*@__NO_SIDE_EFFECTS__*/ export function notImplementedAsync(name) {\n\tconst fn = notImplemented(name);\n\tfn.__promisify__ = () => notImplemented(name + \".__promisify__\");\n\tfn.native = fn;\n\treturn fn;\n}\n/*@__NO_SIDE_EFFECTS__*/ export function notImplementedClass(name) {\n\treturn class {\n\t\t__unenv__ = true;\n\t\tconstructor() {\n\t\t\tthrow new Error(`[unenv] ${name} is not implemented yet!`);\n\t\t}\n\t};\n}\n", "import { createNotImplementedError } from \"../../../_internal/utils.mjs\";\nconst _timeOrigin = globalThis.performance?.timeOrigin ?? Date.now();\nconst _performanceNow = globalThis.performance?.now ? globalThis.performance.now.bind(globalThis.performance) : () => Date.now() - _timeOrigin;\nconst nodeTiming = {\n\tname: \"node\",\n\tentryType: \"node\",\n\tstartTime: 0,\n\tduration: 0,\n\tnodeStart: 0,\n\tv8Start: 0,\n\tbootstrapComplete: 0,\n\tenvironment: 0,\n\tloopStart: 0,\n\tloopExit: 0,\n\tidleTime: 0,\n\tuvMetricsInfo: {\n\t\tloopCount: 0,\n\t\tevents: 0,\n\t\teventsWaiting: 0\n\t},\n\tdetail: undefined,\n\ttoJSON() {\n\t\treturn this;\n\t}\n};\nexport class PerformanceEntry {\n\t__unenv__ = true;\n\tdetail;\n\tentryType = \"event\";\n\tname;\n\tstartTime;\n\tconstructor(name, options) {\n\t\tthis.name = name;\n\t\tthis.startTime = options?.startTime || _performanceNow();\n\t\tthis.detail = options?.detail;\n\t}\n\tget duration() {\n\t\treturn _performanceNow() - this.startTime;\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tentryType: this.entryType,\n\t\t\tstartTime: this.startTime,\n\t\t\tduration: this.duration,\n\t\t\tdetail: this.detail\n\t\t};\n\t}\n}\nexport const PerformanceMark = class PerformanceMark extends PerformanceEntry {\n\tentryType = \"mark\";\n\tconstructor() {\n\t\tsuper(...arguments);\n\t}\n\tget duration() {\n\t\treturn 0;\n\t}\n};\nexport class PerformanceMeasure extends PerformanceEntry {\n\tentryType = \"measure\";\n}\nexport class PerformanceResourceTiming extends PerformanceEntry {\n\tentryType = \"resource\";\n\tserverTiming = [];\n\tconnectEnd = 0;\n\tconnectStart = 0;\n\tdecodedBodySize = 0;\n\tdomainLookupEnd = 0;\n\tdomainLookupStart = 0;\n\tencodedBodySize = 0;\n\tfetchStart = 0;\n\tinitiatorType = \"\";\n\tname = \"\";\n\tnextHopProtocol = \"\";\n\tredirectEnd = 0;\n\tredirectStart = 0;\n\trequestStart = 0;\n\tresponseEnd = 0;\n\tresponseStart = 0;\n\tsecureConnectionStart = 0;\n\tstartTime = 0;\n\ttransferSize = 0;\n\tworkerStart = 0;\n\tresponseStatus = 0;\n}\nexport class PerformanceObserverEntryList {\n\t__unenv__ = true;\n\tgetEntries() {\n\t\treturn [];\n\t}\n\tgetEntriesByName(_name, _type) {\n\t\treturn [];\n\t}\n\tgetEntriesByType(type) {\n\t\treturn [];\n\t}\n}\nexport class Performance {\n\t__unenv__ = true;\n\ttimeOrigin = _timeOrigin;\n\teventCounts = new Map();\n\t_entries = [];\n\t_resourceTimingBufferSize = 0;\n\tnavigation = undefined;\n\ttiming = undefined;\n\ttimerify(_fn, _options) {\n\t\tthrow createNotImplementedError(\"Performance.timerify\");\n\t}\n\tget nodeTiming() {\n\t\treturn nodeTiming;\n\t}\n\teventLoopUtilization() {\n\t\treturn {};\n\t}\n\tmarkResourceTiming() {\n\t\treturn new PerformanceResourceTiming(\"\");\n\t}\n\tonresourcetimingbufferfull = null;\n\tnow() {\n\t\tif (this.timeOrigin === _timeOrigin) {\n\t\t\treturn _performanceNow();\n\t\t}\n\t\treturn Date.now() - this.timeOrigin;\n\t}\n\tclearMarks(markName) {\n\t\tthis._entries = markName ? this._entries.filter((e) => e.name !== markName) : this._entries.filter((e) => e.entryType !== \"mark\");\n\t}\n\tclearMeasures(measureName) {\n\t\tthis._entries = measureName ? this._entries.filter((e) => e.name !== measureName) : this._entries.filter((e) => e.entryType !== \"measure\");\n\t}\n\tclearResourceTimings() {\n\t\tthis._entries = this._entries.filter((e) => e.entryType !== \"resource\" || e.entryType !== \"navigation\");\n\t}\n\tgetEntries() {\n\t\treturn this._entries;\n\t}\n\tgetEntriesByName(name, type) {\n\t\treturn this._entries.filter((e) => e.name === name && (!type || e.entryType === type));\n\t}\n\tgetEntriesByType(type) {\n\t\treturn this._entries.filter((e) => e.entryType === type);\n\t}\n\tmark(name, options) {\n\t\tconst entry = new PerformanceMark(name, options);\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tmeasure(measureName, startOrMeasureOptions, endMark) {\n\t\tlet start;\n\t\tlet end;\n\t\tif (typeof startOrMeasureOptions === \"string\") {\n\t\t\tstart = this.getEntriesByName(startOrMeasureOptions, \"mark\")[0]?.startTime;\n\t\t\tend = this.getEntriesByName(endMark, \"mark\")[0]?.startTime;\n\t\t} else {\n\t\t\tstart = Number.parseFloat(startOrMeasureOptions?.start) || this.now();\n\t\t\tend = Number.parseFloat(startOrMeasureOptions?.end) || this.now();\n\t\t}\n\t\tconst entry = new PerformanceMeasure(measureName, {\n\t\t\tstartTime: start,\n\t\t\tdetail: {\n\t\t\t\tstart,\n\t\t\t\tend\n\t\t\t}\n\t\t});\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tsetResourceTimingBufferSize(maxSize) {\n\t\tthis._resourceTimingBufferSize = maxSize;\n\t}\n\taddEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.addEventListener\");\n\t}\n\tremoveEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.removeEventListener\");\n\t}\n\tdispatchEvent(event) {\n\t\tthrow createNotImplementedError(\"Performance.dispatchEvent\");\n\t}\n\ttoJSON() {\n\t\treturn this;\n\t}\n}\nexport class PerformanceObserver {\n\t__unenv__ = true;\n\tstatic supportedEntryTypes = [];\n\t_callback = null;\n\tconstructor(callback) {\n\t\tthis._callback = callback;\n\t}\n\ttakeRecords() {\n\t\treturn [];\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.disconnect\");\n\t}\n\tobserve(options) {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.observe\");\n\t}\n\tbind(fn) {\n\t\treturn fn;\n\t}\n\trunInAsyncScope(fn, thisArg, ...args) {\n\t\treturn fn.call(thisArg, ...args);\n\t}\n\tasyncId() {\n\t\treturn 0;\n\t}\n\ttriggerAsyncId() {\n\t\treturn 0;\n\t}\n\temitDestroy() {\n\t\treturn this;\n\t}\n}\nexport const performance = globalThis.performance && \"addEventListener\" in globalThis.performance ? globalThis.performance : new Performance();\n", "import { IntervalHistogram, RecordableHistogram } from \"./internal/perf_hooks/histogram.mjs\";\nimport { performance, Performance, PerformanceEntry, PerformanceMark, PerformanceMeasure, PerformanceObserverEntryList, PerformanceObserver, PerformanceResourceTiming } from \"./internal/perf_hooks/performance.mjs\";\nexport * from \"./internal/perf_hooks/performance.mjs\";\nimport { NODE_PERFORMANCE_GC_MAJOR, NODE_PERFORMANCE_GC_MINOR, NODE_PERFORMANCE_GC_INCREMENTAL, NODE_PERFORMANCE_GC_WEAKCB, NODE_PERFORMANCE_GC_FLAGS_NO, NODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED, NODE_PERFORMANCE_GC_FLAGS_FORCED, NODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING, NODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE, NODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY, NODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE, NODE_PERFORMANCE_ENTRY_TYPE_GC, NODE_PERFORMANCE_ENTRY_TYPE_HTTP, NODE_PERFORMANCE_ENTRY_TYPE_HTTP2, NODE_PERFORMANCE_ENTRY_TYPE_NET, NODE_PERFORMANCE_ENTRY_TYPE_DNS, NODE_PERFORMANCE_MILESTONE_TIME_ORIGIN_TIMESTAMP, NODE_PERFORMANCE_MILESTONE_TIME_ORIGIN, NODE_PERFORMANCE_MILESTONE_ENVIRONMENT, NODE_PERFORMANCE_MILESTONE_NODE_START, NODE_PERFORMANCE_MILESTONE_V8_START, NODE_PERFORMANCE_MILESTONE_LOOP_START, NODE_PERFORMANCE_MILESTONE_LOOP_EXIT, NODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE } from \"./internal/perf_hooks/constants.mjs\";\nexport const constants = {\n\tNODE_PERFORMANCE_GC_MAJOR,\n\tNODE_PERFORMANCE_GC_MINOR,\n\tNODE_PERFORMANCE_GC_INCREMENTAL,\n\tNODE_PERFORMANCE_GC_WEAKCB,\n\tNODE_PERFORMANCE_GC_FLAGS_NO,\n\tNODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED,\n\tNODE_PERFORMANCE_GC_FLAGS_FORCED,\n\tNODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING,\n\tNODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE,\n\tNODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY,\n\tNODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE,\n\tNODE_PERFORMANCE_ENTRY_TYPE_GC,\n\tNODE_PERFORMANCE_ENTRY_TYPE_HTTP,\n\tNODE_PERFORMANCE_ENTRY_TYPE_HTTP2,\n\tNODE_PERFORMANCE_ENTRY_TYPE_NET,\n\tNODE_PERFORMANCE_ENTRY_TYPE_DNS,\n\tNODE_PERFORMANCE_MILESTONE_TIME_ORIGIN_TIMESTAMP,\n\tNODE_PERFORMANCE_MILESTONE_TIME_ORIGIN,\n\tNODE_PERFORMANCE_MILESTONE_ENVIRONMENT,\n\tNODE_PERFORMANCE_MILESTONE_NODE_START,\n\tNODE_PERFORMANCE_MILESTONE_V8_START,\n\tNODE_PERFORMANCE_MILESTONE_LOOP_START,\n\tNODE_PERFORMANCE_MILESTONE_LOOP_EXIT,\n\tNODE_PERFORMANCE_MILESTONE_BOOTSTRAP_COMPLETE\n};\nexport const monitorEventLoopDelay = function(_options) {\n\treturn new IntervalHistogram();\n};\nexport const createHistogram = function(_options) {\n\treturn new RecordableHistogram();\n};\nexport default {\n\tPerformance,\n\tPerformanceMark,\n\tPerformanceEntry,\n\tPerformanceMeasure,\n\tPerformanceObserverEntryList,\n\tPerformanceObserver,\n\tPerformanceResourceTiming,\n\tperformance,\n\tconstants,\n\tcreateHistogram,\n\tmonitorEventLoopDelay\n};\n", "import {\n  performance,\n  Performance,\n  PerformanceEntry,\n  PerformanceMark,\n  PerformanceMeasure,\n  PerformanceObserver,\n  PerformanceObserverEntryList,\n  PerformanceResourceTiming\n} from \"node:perf_hooks\";\nglobalThis.performance = performance;\nglobalThis.Performance = Performance;\nglobalThis.PerformanceEntry = PerformanceEntry;\nglobalThis.PerformanceMark = PerformanceMark;\nglobalThis.PerformanceMeasure = PerformanceMeasure;\nglobalThis.PerformanceObserver = PerformanceObserver;\nglobalThis.PerformanceObserverEntryList = PerformanceObserverEntryList;\nglobalThis.PerformanceResourceTiming = PerformanceResourceTiming;\n", "export default Object.assign(() => {}, { __unenv__: true });\n", "import { Writable } from \"node:stream\";\nimport noop from \"../mock/noop.mjs\";\nimport { notImplemented, notImplementedClass } from \"../_internal/utils.mjs\";\nconst _console = globalThis.console;\nexport const _ignoreErrors = true;\nexport const _stderr = new Writable();\nexport const _stdout = new Writable();\nexport const log = _console?.log ?? noop;\nexport const info = _console?.info ?? log;\nexport const trace = _console?.trace ?? info;\nexport const debug = _console?.debug ?? log;\nexport const table = _console?.table ?? log;\nexport const error = _console?.error ?? log;\nexport const warn = _console?.warn ?? error;\nexport const createTask = _console?.createTask ?? /*@__PURE__*/ notImplemented(\"console.createTask\");\nexport const assert = /*@__PURE__*/ notImplemented(\"console.assert\");\nexport const clear = _console?.clear ?? noop;\nexport const count = _console?.count ?? noop;\nexport const countReset = _console?.countReset ?? noop;\nexport const dir = _console?.dir ?? noop;\nexport const dirxml = _console?.dirxml ?? noop;\nexport const group = _console?.group ?? noop;\nexport const groupEnd = _console?.groupEnd ?? noop;\nexport const groupCollapsed = _console?.groupCollapsed ?? noop;\nexport const profile = _console?.profile ?? noop;\nexport const profileEnd = _console?.profileEnd ?? noop;\nexport const time = _console?.time ?? noop;\nexport const timeEnd = _console?.timeEnd ?? noop;\nexport const timeLog = _console?.timeLog ?? noop;\nexport const timeStamp = _console?.timeStamp ?? noop;\nexport const Console = _console?.Console ?? /*@__PURE__*/ notImplementedClass(\"console.Console\");\nexport const _times = /*@__PURE__*/ new Map();\nexport function context() {\n\treturn _console;\n}\nexport const _stdoutErrorHandler = noop;\nexport const _stderrErrorHandler = noop;\nexport default {\n\t_times,\n\t_ignoreErrors,\n\t_stdoutErrorHandler,\n\t_stderrErrorHandler,\n\t_stdout,\n\t_stderr,\n\tassert,\n\tclear,\n\tConsole,\n\tcount,\n\tcountReset,\n\tdebug,\n\tdir,\n\tdirxml,\n\terror,\n\tcontext,\n\tcreateTask,\n\tgroup,\n\tgroupEnd,\n\tgroupCollapsed,\n\tinfo,\n\tlog,\n\tprofile,\n\tprofileEnd,\n\ttable,\n\ttime,\n\ttimeEnd,\n\ttimeLog,\n\ttimeStamp,\n\ttrace,\n\twarn\n};\n", "import {\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times,\n  Console\n} from \"unenv/node/console\";\nexport {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n} from \"unenv/node/console\";\nconst workerdConsole = globalThis[\"console\"];\nexport const {\n  assert,\n  clear,\n  // @ts-expect-error undocumented public API\n  context,\n  count,\n  countReset,\n  // @ts-expect-error undocumented public API\n  createTask,\n  debug,\n  dir,\n  dirxml,\n  error,\n  group,\n  groupCollapsed,\n  groupEnd,\n  info,\n  log,\n  profile,\n  profileEnd,\n  table,\n  time,\n  timeEnd,\n  timeLog,\n  timeStamp,\n  trace,\n  warn\n} = workerdConsole;\nObject.assign(workerdConsole, {\n  Console,\n  _ignoreErrors,\n  _stderr,\n  _stderrErrorHandler,\n  _stdout,\n  _stdoutErrorHandler,\n  _times\n});\nexport default workerdConsole;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/console\";\nglobalThis.console = defaultExport;", "export const hrtime = /*@__PURE__*/ Object.assign(function hrtime(startTime) {\n\tconst now = Date.now();\n\tconst seconds = Math.trunc(now / 1e3);\n\tconst nanos = now % 1e3 * 1e6;\n\tif (startTime) {\n\t\tlet diffSeconds = seconds - startTime[0];\n\t\tlet diffNanos = nanos - startTime[0];\n\t\tif (diffNanos < 0) {\n\t\t\tdiffSeconds = diffSeconds - 1;\n\t\t\tdiffNanos = 1e9 + diffNanos;\n\t\t}\n\t\treturn [diffSeconds, diffNanos];\n\t}\n\treturn [seconds, nanos];\n}, { bigint: function bigint() {\n\treturn BigInt(Date.now() * 1e6);\n} });\n", "import { Socket } from \"node:net\";\nexport class ReadStream extends Socket {\n\tfd;\n\tconstructor(fd) {\n\t\tsuper();\n\t\tthis.fd = fd;\n\t}\n\tisRaw = false;\n\tsetRawMode(mode) {\n\t\tthis.isRaw = mode;\n\t\treturn this;\n\t}\n\tisTTY = false;\n}\n", "import { Socket } from \"node:net\";\nexport class WriteStream extends Socket {\n\tfd;\n\tconstructor(fd) {\n\t\tsuper();\n\t\tthis.fd = fd;\n\t}\n\tclearLine(dir, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tclearScreenDown(callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tcursorTo(x, y, callback) {\n\t\tcallback && typeof callback === \"function\" && callback();\n\t\treturn false;\n\t}\n\tmoveCursor(dx, dy, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tgetColorDepth(env) {\n\t\treturn 1;\n\t}\n\thasColors(count, env) {\n\t\treturn false;\n\t}\n\tgetWindowSize() {\n\t\treturn [this.columns, this.rows];\n\t}\n\tcolumns = 80;\n\trows = 24;\n\tisTTY = false;\n}\n", "import { ReadStream } from \"./internal/tty/read-stream.mjs\";\nimport { WriteStream } from \"./internal/tty/write-stream.mjs\";\nexport { ReadStream } from \"./internal/tty/read-stream.mjs\";\nexport { WriteStream } from \"./internal/tty/write-stream.mjs\";\nexport const isatty = function() {\n\treturn false;\n};\nexport default {\n\tReadStream,\n\tWriteStream,\n\tisatty\n};\n", "import { EventEmitter } from \"node:events\";\nimport { ReadStream, WriteStream } from \"node:tty\";\nimport { notImplemented, createNotImplementedError } from \"../../../_internal/utils.mjs\";\nexport class Process extends EventEmitter {\n\tenv;\n\thrtime;\n\tnextTick;\n\tconstructor(impl) {\n\t\tsuper();\n\t\tthis.env = impl.env;\n\t\tthis.hrtime = impl.hrtime;\n\t\tthis.nextTick = impl.nextTick;\n\t\tfor (const prop of [...Object.getOwnPropertyNames(Process.prototype), ...Object.getOwnPropertyNames(EventEmitter.prototype)]) {\n\t\t\tconst value = this[prop];\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tthis[prop] = value.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\temitWarning(warning, type, code) {\n\t\tconsole.warn(`${code ? `[${code}] ` : \"\"}${type ? `${type}: ` : \"\"}${warning}`);\n\t}\n\temit(...args) {\n\t\treturn super.emit(...args);\n\t}\n\tlisteners(eventName) {\n\t\treturn super.listeners(eventName);\n\t}\n\t#stdin;\n\t#stdout;\n\t#stderr;\n\tget stdin() {\n\t\treturn this.#stdin ??= new ReadStream(0);\n\t}\n\tget stdout() {\n\t\treturn this.#stdout ??= new WriteStream(1);\n\t}\n\tget stderr() {\n\t\treturn this.#stderr ??= new WriteStream(2);\n\t}\n\t#cwd = \"/\";\n\tchdir(cwd) {\n\t\tthis.#cwd = cwd;\n\t}\n\tcwd() {\n\t\treturn this.#cwd;\n\t}\n\tarch = \"\";\n\tplatform = \"\";\n\targv = [];\n\targv0 = \"\";\n\texecArgv = [];\n\texecPath = \"\";\n\ttitle = \"\";\n\tpid = 200;\n\tppid = 100;\n\tget version() {\n\t\treturn \"\";\n\t}\n\tget versions() {\n\t\treturn {};\n\t}\n\tget allowedNodeEnvironmentFlags() {\n\t\treturn new Set();\n\t}\n\tget sourceMapsEnabled() {\n\t\treturn false;\n\t}\n\tget debugPort() {\n\t\treturn 0;\n\t}\n\tget throwDeprecation() {\n\t\treturn false;\n\t}\n\tget traceDeprecation() {\n\t\treturn false;\n\t}\n\tget features() {\n\t\treturn {};\n\t}\n\tget release() {\n\t\treturn {};\n\t}\n\tget connected() {\n\t\treturn false;\n\t}\n\tget config() {\n\t\treturn {};\n\t}\n\tget moduleLoadList() {\n\t\treturn [];\n\t}\n\tconstrainedMemory() {\n\t\treturn 0;\n\t}\n\tavailableMemory() {\n\t\treturn 0;\n\t}\n\tuptime() {\n\t\treturn 0;\n\t}\n\tresourceUsage() {\n\t\treturn {};\n\t}\n\tref() {}\n\tunref() {}\n\tumask() {\n\t\tthrow createNotImplementedError(\"process.umask\");\n\t}\n\tgetBuiltinModule() {\n\t\treturn undefined;\n\t}\n\tgetActiveResourcesInfo() {\n\t\tthrow createNotImplementedError(\"process.getActiveResourcesInfo\");\n\t}\n\texit() {\n\t\tthrow createNotImplementedError(\"process.exit\");\n\t}\n\treallyExit() {\n\t\tthrow createNotImplementedError(\"process.reallyExit\");\n\t}\n\tkill() {\n\t\tthrow createNotImplementedError(\"process.kill\");\n\t}\n\tabort() {\n\t\tthrow createNotImplementedError(\"process.abort\");\n\t}\n\tdlopen() {\n\t\tthrow createNotImplementedError(\"process.dlopen\");\n\t}\n\tsetSourceMapsEnabled() {\n\t\tthrow createNotImplementedError(\"process.setSourceMapsEnabled\");\n\t}\n\tloadEnvFile() {\n\t\tthrow createNotImplementedError(\"process.loadEnvFile\");\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"process.disconnect\");\n\t}\n\tcpuUsage() {\n\t\tthrow createNotImplementedError(\"process.cpuUsage\");\n\t}\n\tsetUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.setUncaughtExceptionCaptureCallback\");\n\t}\n\thasUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.hasUncaughtExceptionCaptureCallback\");\n\t}\n\tinitgroups() {\n\t\tthrow createNotImplementedError(\"process.initgroups\");\n\t}\n\topenStdin() {\n\t\tthrow createNotImplementedError(\"process.openStdin\");\n\t}\n\tassert() {\n\t\tthrow createNotImplementedError(\"process.assert\");\n\t}\n\tbinding() {\n\t\tthrow createNotImplementedError(\"process.binding\");\n\t}\n\tpermission = { has: /*@__PURE__*/ notImplemented(\"process.permission.has\") };\n\treport = {\n\t\tdirectory: \"\",\n\t\tfilename: \"\",\n\t\tsignal: \"SIGUSR2\",\n\t\tcompact: false,\n\t\treportOnFatalError: false,\n\t\treportOnSignal: false,\n\t\treportOnUncaughtException: false,\n\t\tgetReport: /*@__PURE__*/ notImplemented(\"process.report.getReport\"),\n\t\twriteReport: /*@__PURE__*/ notImplemented(\"process.report.writeReport\")\n\t};\n\tfinalization = {\n\t\tregister: /*@__PURE__*/ notImplemented(\"process.finalization.register\"),\n\t\tunregister: /*@__PURE__*/ notImplemented(\"process.finalization.unregister\"),\n\t\tregisterBeforeExit: /*@__PURE__*/ notImplemented(\"process.finalization.registerBeforeExit\")\n\t};\n\tmemoryUsage = Object.assign(() => ({\n\t\tarrayBuffers: 0,\n\t\trss: 0,\n\t\texternal: 0,\n\t\theapTotal: 0,\n\t\theapUsed: 0\n\t}), { rss: () => 0 });\n\tmainModule = undefined;\n\tdomain = undefined;\n\tsend = undefined;\n\texitCode = undefined;\n\tchannel = undefined;\n\tgetegid = undefined;\n\tgeteuid = undefined;\n\tgetgid = undefined;\n\tgetgroups = undefined;\n\tgetuid = undefined;\n\tsetegid = undefined;\n\tseteuid = undefined;\n\tsetgid = undefined;\n\tsetgroups = undefined;\n\tsetuid = undefined;\n\t_events = undefined;\n\t_eventsCount = undefined;\n\t_exiting = undefined;\n\t_maxListeners = undefined;\n\t_debugEnd = undefined;\n\t_debugProcess = undefined;\n\t_fatalException = undefined;\n\t_getActiveHandles = undefined;\n\t_getActiveRequests = undefined;\n\t_kill = undefined;\n\t_preload_modules = undefined;\n\t_rawDebug = undefined;\n\t_startProfilerIdleNotifier = undefined;\n\t_stopProfilerIdleNotifier = undefined;\n\t_tickCallback = undefined;\n\t_disconnect = undefined;\n\t_handleQueue = undefined;\n\t_pendingMessage = undefined;\n\t_channel = undefined;\n\t_send = undefined;\n\t_linkedBinding = undefined;\n}\n", "import { hrtime as UnenvHrTime } from \"unenv/node/internal/process/hrtime\";\nimport { Process as UnenvProcess } from \"unenv/node/internal/process/process\";\nconst globalProcess = globalThis[\"process\"];\nexport const getBuiltinModule = globalProcess.getBuiltinModule;\nexport const { exit, platform, nextTick } = getBuiltinModule(\n  \"node:process\"\n);\nconst unenvProcess = new UnenvProcess({\n  env: globalProcess.env,\n  hrtime: UnenvHrTime,\n  nextTick\n});\nexport const {\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  hasUncaughtExceptionCaptureCallback,\n  setUncaughtExceptionCaptureCallback,\n  loadEnvFile,\n  sourceMapsEnabled,\n  arch,\n  argv,\n  argv0,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  availableMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  disconnect,\n  emit,\n  emitWarning,\n  env,\n  eventNames,\n  execArgv,\n  execPath,\n  finalization,\n  features,\n  getActiveResourcesInfo,\n  getMaxListeners,\n  hrtime,\n  kill,\n  listeners,\n  listenerCount,\n  memoryUsage,\n  on,\n  off,\n  once,\n  pid,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  title,\n  throwDeprecation,\n  traceDeprecation,\n  umask,\n  uptime,\n  version,\n  versions,\n  domain,\n  initgroups,\n  moduleLoadList,\n  reallyExit,\n  openStdin,\n  assert,\n  binding,\n  send,\n  exitCode,\n  channel,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getuid,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setuid,\n  permission,\n  mainModule,\n  _events,\n  _eventsCount,\n  _exiting,\n  _maxListeners,\n  _debugEnd,\n  _debugProcess,\n  _fatalException,\n  _getActiveHandles,\n  _getActiveRequests,\n  _kill,\n  _preload_modules,\n  _rawDebug,\n  _startProfilerIdleNotifier,\n  _stopProfilerIdleNotifier,\n  _tickCallback,\n  _disconnect,\n  _handleQueue,\n  _pendingMessage,\n  _channel,\n  _send,\n  _linkedBinding\n} = unenvProcess;\nconst _process = {\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  hasUncaughtExceptionCaptureCallback,\n  setUncaughtExceptionCaptureCallback,\n  loadEnvFile,\n  sourceMapsEnabled,\n  arch,\n  argv,\n  argv0,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  availableMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  disconnect,\n  emit,\n  emitWarning,\n  env,\n  eventNames,\n  execArgv,\n  execPath,\n  exit,\n  finalization,\n  features,\n  getBuiltinModule,\n  getActiveResourcesInfo,\n  getMaxListeners,\n  hrtime,\n  kill,\n  listeners,\n  listenerCount,\n  memoryUsage,\n  nextTick,\n  on,\n  off,\n  once,\n  pid,\n  platform,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  title,\n  throwDeprecation,\n  traceDeprecation,\n  umask,\n  uptime,\n  version,\n  versions,\n  // @ts-expect-error old API\n  domain,\n  initgroups,\n  moduleLoadList,\n  reallyExit,\n  openStdin,\n  assert,\n  binding,\n  send,\n  exitCode,\n  channel,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getuid,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setuid,\n  permission,\n  mainModule,\n  _events,\n  _eventsCount,\n  _exiting,\n  _maxListeners,\n  _debugEnd,\n  _debugProcess,\n  _fatalException,\n  _getActiveHandles,\n  _getActiveRequests,\n  _kill,\n  _preload_modules,\n  _rawDebug,\n  _startProfilerIdleNotifier,\n  _stopProfilerIdleNotifier,\n  _tickCallback,\n  _disconnect,\n  _handleQueue,\n  _pendingMessage,\n  _channel,\n  _send,\n  _linkedBinding\n};\nexport default _process;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/process\";\nglobalThis.process = defaultExport;", "", "// `esbuild` doesn't support returning `watch*` options from `onStart()`\n// plugin callbacks. Instead, we define an empty virtual module that is\n// imported by this injected file. Importing the module registers watchers.\nimport \"wrangler:modules-watch\";\n", "// src/compose.ts\nvar compose = (middleware, onError, onNotFound) => {\n  return (context, next) => {\n    let index = -1;\n    return dispatch(0);\n    async function dispatch(i) {\n      if (i <= index) {\n        throw new Error(\"next() called multiple times\");\n      }\n      index = i;\n      let res;\n      let isError = false;\n      let handler;\n      if (middleware[i]) {\n        handler = middleware[i][0][0];\n        context.req.routeIndex = i;\n      } else {\n        handler = i === middleware.length && next || void 0;\n      }\n      if (handler) {\n        try {\n          res = await handler(context, () => dispatch(i + 1));\n        } catch (err) {\n          if (err instanceof Error && onError) {\n            context.error = err;\n            res = await onError(err, context);\n            isError = true;\n          } else {\n            throw err;\n          }\n        }\n      } else {\n        if (context.finalized === false && onNotFound) {\n          res = await onNotFound(context);\n        }\n      }\n      if (res && (context.finalized === false || isError)) {\n        context.res = res;\n      }\n      return context;\n    }\n  };\n};\nexport {\n  compose\n};\n", "// src/http-exception.ts\nvar HTTPException = class extends Error {\n  res;\n  status;\n  /**\n   * Creates an instance of `HTTPException`.\n   * @param status - HTTP status code for the exception. Defaults to 500.\n   * @param options - Additional options for the exception.\n   */\n  constructor(status = 500, options) {\n    super(options?.message, { cause: options?.cause });\n    this.res = options?.res;\n    this.status = status;\n  }\n  /**\n   * Returns the response object associated with the exception.\n   * If a response object is not provided, a new response is created with the error message and status code.\n   * @returns The response object.\n   */\n  getResponse() {\n    if (this.res) {\n      const newResponse = new Response(this.res.body, {\n        status: this.status,\n        headers: this.res.headers\n      });\n      return newResponse;\n    }\n    return new Response(this.message, {\n      status: this.status\n    });\n  }\n};\nexport {\n  HTTPException\n};\n", "// src/request/constants.ts\nvar GET_MATCH_RESULT = /* @__PURE__ */ Symbol();\nexport {\n  GET_MATCH_RESULT\n};\n", "// src/utils/body.ts\nimport { HonoRequest } from \"../request.js\";\nvar parseBody = async (request, options = /* @__PURE__ */ Object.create(null)) => {\n  const { all = false, dot = false } = options;\n  const headers = request instanceof HonoRequest ? request.raw.headers : request.headers;\n  const contentType = headers.get(\"Content-Type\");\n  if (contentType?.startsWith(\"multipart/form-data\") || contentType?.startsWith(\"application/x-www-form-urlencoded\")) {\n    return parseFormData(request, { all, dot });\n  }\n  return {};\n};\nasync function parseFormData(request, options) {\n  const formData = await request.formData();\n  if (formData) {\n    return convertFormDataToBodyData(formData, options);\n  }\n  return {};\n}\nfunction convertFormDataToBodyData(formData, options) {\n  const form = /* @__PURE__ */ Object.create(null);\n  formData.forEach((value, key) => {\n    const shouldParseAllValues = options.all || key.endsWith(\"[]\");\n    if (!shouldParseAllValues) {\n      form[key] = value;\n    } else {\n      handleParsingAllValues(form, key, value);\n    }\n  });\n  if (options.dot) {\n    Object.entries(form).forEach(([key, value]) => {\n      const shouldParseDotValues = key.includes(\".\");\n      if (shouldParseDotValues) {\n        handleParsingNestedValues(form, key, value);\n        delete form[key];\n      }\n    });\n  }\n  return form;\n}\nvar handleParsingAllValues = (form, key, value) => {\n  if (form[key] !== void 0) {\n    if (Array.isArray(form[key])) {\n      ;\n      form[key].push(value);\n    } else {\n      form[key] = [form[key], value];\n    }\n  } else {\n    if (!key.endsWith(\"[]\")) {\n      form[key] = value;\n    } else {\n      form[key] = [value];\n    }\n  }\n};\nvar handleParsingNestedValues = (form, key, value) => {\n  let nestedForm = form;\n  const keys = key.split(\".\");\n  keys.forEach((key2, index) => {\n    if (index === keys.length - 1) {\n      nestedForm[key2] = value;\n    } else {\n      if (!nestedForm[key2] || typeof nestedForm[key2] !== \"object\" || Array.isArray(nestedForm[key2]) || nestedForm[key2] instanceof File) {\n        nestedForm[key2] = /* @__PURE__ */ Object.create(null);\n      }\n      nestedForm = nestedForm[key2];\n    }\n  });\n};\nexport {\n  parseBody\n};\n", "// src/utils/url.ts\nvar splitPath = (path) => {\n  const paths = path.split(\"/\");\n  if (paths[0] === \"\") {\n    paths.shift();\n  }\n  return paths;\n};\nvar splitRoutingPath = (routePath) => {\n  const { groups, path } = extractGroupsFromPath(routePath);\n  const paths = splitPath(path);\n  return replaceGroupMarks(paths, groups);\n};\nvar extractGroupsFromPath = (path) => {\n  const groups = [];\n  path = path.replace(/\\{[^}]+\\}/g, (match, index) => {\n    const mark = `@${index}`;\n    groups.push([mark, match]);\n    return mark;\n  });\n  return { groups, path };\n};\nvar replaceGroupMarks = (paths, groups) => {\n  for (let i = groups.length - 1; i >= 0; i--) {\n    const [mark] = groups[i];\n    for (let j = paths.length - 1; j >= 0; j--) {\n      if (paths[j].includes(mark)) {\n        paths[j] = paths[j].replace(mark, groups[i][1]);\n        break;\n      }\n    }\n  }\n  return paths;\n};\nvar patternCache = {};\nvar getPattern = (label, next) => {\n  if (label === \"*\") {\n    return \"*\";\n  }\n  const match = label.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n  if (match) {\n    const cacheKey = `${label}#${next}`;\n    if (!patternCache[cacheKey]) {\n      if (match[2]) {\n        patternCache[cacheKey] = next && next[0] !== \":\" && next[0] !== \"*\" ? [cacheKey, match[1], new RegExp(`^${match[2]}(?=/${next})`)] : [label, match[1], new RegExp(`^${match[2]}$`)];\n      } else {\n        patternCache[cacheKey] = [label, match[1], true];\n      }\n    }\n    return patternCache[cacheKey];\n  }\n  return null;\n};\nvar tryDecode = (str, decoder) => {\n  try {\n    return decoder(str);\n  } catch {\n    return str.replace(/(?:%[0-9A-Fa-f]{2})+/g, (match) => {\n      try {\n        return decoder(match);\n      } catch {\n        return match;\n      }\n    });\n  }\n};\nvar tryDecodeURI = (str) => tryDecode(str, decodeURI);\nvar getPath = (request) => {\n  const url = request.url;\n  const start = url.indexOf(\"/\", url.indexOf(\":\") + 4);\n  let i = start;\n  for (; i < url.length; i++) {\n    const charCode = url.charCodeAt(i);\n    if (charCode === 37) {\n      const queryIndex = url.indexOf(\"?\", i);\n      const path = url.slice(start, queryIndex === -1 ? void 0 : queryIndex);\n      return tryDecodeURI(path.includes(\"%25\") ? path.replace(/%25/g, \"%2525\") : path);\n    } else if (charCode === 63) {\n      break;\n    }\n  }\n  return url.slice(start, i);\n};\nvar getQueryStrings = (url) => {\n  const queryIndex = url.indexOf(\"?\", 8);\n  return queryIndex === -1 ? \"\" : \"?\" + url.slice(queryIndex + 1);\n};\nvar getPathNoStrict = (request) => {\n  const result = getPath(request);\n  return result.length > 1 && result.at(-1) === \"/\" ? result.slice(0, -1) : result;\n};\nvar mergePath = (base, sub, ...rest) => {\n  if (rest.length) {\n    sub = mergePath(sub, ...rest);\n  }\n  return `${base?.[0] === \"/\" ? \"\" : \"/\"}${base}${sub === \"/\" ? \"\" : `${base?.at(-1) === \"/\" ? \"\" : \"/\"}${sub?.[0] === \"/\" ? sub.slice(1) : sub}`}`;\n};\nvar checkOptionalParameter = (path) => {\n  if (path.charCodeAt(path.length - 1) !== 63 || !path.includes(\":\")) {\n    return null;\n  }\n  const segments = path.split(\"/\");\n  const results = [];\n  let basePath = \"\";\n  segments.forEach((segment) => {\n    if (segment !== \"\" && !/\\:/.test(segment)) {\n      basePath += \"/\" + segment;\n    } else if (/\\:/.test(segment)) {\n      if (/\\?/.test(segment)) {\n        if (results.length === 0 && basePath === \"\") {\n          results.push(\"/\");\n        } else {\n          results.push(basePath);\n        }\n        const optionalSegment = segment.replace(\"?\", \"\");\n        basePath += \"/\" + optionalSegment;\n        results.push(basePath);\n      } else {\n        basePath += \"/\" + segment;\n      }\n    }\n  });\n  return results.filter((v, i, a) => a.indexOf(v) === i);\n};\nvar _decodeURI = (value) => {\n  if (!/[%+]/.test(value)) {\n    return value;\n  }\n  if (value.indexOf(\"+\") !== -1) {\n    value = value.replace(/\\+/g, \" \");\n  }\n  return value.indexOf(\"%\") !== -1 ? tryDecode(value, decodeURIComponent_) : value;\n};\nvar _getQueryParam = (url, key, multiple) => {\n  let encoded;\n  if (!multiple && key && !/[%+]/.test(key)) {\n    let keyIndex2 = url.indexOf(\"?\", 8);\n    if (keyIndex2 === -1) {\n      return void 0;\n    }\n    if (!url.startsWith(key, keyIndex2 + 1)) {\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    while (keyIndex2 !== -1) {\n      const trailingKeyCode = url.charCodeAt(keyIndex2 + key.length + 1);\n      if (trailingKeyCode === 61) {\n        const valueIndex = keyIndex2 + key.length + 2;\n        const endIndex = url.indexOf(\"&\", valueIndex);\n        return _decodeURI(url.slice(valueIndex, endIndex === -1 ? void 0 : endIndex));\n      } else if (trailingKeyCode == 38 || isNaN(trailingKeyCode)) {\n        return \"\";\n      }\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    encoded = /[%+]/.test(url);\n    if (!encoded) {\n      return void 0;\n    }\n  }\n  const results = {};\n  encoded ??= /[%+]/.test(url);\n  let keyIndex = url.indexOf(\"?\", 8);\n  while (keyIndex !== -1) {\n    const nextKeyIndex = url.indexOf(\"&\", keyIndex + 1);\n    let valueIndex = url.indexOf(\"=\", keyIndex);\n    if (valueIndex > nextKeyIndex && nextKeyIndex !== -1) {\n      valueIndex = -1;\n    }\n    let name = url.slice(\n      keyIndex + 1,\n      valueIndex === -1 ? nextKeyIndex === -1 ? void 0 : nextKeyIndex : valueIndex\n    );\n    if (encoded) {\n      name = _decodeURI(name);\n    }\n    keyIndex = nextKeyIndex;\n    if (name === \"\") {\n      continue;\n    }\n    let value;\n    if (valueIndex === -1) {\n      value = \"\";\n    } else {\n      value = url.slice(valueIndex + 1, nextKeyIndex === -1 ? void 0 : nextKeyIndex);\n      if (encoded) {\n        value = _decodeURI(value);\n      }\n    }\n    if (multiple) {\n      if (!(results[name] && Array.isArray(results[name]))) {\n        results[name] = [];\n      }\n      ;\n      results[name].push(value);\n    } else {\n      results[name] ??= value;\n    }\n  }\n  return key ? results[key] : results;\n};\nvar getQueryParam = _getQueryParam;\nvar getQueryParams = (url, key) => {\n  return _getQueryParam(url, key, true);\n};\nvar decodeURIComponent_ = decodeURIComponent;\nexport {\n  checkOptionalParameter,\n  decodeURIComponent_,\n  getPath,\n  getPathNoStrict,\n  getPattern,\n  getQueryParam,\n  getQueryParams,\n  getQueryStrings,\n  mergePath,\n  splitPath,\n  splitRoutingPath,\n  tryDecode\n};\n", "// src/request.ts\nimport { HTTPException } from \"./http-exception.js\";\nimport { GET_MATCH_RESULT } from \"./request/constants.js\";\nimport { parseBody } from \"./utils/body.js\";\nimport { decodeURIComponent_, getQueryParam, getQueryParams, tryDecode } from \"./utils/url.js\";\nvar tryDecodeURIComponent = (str) => tryDecode(str, decodeURIComponent_);\nvar HonoRequest = class {\n  /**\n   * `.raw` can get the raw Request object.\n   *\n   * @see {@link https://hono.dev/docs/api/request#raw}\n   *\n   * @example\n   * ```ts\n   * // For Cloudflare Workers\n   * app.post('/', async (c) => {\n   *   const metadata = c.req.raw.cf?.hostMetadata?\n   *   ...\n   * })\n   * ```\n   */\n  raw;\n  #validatedData;\n  // Short name of validatedData\n  #matchResult;\n  routeIndex = 0;\n  /**\n   * `.path` can get the pathname of the request.\n   *\n   * @see {@link https://hono.dev/docs/api/request#path}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const pathname = c.req.path // `/about/me`\n   * })\n   * ```\n   */\n  path;\n  bodyCache = {};\n  constructor(request, path = \"/\", matchResult = [[]]) {\n    this.raw = request;\n    this.path = path;\n    this.#matchResult = matchResult;\n    this.#validatedData = {};\n  }\n  param(key) {\n    return key ? this.#getDecodedParam(key) : this.#getAllDecodedParams();\n  }\n  #getDecodedParam(key) {\n    const paramKey = this.#matchResult[0][this.routeIndex][1][key];\n    const param = this.#getParamValue(paramKey);\n    return param && /\\%/.test(param) ? tryDecodeURIComponent(param) : param;\n  }\n  #getAllDecodedParams() {\n    const decoded = {};\n    const keys = Object.keys(this.#matchResult[0][this.routeIndex][1]);\n    for (const key of keys) {\n      const value = this.#getParamValue(this.#matchResult[0][this.routeIndex][1][key]);\n      if (value !== void 0) {\n        decoded[key] = /\\%/.test(value) ? tryDecodeURIComponent(value) : value;\n      }\n    }\n    return decoded;\n  }\n  #getParamValue(paramKey) {\n    return this.#matchResult[1] ? this.#matchResult[1][paramKey] : paramKey;\n  }\n  query(key) {\n    return getQueryParam(this.url, key);\n  }\n  queries(key) {\n    return getQueryParams(this.url, key);\n  }\n  header(name) {\n    if (name) {\n      return this.raw.headers.get(name) ?? void 0;\n    }\n    const headerData = {};\n    this.raw.headers.forEach((value, key) => {\n      headerData[key] = value;\n    });\n    return headerData;\n  }\n  async parseBody(options) {\n    return this.bodyCache.parsedBody ??= await parseBody(this, options);\n  }\n  #cachedBody = (key) => {\n    const { bodyCache, raw } = this;\n    const cachedBody = bodyCache[key];\n    if (cachedBody) {\n      return cachedBody;\n    }\n    const anyCachedKey = Object.keys(bodyCache)[0];\n    if (anyCachedKey) {\n      return bodyCache[anyCachedKey].then((body) => {\n        if (anyCachedKey === \"json\") {\n          body = JSON.stringify(body);\n        }\n        return new Response(body)[key]();\n      });\n    }\n    return bodyCache[key] = raw[key]();\n  };\n  /**\n   * `.json()` can parse Request body of type `application/json`\n   *\n   * @see {@link https://hono.dev/docs/api/request#json}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.json()\n   * })\n   * ```\n   */\n  json() {\n    return this.#cachedBody(\"text\").then((text) => JSON.parse(text));\n  }\n  /**\n   * `.text()` can parse Request body of type `text/plain`\n   *\n   * @see {@link https://hono.dev/docs/api/request#text}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.text()\n   * })\n   * ```\n   */\n  text() {\n    return this.#cachedBody(\"text\");\n  }\n  /**\n   * `.arrayBuffer()` parse Request body as an `ArrayBuffer`\n   *\n   * @see {@link https://hono.dev/docs/api/request#arraybuffer}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.arrayBuffer()\n   * })\n   * ```\n   */\n  arrayBuffer() {\n    return this.#cachedBody(\"arrayBuffer\");\n  }\n  /**\n   * Parses the request body as a `Blob`.\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.blob();\n   * });\n   * ```\n   * @see https://hono.dev/docs/api/request#blob\n   */\n  blob() {\n    return this.#cachedBody(\"blob\");\n  }\n  /**\n   * Parses the request body as `FormData`.\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.formData();\n   * });\n   * ```\n   * @see https://hono.dev/docs/api/request#formdata\n   */\n  formData() {\n    return this.#cachedBody(\"formData\");\n  }\n  /**\n   * Adds validated data to the request.\n   *\n   * @param target - The target of the validation.\n   * @param data - The validated data to add.\n   */\n  addValidatedData(target, data) {\n    this.#validatedData[target] = data;\n  }\n  valid(target) {\n    return this.#validatedData[target];\n  }\n  /**\n   * `.url()` can get the request url strings.\n   *\n   * @see {@link https://hono.dev/docs/api/request#url}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const url = c.req.url // `http://localhost:8787/about/me`\n   *   ...\n   * })\n   * ```\n   */\n  get url() {\n    return this.raw.url;\n  }\n  /**\n   * `.method()` can get the method name of the request.\n   *\n   * @see {@link https://hono.dev/docs/api/request#method}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const method = c.req.method // `GET`\n   * })\n   * ```\n   */\n  get method() {\n    return this.raw.method;\n  }\n  get [GET_MATCH_RESULT]() {\n    return this.#matchResult;\n  }\n  /**\n   * `.matchedRoutes()` can return a matched route in the handler\n   *\n   * @deprecated\n   *\n   * Use matchedRoutes helper defined in \"hono/route\" instead.\n   *\n   * @see {@link https://hono.dev/docs/api/request#matchedroutes}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async function logger(c, next) {\n   *   await next()\n   *   c.req.matchedRoutes.forEach(({ handler, method, path }, i) => {\n   *     const name = handler.name || (handler.length < 2 ? '[handler]' : '[middleware]')\n   *     console.log(\n   *       method,\n   *       ' ',\n   *       path,\n   *       ' '.repeat(Math.max(10 - path.length, 0)),\n   *       name,\n   *       i === c.req.routeIndex ? '<- respond from here' : ''\n   *     )\n   *   })\n   * })\n   * ```\n   */\n  get matchedRoutes() {\n    return this.#matchResult[0].map(([[, route]]) => route);\n  }\n  /**\n   * `routePath()` can retrieve the path registered within the handler\n   *\n   * @deprecated\n   *\n   * Use routePath helper defined in \"hono/route\" instead.\n   *\n   * @see {@link https://hono.dev/docs/api/request#routepath}\n   *\n   * @example\n   * ```ts\n   * app.get('/posts/:id', (c) => {\n   *   return c.json({ path: c.req.routePath })\n   * })\n   * ```\n   */\n  get routePath() {\n    return this.#matchResult[0].map(([[, route]]) => route)[this.routeIndex].path;\n  }\n};\nvar cloneRawRequest = async (req) => {\n  if (!req.raw.bodyUsed) {\n    return req.raw.clone();\n  }\n  const cacheKey = Object.keys(req.bodyCache)[0];\n  if (!cacheKey) {\n    throw new HTTPException(500, {\n      message: \"Cannot clone request: body was already consumed and not cached. Please use HonoRequest methods (e.g., req.json(), req.text()) instead of consuming req.raw directly.\"\n    });\n  }\n  const requestInit = {\n    body: await req[cacheKey](),\n    cache: req.raw.cache,\n    credentials: req.raw.credentials,\n    headers: req.header(),\n    integrity: req.raw.integrity,\n    keepalive: req.raw.keepalive,\n    method: req.method,\n    mode: req.raw.mode,\n    redirect: req.raw.redirect,\n    referrer: req.raw.referrer,\n    referrerPolicy: req.raw.referrerPolicy,\n    signal: req.raw.signal\n  };\n  return new Request(req.url, requestInit);\n};\nexport {\n  HonoRequest,\n  cloneRawRequest\n};\n", "// src/utils/html.ts\nvar HtmlEscapedCallbackPhase = {\n  Stringify: 1,\n  BeforeStream: 2,\n  Stream: 3\n};\nvar raw = (value, callbacks) => {\n  const escapedString = new String(value);\n  escapedString.isEscaped = true;\n  escapedString.callbacks = callbacks;\n  return escapedString;\n};\nvar escapeRe = /[&<>'\"]/;\nvar stringBufferToString = async (buffer, callbacks) => {\n  let str = \"\";\n  callbacks ||= [];\n  const resolvedBuffer = await Promise.all(buffer);\n  for (let i = resolvedBuffer.length - 1; ; i--) {\n    str += resolvedBuffer[i];\n    i--;\n    if (i < 0) {\n      break;\n    }\n    let r = resolvedBuffer[i];\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    const isEscaped = r.isEscaped;\n    r = await (typeof r === \"object\" ? r.toString() : r);\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    if (r.isEscaped ?? isEscaped) {\n      str += r;\n    } else {\n      const buf = [str];\n      escapeToBuffer(r, buf);\n      str = buf[0];\n    }\n  }\n  return raw(str, callbacks);\n};\nvar escapeToBuffer = (str, buffer) => {\n  const match = str.search(escapeRe);\n  if (match === -1) {\n    buffer[0] += str;\n    return;\n  }\n  let escape;\n  let index;\n  let lastIndex = 0;\n  for (index = match; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escape = \"&quot;\";\n        break;\n      case 39:\n        escape = \"&#39;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      case 62:\n        escape = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    buffer[0] += str.substring(lastIndex, index) + escape;\n    lastIndex = index + 1;\n  }\n  buffer[0] += str.substring(lastIndex, index);\n};\nvar resolveCallbackSync = (str) => {\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return str;\n  }\n  const buffer = [str];\n  const context = {};\n  callbacks.forEach((c) => c({ phase: HtmlEscapedCallbackPhase.Stringify, buffer, context }));\n  return buffer[0];\n};\nvar resolveCallback = async (str, phase, preserveCallbacks, context, buffer) => {\n  if (typeof str === \"object\" && !(str instanceof String)) {\n    if (!(str instanceof Promise)) {\n      str = str.toString();\n    }\n    if (str instanceof Promise) {\n      str = await str;\n    }\n  }\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return Promise.resolve(str);\n  }\n  if (buffer) {\n    buffer[0] += str;\n  } else {\n    buffer = [str];\n  }\n  const resStr = Promise.all(callbacks.map((c) => c({ phase, buffer, context }))).then(\n    (res) => Promise.all(\n      res.filter(Boolean).map((str2) => resolveCallback(str2, phase, false, context, buffer))\n    ).then(() => buffer[0])\n  );\n  if (preserveCallbacks) {\n    return raw(await resStr, callbacks);\n  } else {\n    return resStr;\n  }\n};\nexport {\n  HtmlEscapedCallbackPhase,\n  escapeToBuffer,\n  raw,\n  resolveCallback,\n  resolveCallbackSync,\n  stringBufferToString\n};\n", "// src/context.ts\nimport { HonoRequest } from \"./request.js\";\nimport { HtmlEscapedCallbackPhase, resolveCallback } from \"./utils/html.js\";\nvar TEXT_PLAIN = \"text/plain; charset=UTF-8\";\nvar setDefaultContentType = (contentType, headers) => {\n  return {\n    \"Content-Type\": contentType,\n    ...headers\n  };\n};\nvar Context = class {\n  #rawRequest;\n  #req;\n  /**\n   * `.env` can get bindings (environment variables, secrets, KV namespaces, D1 database, R2 bucket etc.) in Cloudflare Workers.\n   *\n   * @see {@link https://hono.dev/docs/api/context#env}\n   *\n   * @example\n   * ```ts\n   * // Environment object for Cloudflare Workers\n   * app.get('*', async c => {\n   *   const counter = c.env.COUNTER\n   * })\n   * ```\n   */\n  env = {};\n  #var;\n  finalized = false;\n  /**\n   * `.error` can get the error object from the middleware if the Handler throws an error.\n   *\n   * @see {@link https://hono.dev/docs/api/context#error}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async (c, next) => {\n   *   await next()\n   *   if (c.error) {\n   *     // do something...\n   *   }\n   * })\n   * ```\n   */\n  error;\n  #status;\n  #executionCtx;\n  #res;\n  #layout;\n  #renderer;\n  #notFoundHandler;\n  #preparedHeaders;\n  #matchResult;\n  #path;\n  /**\n   * Creates an instance of the Context class.\n   *\n   * @param req - The Request object.\n   * @param options - Optional configuration options for the context.\n   */\n  constructor(req, options) {\n    this.#rawRequest = req;\n    if (options) {\n      this.#executionCtx = options.executionCtx;\n      this.env = options.env;\n      this.#notFoundHandler = options.notFoundHandler;\n      this.#path = options.path;\n      this.#matchResult = options.matchResult;\n    }\n  }\n  /**\n   * `.req` is the instance of {@link HonoRequest}.\n   */\n  get req() {\n    this.#req ??= new HonoRequest(this.#rawRequest, this.#path, this.#matchResult);\n    return this.#req;\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#event}\n   * The FetchEvent associated with the current request.\n   *\n   * @throws Will throw an error if the context does not have a FetchEvent.\n   */\n  get event() {\n    if (this.#executionCtx && \"respondWith\" in this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no FetchEvent\");\n    }\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#executionctx}\n   * The ExecutionContext associated with the current request.\n   *\n   * @throws Will throw an error if the context does not have an ExecutionContext.\n   */\n  get executionCtx() {\n    if (this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no ExecutionContext\");\n    }\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#res}\n   * The Response object for the current request.\n   */\n  get res() {\n    return this.#res ||= new Response(null, {\n      headers: this.#preparedHeaders ??= new Headers()\n    });\n  }\n  /**\n   * Sets the Response object for the current request.\n   *\n   * @param _res - The Response object to set.\n   */\n  set res(_res) {\n    if (this.#res && _res) {\n      _res = new Response(_res.body, _res);\n      for (const [k, v] of this.#res.headers.entries()) {\n        if (k === \"content-type\") {\n          continue;\n        }\n        if (k === \"set-cookie\") {\n          const cookies = this.#res.headers.getSetCookie();\n          _res.headers.delete(\"set-cookie\");\n          for (const cookie of cookies) {\n            _res.headers.append(\"set-cookie\", cookie);\n          }\n        } else {\n          _res.headers.set(k, v);\n        }\n      }\n    }\n    this.#res = _res;\n    this.finalized = true;\n  }\n  /**\n   * `.render()` can create a response within a layout.\n   *\n   * @see {@link https://hono.dev/docs/api/context#render-setrenderer}\n   *\n   * @example\n   * ```ts\n   * app.get('/', (c) => {\n   *   return c.render('Hello!')\n   * })\n   * ```\n   */\n  render = (...args) => {\n    this.#renderer ??= (content) => this.html(content);\n    return this.#renderer(...args);\n  };\n  /**\n   * Sets the layout for the response.\n   *\n   * @param layout - The layout to set.\n   * @returns The layout function.\n   */\n  setLayout = (layout) => this.#layout = layout;\n  /**\n   * Gets the current layout for the response.\n   *\n   * @returns The current layout function.\n   */\n  getLayout = () => this.#layout;\n  /**\n   * `.setRenderer()` can set the layout in the custom middleware.\n   *\n   * @see {@link https://hono.dev/docs/api/context#render-setrenderer}\n   *\n   * @example\n   * ```tsx\n   * app.use('*', async (c, next) => {\n   *   c.setRenderer((content) => {\n   *     return c.html(\n   *       <html>\n   *         <body>\n   *           <p>{content}</p>\n   *         </body>\n   *       </html>\n   *     )\n   *   })\n   *   await next()\n   * })\n   * ```\n   */\n  setRenderer = (renderer) => {\n    this.#renderer = renderer;\n  };\n  /**\n   * `.header()` can set headers.\n   *\n   * @see {@link https://hono.dev/docs/api/context#header}\n   *\n   * @example\n   * ```ts\n   * app.get('/welcome', (c) => {\n   *   // Set headers\n   *   c.header('X-Message', 'Hello!')\n   *   c.header('Content-Type', 'text/plain')\n   *\n   *   return c.body('Thank you for coming')\n   * })\n   * ```\n   */\n  header = (name, value, options) => {\n    if (this.finalized) {\n      this.#res = new Response(this.#res.body, this.#res);\n    }\n    const headers = this.#res ? this.#res.headers : this.#preparedHeaders ??= new Headers();\n    if (value === void 0) {\n      headers.delete(name);\n    } else if (options?.append) {\n      headers.append(name, value);\n    } else {\n      headers.set(name, value);\n    }\n  };\n  status = (status) => {\n    this.#status = status;\n  };\n  /**\n   * `.set()` can set the value specified by the key.\n   *\n   * @see {@link https://hono.dev/docs/api/context#set-get}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async (c, next) => {\n   *   c.set('message', 'Hono is hot!!')\n   *   await next()\n   * })\n   * ```\n   */\n  set = (key, value) => {\n    this.#var ??= /* @__PURE__ */ new Map();\n    this.#var.set(key, value);\n  };\n  /**\n   * `.get()` can use the value specified by the key.\n   *\n   * @see {@link https://hono.dev/docs/api/context#set-get}\n   *\n   * @example\n   * ```ts\n   * app.get('/', (c) => {\n   *   const message = c.get('message')\n   *   return c.text(`The message is \"${message}\"`)\n   * })\n   * ```\n   */\n  get = (key) => {\n    return this.#var ? this.#var.get(key) : void 0;\n  };\n  /**\n   * `.var` can access the value of a variable.\n   *\n   * @see {@link https://hono.dev/docs/api/context#var}\n   *\n   * @example\n   * ```ts\n   * const result = c.var.client.oneMethod()\n   * ```\n   */\n  // c.var.propName is a read-only\n  get var() {\n    if (!this.#var) {\n      return {};\n    }\n    return Object.fromEntries(this.#var);\n  }\n  #newResponse(data, arg, headers) {\n    const responseHeaders = this.#res ? new Headers(this.#res.headers) : this.#preparedHeaders ?? new Headers();\n    if (typeof arg === \"object\" && \"headers\" in arg) {\n      const argHeaders = arg.headers instanceof Headers ? arg.headers : new Headers(arg.headers);\n      for (const [key, value] of argHeaders) {\n        if (key.toLowerCase() === \"set-cookie\") {\n          responseHeaders.append(key, value);\n        } else {\n          responseHeaders.set(key, value);\n        }\n      }\n    }\n    if (headers) {\n      for (const [k, v] of Object.entries(headers)) {\n        if (typeof v === \"string\") {\n          responseHeaders.set(k, v);\n        } else {\n          responseHeaders.delete(k);\n          for (const v2 of v) {\n            responseHeaders.append(k, v2);\n          }\n        }\n      }\n    }\n    const status = typeof arg === \"number\" ? arg : arg?.status ?? this.#status;\n    return new Response(data, { status, headers: responseHeaders });\n  }\n  newResponse = (...args) => this.#newResponse(...args);\n  /**\n   * `.body()` can return the HTTP response.\n   * You can set headers with `.header()` and set HTTP status code with `.status`.\n   * This can also be set in `.text()`, `.json()` and so on.\n   *\n   * @see {@link https://hono.dev/docs/api/context#body}\n   *\n   * @example\n   * ```ts\n   * app.get('/welcome', (c) => {\n   *   // Set headers\n   *   c.header('X-Message', 'Hello!')\n   *   c.header('Content-Type', 'text/plain')\n   *   // Set HTTP status code\n   *   c.status(201)\n   *\n   *   // Return the response body\n   *   return c.body('Thank you for coming')\n   * })\n   * ```\n   */\n  body = (data, arg, headers) => this.#newResponse(data, arg, headers);\n  /**\n   * `.text()` can render text as `Content-Type:text/plain`.\n   *\n   * @see {@link https://hono.dev/docs/api/context#text}\n   *\n   * @example\n   * ```ts\n   * app.get('/say', (c) => {\n   *   return c.text('Hello!')\n   * })\n   * ```\n   */\n  text = (text, arg, headers) => {\n    return !this.#preparedHeaders && !this.#status && !arg && !headers && !this.finalized ? new Response(text) : this.#newResponse(\n      text,\n      arg,\n      setDefaultContentType(TEXT_PLAIN, headers)\n    );\n  };\n  /**\n   * `.json()` can render JSON as `Content-Type:application/json`.\n   *\n   * @see {@link https://hono.dev/docs/api/context#json}\n   *\n   * @example\n   * ```ts\n   * app.get('/api', (c) => {\n   *   return c.json({ message: 'Hello!' })\n   * })\n   * ```\n   */\n  json = (object, arg, headers) => {\n    return this.#newResponse(\n      JSON.stringify(object),\n      arg,\n      setDefaultContentType(\"application/json\", headers)\n    );\n  };\n  html = (html, arg, headers) => {\n    const res = (html2) => this.#newResponse(html2, arg, setDefaultContentType(\"text/html; charset=UTF-8\", headers));\n    return typeof html === \"object\" ? resolveCallback(html, HtmlEscapedCallbackPhase.Stringify, false, {}).then(res) : res(html);\n  };\n  /**\n   * `.redirect()` can Redirect, default status code is 302.\n   *\n   * @see {@link https://hono.dev/docs/api/context#redirect}\n   *\n   * @example\n   * ```ts\n   * app.get('/redirect', (c) => {\n   *   return c.redirect('/')\n   * })\n   * app.get('/redirect-permanently', (c) => {\n   *   return c.redirect('/', 301)\n   * })\n   * ```\n   */\n  redirect = (location, status) => {\n    const locationString = String(location);\n    this.header(\n      \"Location\",\n      // Multibyes should be encoded\n      // eslint-disable-next-line no-control-regex\n      !/[^\\x00-\\xFF]/.test(locationString) ? locationString : encodeURI(locationString)\n    );\n    return this.newResponse(null, status ?? 302);\n  };\n  /**\n   * `.notFound()` can return the Not Found Response.\n   *\n   * @see {@link https://hono.dev/docs/api/context#notfound}\n   *\n   * @example\n   * ```ts\n   * app.get('/notfound', (c) => {\n   *   return c.notFound()\n   * })\n   * ```\n   */\n  notFound = () => {\n    this.#notFoundHandler ??= () => new Response();\n    return this.#notFoundHandler(this);\n  };\n};\nexport {\n  Context,\n  TEXT_PLAIN\n};\n", "// src/router.ts\nvar METHOD_NAME_ALL = \"ALL\";\nvar METHOD_NAME_ALL_LOWERCASE = \"all\";\nvar METHODS = [\"get\", \"post\", \"put\", \"delete\", \"options\", \"patch\"];\nvar MESSAGE_MATCHER_IS_ALREADY_BUILT = \"Can not add a route since the matcher is already built.\";\nvar UnsupportedPathError = class extends Error {\n};\nexport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHODS,\n  METHOD_NAME_ALL,\n  METHOD_NAME_ALL_LOWERCASE,\n  UnsupportedPathError\n};\n", "// src/utils/constants.ts\nvar COMPOSED_HANDLER = \"__COMPOSED_HANDLER\";\nexport {\n  COMPOSED_HANDLER\n};\n", "// src/hono-base.ts\nimport { compose } from \"./compose.js\";\nimport { Context } from \"./context.js\";\nimport { METHODS, METHOD_NAME_ALL, METHOD_NAME_ALL_LOWERCASE } from \"./router.js\";\nimport { COMPOSED_HANDLER } from \"./utils/constants.js\";\nimport { getPath, getPathNoStrict, mergePath } from \"./utils/url.js\";\nvar notFoundHandler = (c) => {\n  return c.text(\"404 Not Found\", 404);\n};\nvar errorHandler = (err, c) => {\n  if (\"getResponse\" in err) {\n    const res = err.getResponse();\n    return c.newResponse(res.body, res);\n  }\n  console.error(err);\n  return c.text(\"Internal Server Error\", 500);\n};\nvar Hono = class _Hono {\n  get;\n  post;\n  put;\n  delete;\n  options;\n  patch;\n  all;\n  on;\n  use;\n  /*\n    This class is like an abstract class and does not have a router.\n    To use it, inherit the class and implement router in the constructor.\n  */\n  router;\n  getPath;\n  // Cannot use `#` because it requires visibility at JavaScript runtime.\n  _basePath = \"/\";\n  #path = \"/\";\n  routes = [];\n  constructor(options = {}) {\n    const allMethods = [...METHODS, METHOD_NAME_ALL_LOWERCASE];\n    allMethods.forEach((method) => {\n      this[method] = (args1, ...args) => {\n        if (typeof args1 === \"string\") {\n          this.#path = args1;\n        } else {\n          this.#addRoute(method, this.#path, args1);\n        }\n        args.forEach((handler) => {\n          this.#addRoute(method, this.#path, handler);\n        });\n        return this;\n      };\n    });\n    this.on = (method, path, ...handlers) => {\n      for (const p of [path].flat()) {\n        this.#path = p;\n        for (const m of [method].flat()) {\n          handlers.map((handler) => {\n            this.#addRoute(m.toUpperCase(), this.#path, handler);\n          });\n        }\n      }\n      return this;\n    };\n    this.use = (arg1, ...handlers) => {\n      if (typeof arg1 === \"string\") {\n        this.#path = arg1;\n      } else {\n        this.#path = \"*\";\n        handlers.unshift(arg1);\n      }\n      handlers.forEach((handler) => {\n        this.#addRoute(METHOD_NAME_ALL, this.#path, handler);\n      });\n      return this;\n    };\n    const { strict, ...optionsWithoutStrict } = options;\n    Object.assign(this, optionsWithoutStrict);\n    this.getPath = strict ?? true ? options.getPath ?? getPath : getPathNoStrict;\n  }\n  #clone() {\n    const clone = new _Hono({\n      router: this.router,\n      getPath: this.getPath\n    });\n    clone.errorHandler = this.errorHandler;\n    clone.#notFoundHandler = this.#notFoundHandler;\n    clone.routes = this.routes;\n    return clone;\n  }\n  #notFoundHandler = notFoundHandler;\n  // Cannot use `#` because it requires visibility at JavaScript runtime.\n  errorHandler = errorHandler;\n  /**\n   * `.route()` allows grouping other Hono instance in routes.\n   *\n   * @see {@link https://hono.dev/docs/api/routing#grouping}\n   *\n   * @param {string} path - base Path\n   * @param {Hono} app - other Hono instance\n   * @returns {Hono} routed Hono instance\n   *\n   * @example\n   * ```ts\n   * const app = new Hono()\n   * const app2 = new Hono()\n   *\n   * app2.get(\"/user\", (c) => c.text(\"user\"))\n   * app.route(\"/api\", app2) // GET /api/user\n   * ```\n   */\n  route(path, app) {\n    const subApp = this.basePath(path);\n    app.routes.map((r) => {\n      let handler;\n      if (app.errorHandler === errorHandler) {\n        handler = r.handler;\n      } else {\n        handler = async (c, next) => (await compose([], app.errorHandler)(c, () => r.handler(c, next))).res;\n        handler[COMPOSED_HANDLER] = r.handler;\n      }\n      subApp.#addRoute(r.method, r.path, handler);\n    });\n    return this;\n  }\n  /**\n   * `.basePath()` allows base paths to be specified.\n   *\n   * @see {@link https://hono.dev/docs/api/routing#base-path}\n   *\n   * @param {string} path - base Path\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * const api = new Hono().basePath('/api')\n   * ```\n   */\n  basePath(path) {\n    const subApp = this.#clone();\n    subApp._basePath = mergePath(this._basePath, path);\n    return subApp;\n  }\n  /**\n   * `.onError()` handles an error and returns a customized Response.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#error-handling}\n   *\n   * @param {ErrorHandler} handler - request Handler for error\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * app.onError((err, c) => {\n   *   console.error(`${err}`)\n   *   return c.text('Custom Error Message', 500)\n   * })\n   * ```\n   */\n  onError = (handler) => {\n    this.errorHandler = handler;\n    return this;\n  };\n  /**\n   * `.notFound()` allows you to customize a Not Found Response.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#not-found}\n   *\n   * @param {NotFoundHandler} handler - request handler for not-found\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * app.notFound((c) => {\n   *   return c.text('Custom 404 Message', 404)\n   * })\n   * ```\n   */\n  notFound = (handler) => {\n    this.#notFoundHandler = handler;\n    return this;\n  };\n  /**\n   * `.mount()` allows you to mount applications built with other frameworks into your Hono application.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#mount}\n   *\n   * @param {string} path - base Path\n   * @param {Function} applicationHandler - other Request Handler\n   * @param {MountOptions} [options] - options of `.mount()`\n   * @returns {Hono} mounted Hono instance\n   *\n   * @example\n   * ```ts\n   * import { Router as IttyRouter } from 'itty-router'\n   * import { Hono } from 'hono'\n   * // Create itty-router application\n   * const ittyRouter = IttyRouter()\n   * // GET /itty-router/hello\n   * ittyRouter.get('/hello', () => new Response('Hello from itty-router'))\n   *\n   * const app = new Hono()\n   * app.mount('/itty-router', ittyRouter.handle)\n   * ```\n   *\n   * @example\n   * ```ts\n   * const app = new Hono()\n   * // Send the request to another application without modification.\n   * app.mount('/app', anotherApp, {\n   *   replaceRequest: (req) => req,\n   * })\n   * ```\n   */\n  mount(path, applicationHandler, options) {\n    let replaceRequest;\n    let optionHandler;\n    if (options) {\n      if (typeof options === \"function\") {\n        optionHandler = options;\n      } else {\n        optionHandler = options.optionHandler;\n        if (options.replaceRequest === false) {\n          replaceRequest = (request) => request;\n        } else {\n          replaceRequest = options.replaceRequest;\n        }\n      }\n    }\n    const getOptions = optionHandler ? (c) => {\n      const options2 = optionHandler(c);\n      return Array.isArray(options2) ? options2 : [options2];\n    } : (c) => {\n      let executionContext = void 0;\n      try {\n        executionContext = c.executionCtx;\n      } catch {\n      }\n      return [c.env, executionContext];\n    };\n    replaceRequest ||= (() => {\n      const mergedPath = mergePath(this._basePath, path);\n      const pathPrefixLength = mergedPath === \"/\" ? 0 : mergedPath.length;\n      return (request) => {\n        const url = new URL(request.url);\n        url.pathname = url.pathname.slice(pathPrefixLength) || \"/\";\n        return new Request(url, request);\n      };\n    })();\n    const handler = async (c, next) => {\n      const res = await applicationHandler(replaceRequest(c.req.raw), ...getOptions(c));\n      if (res) {\n        return res;\n      }\n      await next();\n    };\n    this.#addRoute(METHOD_NAME_ALL, mergePath(path, \"*\"), handler);\n    return this;\n  }\n  #addRoute(method, path, handler) {\n    method = method.toUpperCase();\n    path = mergePath(this._basePath, path);\n    const r = { basePath: this._basePath, path, method, handler };\n    this.router.add(method, path, [handler, r]);\n    this.routes.push(r);\n  }\n  #handleError(err, c) {\n    if (err instanceof Error) {\n      return this.errorHandler(err, c);\n    }\n    throw err;\n  }\n  #dispatch(request, executionCtx, env, method) {\n    if (method === \"HEAD\") {\n      return (async () => new Response(null, await this.#dispatch(request, executionCtx, env, \"GET\")))();\n    }\n    const path = this.getPath(request, { env });\n    const matchResult = this.router.match(method, path);\n    const c = new Context(request, {\n      path,\n      matchResult,\n      env,\n      executionCtx,\n      notFoundHandler: this.#notFoundHandler\n    });\n    if (matchResult[0].length === 1) {\n      let res;\n      try {\n        res = matchResult[0][0][0][0](c, async () => {\n          c.res = await this.#notFoundHandler(c);\n        });\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n      return res instanceof Promise ? res.then(\n        (resolved) => resolved || (c.finalized ? c.res : this.#notFoundHandler(c))\n      ).catch((err) => this.#handleError(err, c)) : res ?? this.#notFoundHandler(c);\n    }\n    const composed = compose(matchResult[0], this.errorHandler, this.#notFoundHandler);\n    return (async () => {\n      try {\n        const context = await composed(c);\n        if (!context.finalized) {\n          throw new Error(\n            \"Context is not finalized. Did you forget to return a Response object or `await next()`?\"\n          );\n        }\n        return context.res;\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n    })();\n  }\n  /**\n   * `.fetch()` will be entry point of your app.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#fetch}\n   *\n   * @param {Request} request - request Object of request\n   * @param {Env} Env - env Object\n   * @param {ExecutionContext} - context of execution\n   * @returns {Response | Promise<Response>} response of request\n   *\n   */\n  fetch = (request, ...rest) => {\n    return this.#dispatch(request, rest[1], rest[0], request.method);\n  };\n  /**\n   * `.request()` is a useful method for testing.\n   * You can pass a URL or pathname to send a GET request.\n   * app will return a Response object.\n   * ```ts\n   * test('GET /hello is ok', async () => {\n   *   const res = await app.request('/hello')\n   *   expect(res.status).toBe(200)\n   * })\n   * ```\n   * @see https://hono.dev/docs/api/hono#request\n   */\n  request = (input, requestInit, Env, executionCtx) => {\n    if (input instanceof Request) {\n      return this.fetch(requestInit ? new Request(input, requestInit) : input, Env, executionCtx);\n    }\n    input = input.toString();\n    return this.fetch(\n      new Request(\n        /^https?:\\/\\//.test(input) ? input : `http://localhost${mergePath(\"/\", input)}`,\n        requestInit\n      ),\n      Env,\n      executionCtx\n    );\n  };\n  /**\n   * `.fire()` automatically adds a global fetch event listener.\n   * This can be useful for environments that adhere to the Service Worker API, such as non-ES module Cloudflare Workers.\n   * @deprecated\n   * Use `fire` from `hono/service-worker` instead.\n   * ```ts\n   * import { Hono } from 'hono'\n   * import { fire } from 'hono/service-worker'\n   *\n   * const app = new Hono()\n   * // ...\n   * fire(app)\n   * ```\n   * @see https://hono.dev/docs/api/hono#fire\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API\n   * @see https://developers.cloudflare.com/workers/reference/migrate-to-module-workers/\n   */\n  fire = () => {\n    addEventListener(\"fetch\", (event) => {\n      event.respondWith(this.#dispatch(event.request, event, void 0, event.request.method));\n    });\n  };\n};\nexport {\n  Hono as HonoBase\n};\n", "// src/router/reg-exp-router/matcher.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nvar emptyParam = [];\nfunction match(method, path) {\n  const matchers = this.buildAllMatchers();\n  const match2 = ((method2, path2) => {\n    const matcher = matchers[method2] || matchers[METHOD_NAME_ALL];\n    const staticMatch = matcher[2][path2];\n    if (staticMatch) {\n      return staticMatch;\n    }\n    const match3 = path2.match(matcher[0]);\n    if (!match3) {\n      return [[], emptyParam];\n    }\n    const index = match3.indexOf(\"\", 1);\n    return [matcher[1][index], match3];\n  });\n  this.match = match2;\n  return match2(method, path);\n}\nexport {\n  emptyParam,\n  match\n};\n", "// src/router/reg-exp-router/node.ts\nvar LABEL_REG_EXP_STR = \"[^/]+\";\nvar ONLY_WILDCARD_REG_EXP_STR = \".*\";\nvar TAIL_WILDCARD_REG_EXP_STR = \"(?:|/.*)\";\nvar PATH_ERROR = /* @__PURE__ */ Symbol();\nvar regExpMetaChars = new Set(\".\\\\+*[^]$()\");\nfunction compareKey(a, b) {\n  if (a.length === 1) {\n    return b.length === 1 ? a < b ? -1 : 1 : -1;\n  }\n  if (b.length === 1) {\n    return 1;\n  }\n  if (a === ONLY_WILDCARD_REG_EXP_STR || a === TAIL_WILDCARD_REG_EXP_STR) {\n    return 1;\n  } else if (b === ONLY_WILDCARD_REG_EXP_STR || b === TAIL_WILDCARD_REG_EXP_STR) {\n    return -1;\n  }\n  if (a === LABEL_REG_EXP_STR) {\n    return 1;\n  } else if (b === LABEL_REG_EXP_STR) {\n    return -1;\n  }\n  return a.length === b.length ? a < b ? -1 : 1 : b.length - a.length;\n}\nvar Node = class _Node {\n  #index;\n  #varIndex;\n  #children = /* @__PURE__ */ Object.create(null);\n  insert(tokens, index, paramMap, context, pathErrorCheckOnly) {\n    if (tokens.length === 0) {\n      if (this.#index !== void 0) {\n        throw PATH_ERROR;\n      }\n      if (pathErrorCheckOnly) {\n        return;\n      }\n      this.#index = index;\n      return;\n    }\n    const [token, ...restTokens] = tokens;\n    const pattern = token === \"*\" ? restTokens.length === 0 ? [\"\", \"\", ONLY_WILDCARD_REG_EXP_STR] : [\"\", \"\", LABEL_REG_EXP_STR] : token === \"/*\" ? [\"\", \"\", TAIL_WILDCARD_REG_EXP_STR] : token.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n    let node;\n    if (pattern) {\n      const name = pattern[1];\n      let regexpStr = pattern[2] || LABEL_REG_EXP_STR;\n      if (name && pattern[2]) {\n        if (regexpStr === \".*\") {\n          throw PATH_ERROR;\n        }\n        regexpStr = regexpStr.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/, \"(?:\");\n        if (/\\((?!\\?:)/.test(regexpStr)) {\n          throw PATH_ERROR;\n        }\n      }\n      node = this.#children[regexpStr];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[regexpStr] = new _Node();\n        if (name !== \"\") {\n          node.#varIndex = context.varIndex++;\n        }\n      }\n      if (!pathErrorCheckOnly && name !== \"\") {\n        paramMap.push([name, node.#varIndex]);\n      }\n    } else {\n      node = this.#children[token];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k.length > 1 && k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[token] = new _Node();\n      }\n    }\n    node.insert(restTokens, index, paramMap, context, pathErrorCheckOnly);\n  }\n  buildRegExpStr() {\n    const childKeys = Object.keys(this.#children).sort(compareKey);\n    const strList = childKeys.map((k) => {\n      const c = this.#children[k];\n      return (typeof c.#varIndex === \"number\" ? `(${k})@${c.#varIndex}` : regExpMetaChars.has(k) ? `\\\\${k}` : k) + c.buildRegExpStr();\n    });\n    if (typeof this.#index === \"number\") {\n      strList.unshift(`#${this.#index}`);\n    }\n    if (strList.length === 0) {\n      return \"\";\n    }\n    if (strList.length === 1) {\n      return strList[0];\n    }\n    return \"(?:\" + strList.join(\"|\") + \")\";\n  }\n};\nexport {\n  Node,\n  PATH_ERROR\n};\n", "// src/router/reg-exp-router/trie.ts\nimport { Node } from \"./node.js\";\nvar Trie = class {\n  #context = { varIndex: 0 };\n  #root = new Node();\n  insert(path, index, pathErrorCheckOnly) {\n    const paramAssoc = [];\n    const groups = [];\n    for (let i = 0; ; ) {\n      let replaced = false;\n      path = path.replace(/\\{[^}]+\\}/g, (m) => {\n        const mark = `@\\\\${i}`;\n        groups[i] = [mark, m];\n        i++;\n        replaced = true;\n        return mark;\n      });\n      if (!replaced) {\n        break;\n      }\n    }\n    const tokens = path.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g) || [];\n    for (let i = groups.length - 1; i >= 0; i--) {\n      const [mark] = groups[i];\n      for (let j = tokens.length - 1; j >= 0; j--) {\n        if (tokens[j].indexOf(mark) !== -1) {\n          tokens[j] = tokens[j].replace(mark, groups[i][1]);\n          break;\n        }\n      }\n    }\n    this.#root.insert(tokens, index, paramAssoc, this.#context, pathErrorCheckOnly);\n    return paramAssoc;\n  }\n  buildRegExp() {\n    let regexp = this.#root.buildRegExpStr();\n    if (regexp === \"\") {\n      return [/^$/, [], []];\n    }\n    let captureIndex = 0;\n    const indexReplacementMap = [];\n    const paramReplacementMap = [];\n    regexp = regexp.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g, (_, handlerIndex, paramIndex) => {\n      if (handlerIndex !== void 0) {\n        indexReplacementMap[++captureIndex] = Number(handlerIndex);\n        return \"$()\";\n      }\n      if (paramIndex !== void 0) {\n        paramReplacementMap[Number(paramIndex)] = ++captureIndex;\n        return \"\";\n      }\n      return \"\";\n    });\n    return [new RegExp(`^${regexp}`), indexReplacementMap, paramReplacementMap];\n  }\n};\nexport {\n  Trie\n};\n", "// src/router/reg-exp-router/router.ts\nimport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHOD_NAME_ALL,\n  UnsupportedPathError\n} from \"../../router.js\";\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { PATH_ERROR } from \"./node.js\";\nimport { Trie } from \"./trie.js\";\nvar nullMatcher = [/^$/, [], /* @__PURE__ */ Object.create(null)];\nvar wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\nfunction buildWildcardRegExp(path) {\n  return wildcardRegExpCache[path] ??= new RegExp(\n    path === \"*\" ? \"\" : `^${path.replace(\n      /\\/\\*$|([.\\\\+*[^\\]$()])/g,\n      (_, metaChar) => metaChar ? `\\\\${metaChar}` : \"(?:|/.*)\"\n    )}$`\n  );\n}\nfunction clearWildcardRegExpCache() {\n  wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\n}\nfunction buildMatcherFromPreprocessedRoutes(routes) {\n  const trie = new Trie();\n  const handlerData = [];\n  if (routes.length === 0) {\n    return nullMatcher;\n  }\n  const routesWithStaticPathFlag = routes.map(\n    (route) => [!/\\*|\\/:/.test(route[0]), ...route]\n  ).sort(\n    ([isStaticA, pathA], [isStaticB, pathB]) => isStaticA ? 1 : isStaticB ? -1 : pathA.length - pathB.length\n  );\n  const staticMap = /* @__PURE__ */ Object.create(null);\n  for (let i = 0, j = -1, len = routesWithStaticPathFlag.length; i < len; i++) {\n    const [pathErrorCheckOnly, path, handlers] = routesWithStaticPathFlag[i];\n    if (pathErrorCheckOnly) {\n      staticMap[path] = [handlers.map(([h]) => [h, /* @__PURE__ */ Object.create(null)]), emptyParam];\n    } else {\n      j++;\n    }\n    let paramAssoc;\n    try {\n      paramAssoc = trie.insert(path, j, pathErrorCheckOnly);\n    } catch (e) {\n      throw e === PATH_ERROR ? new UnsupportedPathError(path) : e;\n    }\n    if (pathErrorCheckOnly) {\n      continue;\n    }\n    handlerData[j] = handlers.map(([h, paramCount]) => {\n      const paramIndexMap = /* @__PURE__ */ Object.create(null);\n      paramCount -= 1;\n      for (; paramCount >= 0; paramCount--) {\n        const [key, value] = paramAssoc[paramCount];\n        paramIndexMap[key] = value;\n      }\n      return [h, paramIndexMap];\n    });\n  }\n  const [regexp, indexReplacementMap, paramReplacementMap] = trie.buildRegExp();\n  for (let i = 0, len = handlerData.length; i < len; i++) {\n    for (let j = 0, len2 = handlerData[i].length; j < len2; j++) {\n      const map = handlerData[i][j]?.[1];\n      if (!map) {\n        continue;\n      }\n      const keys = Object.keys(map);\n      for (let k = 0, len3 = keys.length; k < len3; k++) {\n        map[keys[k]] = paramReplacementMap[map[keys[k]]];\n      }\n    }\n  }\n  const handlerMap = [];\n  for (const i in indexReplacementMap) {\n    handlerMap[i] = handlerData[indexReplacementMap[i]];\n  }\n  return [regexp, handlerMap, staticMap];\n}\nfunction findMiddleware(middleware, path) {\n  if (!middleware) {\n    return void 0;\n  }\n  for (const k of Object.keys(middleware).sort((a, b) => b.length - a.length)) {\n    if (buildWildcardRegExp(k).test(path)) {\n      return [...middleware[k]];\n    }\n  }\n  return void 0;\n}\nvar RegExpRouter = class {\n  name = \"RegExpRouter\";\n  #middleware;\n  #routes;\n  constructor() {\n    this.#middleware = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n    this.#routes = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n  }\n  add(method, path, handler) {\n    const middleware = this.#middleware;\n    const routes = this.#routes;\n    if (!middleware || !routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    if (!middleware[method]) {\n      ;\n      [middleware, routes].forEach((handlerMap) => {\n        handlerMap[method] = /* @__PURE__ */ Object.create(null);\n        Object.keys(handlerMap[METHOD_NAME_ALL]).forEach((p) => {\n          handlerMap[method][p] = [...handlerMap[METHOD_NAME_ALL][p]];\n        });\n      });\n    }\n    if (path === \"/*\") {\n      path = \"*\";\n    }\n    const paramCount = (path.match(/\\/:/g) || []).length;\n    if (/\\*$/.test(path)) {\n      const re = buildWildcardRegExp(path);\n      if (method === METHOD_NAME_ALL) {\n        Object.keys(middleware).forEach((m) => {\n          middleware[m][path] ||= findMiddleware(middleware[m], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n        });\n      } else {\n        middleware[method][path] ||= findMiddleware(middleware[method], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n      }\n      Object.keys(middleware).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(middleware[m]).forEach((p) => {\n            re.test(p) && middleware[m][p].push([handler, paramCount]);\n          });\n        }\n      });\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(routes[m]).forEach(\n            (p) => re.test(p) && routes[m][p].push([handler, paramCount])\n          );\n        }\n      });\n      return;\n    }\n    const paths = checkOptionalParameter(path) || [path];\n    for (let i = 0, len = paths.length; i < len; i++) {\n      const path2 = paths[i];\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          routes[m][path2] ||= [\n            ...findMiddleware(middleware[m], path2) || findMiddleware(middleware[METHOD_NAME_ALL], path2) || []\n          ];\n          routes[m][path2].push([handler, paramCount - len + i + 1]);\n        }\n      });\n    }\n  }\n  match = match;\n  buildAllMatchers() {\n    const matchers = /* @__PURE__ */ Object.create(null);\n    Object.keys(this.#routes).concat(Object.keys(this.#middleware)).forEach((method) => {\n      matchers[method] ||= this.#buildMatcher(method);\n    });\n    this.#middleware = this.#routes = void 0;\n    clearWildcardRegExpCache();\n    return matchers;\n  }\n  #buildMatcher(method) {\n    const routes = [];\n    let hasOwnRoute = method === METHOD_NAME_ALL;\n    [this.#middleware, this.#routes].forEach((r) => {\n      const ownRoute = r[method] ? Object.keys(r[method]).map((path) => [path, r[method][path]]) : [];\n      if (ownRoute.length !== 0) {\n        hasOwnRoute ||= true;\n        routes.push(...ownRoute);\n      } else if (method !== METHOD_NAME_ALL) {\n        routes.push(\n          ...Object.keys(r[METHOD_NAME_ALL]).map((path) => [path, r[METHOD_NAME_ALL][path]])\n        );\n      }\n    });\n    if (!hasOwnRoute) {\n      return null;\n    } else {\n      return buildMatcherFromPreprocessedRoutes(routes);\n    }\n  }\n};\nexport {\n  RegExpRouter\n};\n", "// src/router/reg-exp-router/prepared-router.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { RegExpRouter } from \"./router.js\";\nvar PreparedRegExpRouter = class {\n  name = \"PreparedRegExpRouter\";\n  #matchers;\n  #relocateMap;\n  constructor(matchers, relocateMap) {\n    this.#matchers = matchers;\n    this.#relocateMap = relocateMap;\n  }\n  #addWildcard(method, handlerData) {\n    const matcher = this.#matchers[method];\n    matcher[1].forEach((list) => list && list.push(handlerData));\n    Object.values(matcher[2]).forEach((list) => list[0].push(handlerData));\n  }\n  #addPath(method, path, handler, indexes, map) {\n    const matcher = this.#matchers[method];\n    if (!map) {\n      matcher[2][path][0].push([handler, {}]);\n    } else {\n      indexes.forEach((index) => {\n        if (typeof index === \"number\") {\n          matcher[1][index].push([handler, map]);\n        } else {\n          ;\n          matcher[2][index || path][0].push([handler, map]);\n        }\n      });\n    }\n  }\n  add(method, path, handler) {\n    if (!this.#matchers[method]) {\n      const all = this.#matchers[METHOD_NAME_ALL];\n      const staticMap = {};\n      for (const key in all[2]) {\n        staticMap[key] = [all[2][key][0].slice(), emptyParam];\n      }\n      this.#matchers[method] = [\n        all[0],\n        all[1].map((list) => Array.isArray(list) ? list.slice() : 0),\n        staticMap\n      ];\n    }\n    if (path === \"/*\" || path === \"*\") {\n      const handlerData = [handler, {}];\n      if (method === METHOD_NAME_ALL) {\n        for (const m in this.#matchers) {\n          this.#addWildcard(m, handlerData);\n        }\n      } else {\n        this.#addWildcard(method, handlerData);\n      }\n      return;\n    }\n    const data = this.#relocateMap[path];\n    if (!data) {\n      throw new Error(`Path ${path} is not registered`);\n    }\n    for (const [indexes, map] of data) {\n      if (method === METHOD_NAME_ALL) {\n        for (const m in this.#matchers) {\n          this.#addPath(m, path, handler, indexes, map);\n        }\n      } else {\n        this.#addPath(method, path, handler, indexes, map);\n      }\n    }\n  }\n  buildAllMatchers() {\n    return this.#matchers;\n  }\n  match = match;\n};\nvar buildInitParams = ({ paths }) => {\n  const RegExpRouterWithMatcherExport = class extends RegExpRouter {\n    buildAndExportAllMatchers() {\n      return this.buildAllMatchers();\n    }\n  };\n  const router = new RegExpRouterWithMatcherExport();\n  for (const path of paths) {\n    router.add(METHOD_NAME_ALL, path, path);\n  }\n  const matchers = router.buildAndExportAllMatchers();\n  const all = matchers[METHOD_NAME_ALL];\n  const relocateMap = {};\n  for (const path of paths) {\n    if (path === \"/*\" || path === \"*\") {\n      continue;\n    }\n    all[1].forEach((list, i) => {\n      list.forEach(([p, map]) => {\n        if (p === path) {\n          if (relocateMap[path]) {\n            relocateMap[path][0][1] = {\n              ...relocateMap[path][0][1],\n              ...map\n            };\n          } else {\n            relocateMap[path] = [[[], map]];\n          }\n          if (relocateMap[path][0][0].findIndex((j) => j === i) === -1) {\n            relocateMap[path][0][0].push(i);\n          }\n        }\n      });\n    });\n    for (const path2 in all[2]) {\n      all[2][path2][0].forEach(([p]) => {\n        if (p === path) {\n          relocateMap[path] ||= [[[]]];\n          const value = path2 === path ? \"\" : path2;\n          if (relocateMap[path][0][0].findIndex((v) => v === value) === -1) {\n            relocateMap[path][0][0].push(value);\n          }\n        }\n      });\n    }\n  }\n  for (let i = 0, len = all[1].length; i < len; i++) {\n    all[1][i] = all[1][i] ? [] : 0;\n  }\n  for (const path in all[2]) {\n    all[2][path][0] = [];\n  }\n  return [matchers, relocateMap];\n};\nvar serializeInitParams = ([matchers, relocateMap]) => {\n  const matchersStr = JSON.stringify(\n    matchers,\n    (_, value) => value instanceof RegExp ? `##${value.toString()}##` : value\n  ).replace(/\"##(.+?)##\"/g, (_, str) => str.replace(/\\\\\\\\/g, \"\\\\\"));\n  const relocateMapStr = JSON.stringify(relocateMap);\n  return `[${matchersStr},${relocateMapStr}]`;\n};\nexport {\n  PreparedRegExpRouter,\n  buildInitParams,\n  serializeInitParams\n};\n", "// src/router/reg-exp-router/index.ts\nimport { RegExpRouter } from \"./router.js\";\nimport { PreparedRegExpRouter, buildInitParams, serializeInitParams } from \"./prepared-router.js\";\nexport {\n  PreparedRegExpRouter,\n  RegExpRouter,\n  buildInitParams,\n  serializeInitParams\n};\n", "// src/router/smart-router/router.ts\nimport { MESSAGE_MATCHER_IS_ALREADY_BUILT, UnsupportedPathError } from \"../../router.js\";\nvar SmartRouter = class {\n  name = \"SmartRouter\";\n  #routers = [];\n  #routes = [];\n  constructor(init) {\n    this.#routers = init.routers;\n  }\n  add(method, path, handler) {\n    if (!this.#routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    this.#routes.push([method, path, handler]);\n  }\n  match(method, path) {\n    if (!this.#routes) {\n      throw new Error(\"Fatal error\");\n    }\n    const routers = this.#routers;\n    const routes = this.#routes;\n    const len = routers.length;\n    let i = 0;\n    let res;\n    for (; i < len; i++) {\n      const router = routers[i];\n      try {\n        for (let i2 = 0, len2 = routes.length; i2 < len2; i2++) {\n          router.add(...routes[i2]);\n        }\n        res = router.match(method, path);\n      } catch (e) {\n        if (e instanceof UnsupportedPathError) {\n          continue;\n        }\n        throw e;\n      }\n      this.match = router.match.bind(router);\n      this.#routers = [router];\n      this.#routes = void 0;\n      break;\n    }\n    if (i === len) {\n      throw new Error(\"Fatal error\");\n    }\n    this.name = `SmartRouter + ${this.activeRouter.name}`;\n    return res;\n  }\n  get activeRouter() {\n    if (this.#routes || this.#routers.length !== 1) {\n      throw new Error(\"No active router has been determined yet.\");\n    }\n    return this.#routers[0];\n  }\n};\nexport {\n  SmartRouter\n};\n", "// src/router/smart-router/index.ts\nimport { SmartRouter } from \"./router.js\";\nexport {\n  SmartRouter\n};\n", "// src/router/trie-router/node.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { getPattern, splitPath, splitRoutingPath } from \"../../utils/url.js\";\nvar emptyParams = /* @__PURE__ */ Object.create(null);\nvar Node = class _Node {\n  #methods;\n  #children;\n  #patterns;\n  #order = 0;\n  #params = emptyParams;\n  constructor(method, handler, children) {\n    this.#children = children || /* @__PURE__ */ Object.create(null);\n    this.#methods = [];\n    if (method && handler) {\n      const m = /* @__PURE__ */ Object.create(null);\n      m[method] = { handler, possibleKeys: [], score: 0 };\n      this.#methods = [m];\n    }\n    this.#patterns = [];\n  }\n  insert(method, path, handler) {\n    this.#order = ++this.#order;\n    let curNode = this;\n    const parts = splitRoutingPath(path);\n    const possibleKeys = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const p = parts[i];\n      const nextP = parts[i + 1];\n      const pattern = getPattern(p, nextP);\n      const key = Array.isArray(pattern) ? pattern[0] : p;\n      if (key in curNode.#children) {\n        curNode = curNode.#children[key];\n        if (pattern) {\n          possibleKeys.push(pattern[1]);\n        }\n        continue;\n      }\n      curNode.#children[key] = new _Node();\n      if (pattern) {\n        curNode.#patterns.push(pattern);\n        possibleKeys.push(pattern[1]);\n      }\n      curNode = curNode.#children[key];\n    }\n    curNode.#methods.push({\n      [method]: {\n        handler,\n        possibleKeys: possibleKeys.filter((v, i, a) => a.indexOf(v) === i),\n        score: this.#order\n      }\n    });\n    return curNode;\n  }\n  #getHandlerSets(node, method, nodeParams, params) {\n    const handlerSets = [];\n    for (let i = 0, len = node.#methods.length; i < len; i++) {\n      const m = node.#methods[i];\n      const handlerSet = m[method] || m[METHOD_NAME_ALL];\n      const processedSet = {};\n      if (handlerSet !== void 0) {\n        handlerSet.params = /* @__PURE__ */ Object.create(null);\n        handlerSets.push(handlerSet);\n        if (nodeParams !== emptyParams || params && params !== emptyParams) {\n          for (let i2 = 0, len2 = handlerSet.possibleKeys.length; i2 < len2; i2++) {\n            const key = handlerSet.possibleKeys[i2];\n            const processed = processedSet[handlerSet.score];\n            handlerSet.params[key] = params?.[key] && !processed ? params[key] : nodeParams[key] ?? params?.[key];\n            processedSet[handlerSet.score] = true;\n          }\n        }\n      }\n    }\n    return handlerSets;\n  }\n  search(method, path) {\n    const handlerSets = [];\n    this.#params = emptyParams;\n    const curNode = this;\n    let curNodes = [curNode];\n    const parts = splitPath(path);\n    const curNodesQueue = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const part = parts[i];\n      const isLast = i === len - 1;\n      const tempNodes = [];\n      for (let j = 0, len2 = curNodes.length; j < len2; j++) {\n        const node = curNodes[j];\n        const nextNode = node.#children[part];\n        if (nextNode) {\n          nextNode.#params = node.#params;\n          if (isLast) {\n            if (nextNode.#children[\"*\"]) {\n              handlerSets.push(\n                ...this.#getHandlerSets(nextNode.#children[\"*\"], method, node.#params)\n              );\n            }\n            handlerSets.push(...this.#getHandlerSets(nextNode, method, node.#params));\n          } else {\n            tempNodes.push(nextNode);\n          }\n        }\n        for (let k = 0, len3 = node.#patterns.length; k < len3; k++) {\n          const pattern = node.#patterns[k];\n          const params = node.#params === emptyParams ? {} : { ...node.#params };\n          if (pattern === \"*\") {\n            const astNode = node.#children[\"*\"];\n            if (astNode) {\n              handlerSets.push(...this.#getHandlerSets(astNode, method, node.#params));\n              astNode.#params = params;\n              tempNodes.push(astNode);\n            }\n            continue;\n          }\n          const [key, name, matcher] = pattern;\n          if (!part && !(matcher instanceof RegExp)) {\n            continue;\n          }\n          const child = node.#children[key];\n          const restPathString = parts.slice(i).join(\"/\");\n          if (matcher instanceof RegExp) {\n            const m = matcher.exec(restPathString);\n            if (m) {\n              params[name] = m[0];\n              handlerSets.push(...this.#getHandlerSets(child, method, node.#params, params));\n              if (Object.keys(child.#children).length) {\n                child.#params = params;\n                const componentCount = m[0].match(/\\//)?.length ?? 0;\n                const targetCurNodes = curNodesQueue[componentCount] ||= [];\n                targetCurNodes.push(child);\n              }\n              continue;\n            }\n          }\n          if (matcher === true || matcher.test(part)) {\n            params[name] = part;\n            if (isLast) {\n              handlerSets.push(...this.#getHandlerSets(child, method, params, node.#params));\n              if (child.#children[\"*\"]) {\n                handlerSets.push(\n                  ...this.#getHandlerSets(child.#children[\"*\"], method, params, node.#params)\n                );\n              }\n            } else {\n              child.#params = params;\n              tempNodes.push(child);\n            }\n          }\n        }\n      }\n      curNodes = tempNodes.concat(curNodesQueue.shift() ?? []);\n    }\n    if (handlerSets.length > 1) {\n      handlerSets.sort((a, b) => {\n        return a.score - b.score;\n      });\n    }\n    return [handlerSets.map(({ handler, params }) => [handler, params])];\n  }\n};\nexport {\n  Node\n};\n", "// src/router/trie-router/router.ts\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { Node } from \"./node.js\";\nvar TrieRouter = class {\n  name = \"TrieRouter\";\n  #node;\n  constructor() {\n    this.#node = new Node();\n  }\n  add(method, path, handler) {\n    const results = checkOptionalParameter(path);\n    if (results) {\n      for (let i = 0, len = results.length; i < len; i++) {\n        this.#node.insert(method, results[i], handler);\n      }\n      return;\n    }\n    this.#node.insert(method, path, handler);\n  }\n  match(method, path) {\n    return this.#node.search(method, path);\n  }\n};\nexport {\n  TrieRouter\n};\n", "// src/router/trie-router/index.ts\nimport { TrieRouter } from \"./router.js\";\nexport {\n  TrieRouter\n};\n", "// src/hono.ts\nimport { HonoBase } from \"./hono-base.js\";\nimport { RegExpRouter } from \"./router/reg-exp-router/index.js\";\nimport { SmartRouter } from \"./router/smart-router/index.js\";\nimport { TrieRouter } from \"./router/trie-router/index.js\";\nvar Hono = class extends HonoBase {\n  /**\n   * Creates an instance of the Hono class.\n   *\n   * @param options - Optional configuration options for the Hono instance.\n   */\n  constructor(options = {}) {\n    super(options);\n    this.router = options.router ?? new SmartRouter({\n      routers: [new RegExpRouter(), new TrieRouter()]\n    });\n  }\n};\nexport {\n  Hono\n};\n", "// src/index.ts\nimport { Hono } from \"./hono.js\";\nexport {\n  Hono\n};\n", "import type { Hono } from 'hono';\r\n\r\n// ============================================================================\r\n// MODULE REGISTRY TYPES\r\n// ============================================================================\r\n\r\n/**\r\n * Configuration for a pluggable module\r\n */\r\nexport interface ModuleConfig {\r\n    /** Unique module identifier (e.g., 'auth', 'users', 'cms') */\r\n    id: string;\r\n\r\n    /** Human-readable display name */\r\n    name: string;\r\n\r\n    /** Semantic version string */\r\n    version: string;\r\n\r\n    /** Optional description */\r\n    description?: string;\r\n\r\n    /** Whether this is a core/foundation module */\r\n    isCore: boolean;\r\n\r\n    /** Database tables associated with this module */\r\n    tables?: string[];\r\n\r\n    /** Whether this is infrastructure (not shown in modules marketplace) */\r\n    isInfrastructure?: boolean;\r\n\r\n    /** Module category */\r\n    category: 'core' | 'features' | 'integrations';\r\n\r\n    /** List of feature names */\r\n    features: string[];\r\n\r\n    /** Searchable tags */\r\n    tags: string[];\r\n\r\n    /** Register Hono routes for this module */\r\n    routes: (app: Hono<any>) => void;\r\n\r\n    /** Static list of API routes for documentation/UI */\r\n    apiRoutes?: ModuleApiRoute[];\r\n\r\n    /** Static list of frontend routes for documentation/UI */\r\n    frontendRoutes?: ModuleRoute[];\r\n\r\n    /** Static list of admin routes for documentation/UI */\r\n    adminRoutes?: ModuleRoute[];\r\n\r\n    /** Admin sidebar menu configuration */\r\n    menu: ModuleMenuItem;\r\n\r\n    /** Module availability rules */\r\n    availability: ModuleAvailability;\r\n\r\n    /** Permissions this module provides */\r\n    permissions: string[];\r\n\r\n    /** Permission required to access this module */\r\n    requiredPermission?: string;\r\n\r\n    /** Other modules this depends on (loaded first) */\r\n    dependencies?: string[];\r\n\r\n    /** Settings section to auto-register */\r\n    settings?: SettingSection;\r\n\r\n    // Breeze Lifecycle Hooks\r\n    onProvision?: (tenantId: string, db: any) => Promise<void>;\r\n    onEnable?: (tenantId: string, db: any) => Promise<void>;\r\n    onDisable?: (tenantId: string, db: any) => Promise<void>;\r\n    onDeprovision?: (tenantId: string, db: any) => Promise<void>;\r\n}\r\n\r\n/**\r\n * Module availability configuration\r\n */\r\nexport interface ModuleAvailability {\r\n    /** Only visible to platform super admins */\r\n    requiresPlatformAdmin?: boolean;\r\n\r\n    /** Can tenants enable/disable this module? */\r\n    availableForTenants?: boolean;\r\n\r\n    /** Enabled by default for new tenants */\r\n    defaultEnabled?: boolean;\r\n\r\n    /** Requires enterprise plan */\r\n    enterpriseOnly?: boolean;\r\n}\r\n\r\n/**\r\n * Sidebar menu item configuration\r\n */\r\nexport interface ModuleMenuItem {\r\n    /** Display label */\r\n    label: string;\r\n\r\n    /** Lucide icon name */\r\n    icon: string;\r\n\r\n    /** Route path (e.g., '/hpanel/users') */\r\n    href: string;\r\n\r\n    /** Menu order (lower = higher up) */\r\n    order: number;\r\n\r\n    /** Optional badge configuration */\r\n    badge?: ModuleBadge;\r\n\r\n    /** Submenu items */\r\n    children?: ModuleMenuItem[];\r\n}\r\n\r\n/**\r\n * Badge configuration for menu items\r\n */\r\nexport interface ModuleBadge {\r\n    type: 'count' | 'status' | 'new';\r\n    getValue?: () => Promise<number | string | undefined>;\r\n}\r\n\r\n/**\r\n * Frontend route configuration\r\n */\r\nexport interface ModuleRoute {\r\n    /** Route path */\r\n    path: string;\r\n\r\n    /** Component path for lazy loading */\r\n    component: string;\r\n\r\n    /** Permission required for this route */\r\n    requiredPermission?: string;\r\n\r\n    /** Exact match only */\r\n    exact?: boolean;\r\n}\r\n\r\n/**\r\n * API route configuration for documentation\r\n */\r\nexport interface ModuleApiRoute {\r\n    /** HTTP Method */\r\n    method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\r\n\r\n    /** Route path (e.g. /api/v1/users) */\r\n    path: string;\r\n\r\n    /** Description of what this route does */\r\n    description: string;\r\n\r\n    /** Permission required to access */\r\n    requiredPermission?: string;\r\n}\r\n\r\n/**\r\n * Module status in database\r\n */\r\nexport interface ModuleStatus {\r\n    moduleId: string;\r\n    tenantId: string;\r\n    enabled: boolean;\r\n    enabledAt?: Date;\r\n    enabledBy?: string;\r\n    settings?: Record<string, any>;\r\n}\r\n\r\n// ============================================================================\r\n// SETTINGS REGISTRY TYPES\r\n// ============================================================================\r\n\r\n/**\r\n * Settings section registered by a module\r\n */\r\nexport interface SettingSection {\r\n    /** Unique section identifier */\r\n    id: string;\r\n\r\n    /** Display label */\r\n    label: string;\r\n\r\n    /** Lucide icon name */\r\n    icon: string;\r\n\r\n    /** Display order */\r\n    order: number;\r\n\r\n    /** Permission required to view/edit */\r\n    requiredPermission?: string;\r\n\r\n    /** Roles that can access this section */\r\n    requiredRoles?: string[];\r\n\r\n    /** Available for tenant admins (false = platform only) */\r\n    availableForTenants?: boolean;\r\n\r\n    /** Settings fields in this section */\r\n    fields: SettingField[];\r\n}\r\n\r\n/**\r\n * Individual setting field definition\r\n */\r\nexport interface SettingField {\r\n    /** Unique key (e.g., 'auth.passwordMinLength') */\r\n    key: string;\r\n\r\n    /** Display label */\r\n    label: string;\r\n\r\n    /** Field type */\r\n    type: 'text' | 'number' | 'boolean' | 'select' | 'color' | 'file' | 'json' | 'textarea' | 'button' | 'action' | 'filterConfig';\r\n\r\n    /** Help text */\r\n    description?: string;\r\n\r\n    /** Default value */\r\n    defaultValue: any;\r\n\r\n    /** Options for select fields */\r\n    options?: Array<{ label: string; value: any }>;\r\n\r\n    /** Scope where this setting applies */\r\n    scope: 'platform' | 'tenant' | 'user';\r\n\r\n    /** Mask in UI and encrypt in DB */\r\n    sensitive?: boolean;\r\n\r\n    /** Group for organizing settings in UI (e.g., 'Admin UI', 'Table Columns', 'Defaults') */\r\n    group?: string;\r\n\r\n    /** Action endpoint for button/action types */\r\n    actionUrl?: string;\r\n\r\n    /** HTTP method for the action (defaults to POST) */\r\n    actionMethod?: string;\r\n\r\n    /** Label for the action button */\r\n    actionLabel?: string;\r\n}\r\n\r\n/**\r\n * Context for settings resolution\r\n */\r\nexport interface SettingsContext {\r\n    userId?: string;\r\n    tenantId?: string;\r\n    isSuperAdmin?: boolean;\r\n}\r\n\r\n// ============================================================================\r\n// EVENT BUS TYPES\r\n// ============================================================================\r\n\r\n/**\r\n * Event payload for module events\r\n */\r\nexport interface ModuleEvent {\r\n    moduleId: string;\r\n    tenantId?: string;\r\n    timestamp: Date;\r\n    payload?: any;\r\n}\r\n\r\n/**\r\n * Event handler function\r\n */\r\nexport type EventHandler = (event: ModuleEvent) => void | Promise<void>;\r\n\r\n// ============================================================================\r\n// API ROUTE CONSTANTS\r\n// ============================================================================\r\n\r\n/**\r\n * Standardized API route prefixes for stability\r\n */\r\nexport const API_ROUTES = {\r\n    // Versioned API base\r\n    BASE: '/api/v1',\r\n\r\n    // Auth module routes\r\n    AUTH: {\r\n        BASE: '/api/v1/auth',\r\n        LOGIN: '/api/v1/auth/login',\r\n        LOGOUT: '/api/v1/auth/logout',\r\n        LOGOUT_ALL: '/api/v1/auth/logout-all',\r\n        REFRESH: '/api/v1/auth/refresh',\r\n        REGISTER: '/api/v1/auth/register',\r\n        FORGOT_PASSWORD: '/api/v1/auth/forgot-password',\r\n        RESET_PASSWORD: '/api/v1/auth/reset-password',\r\n        CHANGE_PASSWORD: '/api/v1/auth/change-password',\r\n        SESSIONS: '/api/v1/auth/sessions',\r\n        ME: '/api/v1/auth/me',\r\n        LOGIN_HISTORY: '/api/v1/auth/login-history',\r\n    },\r\n\r\n    // Users module routes\r\n    USERS: {\r\n        BASE: '/api/v1/users',\r\n        ROLES: '/api/v1/roles',\r\n        PERMISSIONS: '/api/v1/permissions',\r\n        INVITATIONS: '/api/v1/invitations',\r\n    },\r\n\r\n    // Tenants module routes\r\n    TENANTS: {\r\n        BASE: '/api/v1/tenants',\r\n        DOMAINS: '/api/v1/tenants/domains',\r\n        USAGE: '/api/v1/tenants/usage',\r\n        MODULES: '/api/v1/tenants/modules',\r\n    },\r\n\r\n    // Settings routes\r\n    SETTINGS: {\r\n        BASE: '/api/v1/settings',\r\n        SECTIONS: '/api/v1/settings/sections',\r\n    },\r\n\r\n    // Module management routes\r\n    MODULES: {\r\n        BASE: '/api/v1/modules',\r\n        MENU: '/api/v1/modules/menu',\r\n        STATUS: '/api/v1/modules/status',\r\n    },\r\n\r\n    // Resolver route\r\n    RESOLVER: {\r\n        BASE: '/api/v1/resolver',\r\n        RESOLVE_TENANT: '/api/v1/resolver/resolve-tenant',\r\n    },\r\n} as const;\r\n\r\n/**\r\n * Admin panel route prefixes\r\n */\r\nexport const ADMIN_ROUTES = {\r\n    BASE: '/hpanel',\r\n    DASHBOARD: '/hpanel',\r\n    USERS: '/hpanel/users',\r\n    TENANTS: '/hpanel/tenants',\r\n    SETTINGS: '/hpanel/settings',\r\n    SECURITY: '/hpanel/security',\r\n} as const;\r\n", "import type { SettingSection, SettingField, SettingsContext } from './types';\r\n\r\n/**\r\n * Central registry for settings sections.\r\n * Modules register their settings sections on import.\r\n * \r\n * Settings Resolution Order:\r\n * User Settings > Tenant Settings > Platform Settings > Default Value\r\n */\r\nclass SettingsRegistryClass {\r\n    private sections: Map<string, SettingSection> = new Map();\r\n\r\n    /**\r\n     * Register a settings section\r\n     */\r\n    register(section: SettingSection): void {\r\n        if (this.sections.has(section.id)) {\r\n            console.warn(`Settings section \"${section.id}\" already registered, merging fields.`);\r\n            const existing = this.sections.get(section.id)!;\r\n            existing.fields = [...existing.fields, ...section.fields];\r\n            return;\r\n        }\r\n\r\n        this.sections.set(section.id, section);\r\n        console.log(`\u2713 Settings section registered: ${section.label} (${section.id})`);\r\n    }\r\n\r\n    /**\r\n     * Get all registered sections\r\n     */\r\n    getAll(): SettingSection[] {\r\n        return Array.from(this.sections.values()).sort((a, b) => a.order - b.order);\r\n    }\r\n\r\n    /**\r\n     * Get section by ID\r\n     */\r\n    get(id: string): SettingSection | undefined {\r\n        return this.sections.get(id);\r\n    }\r\n\r\n    /**\r\n     * Get sections available for current context\r\n     */\r\n    getAvailableSections(context: SettingsContext): SettingSection[] {\r\n        return this.getAll().filter(section => {\r\n            // Platform-only sections require super admin\r\n            if (!section.availableForTenants && !context.isSuperAdmin) {\r\n                return false;\r\n            }\r\n\r\n            // Check required roles\r\n            if (section.requiredRoles && section.requiredRoles.length > 0) {\r\n                // Role check would be implemented by calling code\r\n                // This is just the filter interface\r\n            }\r\n\r\n            return true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get all fields grouped by key prefix\r\n     */\r\n    getAllFields(): SettingField[] {\r\n        const fields: SettingField[] = [];\r\n        for (const section of this.getAll()) {\r\n            fields.push(...section.fields);\r\n        }\r\n        return fields;\r\n    }\r\n\r\n    /**\r\n     * Get field definition by key\r\n     */\r\n    getField(key: string): SettingField | undefined {\r\n        for (const section of this.getAll()) {\r\n            const field = section.fields.find(f => f.key === key);\r\n            if (field) return field;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    /**\r\n     * Get default value for a setting key\r\n     */\r\n    getDefaultValue(key: string): any {\r\n        const field = this.getField(key);\r\n        return field?.defaultValue;\r\n    }\r\n\r\n    /**\r\n     * Get all keys for a section\r\n     */\r\n    getKeysForSection(sectionId: string): string[] {\r\n        const section = this.sections.get(sectionId);\r\n        if (!section) return [];\r\n        return section.fields.map(f => f.key);\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nexport const settingsRegistry = new SettingsRegistryClass();\r\n", "import type { ModuleConfig, ModuleMenuItem, ModuleAvailability } from './types';\r\nimport { settingsRegistry } from './SettingsRegistry';\r\n\r\n/**\r\n * Central registry for all modules in the platform.\r\n * Modules register themselves on import via module.config.ts\r\n */\r\nclass ModuleRegistryClass {\r\n    private modules: Map<string, ModuleConfig> = new Map();\r\n    private loadOrder: string[] = [];\r\n\r\n    /**\r\n     * Register a module with the registry\r\n     * @throws Error if module already registered or dependencies missing\r\n     */\r\n    register(config: ModuleConfig): void {\r\n        // Check for duplicate registration\r\n        if (this.modules.has(config.id)) {\r\n            console.warn(`Module ${config.id} is already registered, skipping.`);\r\n            return;\r\n        }\r\n\r\n        // Validate dependencies exist\r\n        if (config.dependencies) {\r\n            for (const dep of config.dependencies) {\r\n                if (!this.modules.has(dep)) {\r\n                    throw new Error(\r\n                        `Module \"${config.id}\" depends on \"${dep}\" which is not registered. ` +\r\n                        `Ensure ${dep} is imported before ${config.id}.`\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n        // Store module\r\n        this.modules.set(config.id, config);\r\n        this.loadOrder.push(config.id);\r\n\r\n        // Auto-register settings if provided\r\n        if (config.settings) {\r\n            settingsRegistry.register(config.settings);\r\n        }\r\n\r\n        console.log(`\u2713 Module registered: ${config.name} (${config.id}) v${config.version}`);\r\n    }\r\n\r\n    /**\r\n     * Get all registered modules\r\n     */\r\n    getAll(): ModuleConfig[] {\r\n        return Array.from(this.modules.values());\r\n    }\r\n\r\n    /**\r\n     * Get module by ID\r\n     */\r\n    get(id: string): ModuleConfig | undefined {\r\n        return this.modules.get(id);\r\n    }\r\n\r\n    /**\r\n     * Get modules in dependency-safe load order\r\n     */\r\n    getInLoadOrder(): ModuleConfig[] {\r\n        return this.loadOrder.map(id => this.modules.get(id)!);\r\n    }\r\n\r\n    /**\r\n     * Get available modules for a specific context\r\n     */\r\n    getAvailableModules(context: {\r\n        isSuperAdmin: boolean;\r\n        tenantPlan?: string;\r\n        enabledModules?: string[];\r\n    }): ModuleConfig[] {\r\n        return this.getAll()\r\n            .filter(module => this.isModuleAvailable(module, context))\r\n            .sort((a, b) => a.menu.order - b.menu.order);\r\n    }\r\n\r\n    /**\r\n     * Get sidebar menu items for current context\r\n     */\r\n    async getSidebarMenu(context: {\r\n        isSuperAdmin: boolean;\r\n        tenantPlan?: string;\r\n        enabledModules?: string[];\r\n    }): Promise<ModuleMenuItem[]> {\r\n        const availableModules = this.getAvailableModules(context);\r\n        const menuItems: ModuleMenuItem[] = [];\r\n\r\n        for (const module of availableModules) {\r\n            const menuItem = { ...module.menu };\r\n\r\n            // Resolve badge value if configured\r\n            if (menuItem.badge?.getValue) {\r\n                try {\r\n                    const value = await menuItem.badge.getValue();\r\n                    if (value !== undefined) {\r\n                        (menuItem.badge as any).value = value;\r\n                    }\r\n                } catch (err) {\r\n                    console.warn(`Failed to get badge for ${module.id}:`, err);\r\n                }\r\n            }\r\n\r\n            menuItems.push(menuItem);\r\n        }\r\n\r\n        return menuItems;\r\n    }\r\n\r\n    /**\r\n     * Check if module is available for given context\r\n     */\r\n    private isModuleAvailable(\r\n        module: ModuleConfig,\r\n        context: {\r\n            isSuperAdmin: boolean;\r\n            tenantPlan?: string;\r\n            enabledModules?: string[];\r\n        }\r\n    ): boolean {\r\n        const { availability } = module;\r\n\r\n        // Platform admin modules only visible to super admins\r\n        if (availability.requiresPlatformAdmin && !context.isSuperAdmin) {\r\n            return false;\r\n        }\r\n\r\n        // Enterprise-only modules\r\n        if (availability.enterpriseOnly && context.tenantPlan !== 'enterprise') {\r\n            return false;\r\n        }\r\n\r\n        // Core/foundation modules are always visible\r\n        if (module.isCore || availability.defaultEnabled) {\r\n            return true;\r\n        }\r\n\r\n        // Optional modules only visible if explicitly enabled\r\n        if (context.enabledModules && context.enabledModules.includes(module.id)) {\r\n            return true;\r\n        }\r\n\r\n        // Not enabled, don't show\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Get module IDs that should be loaded for a tenant\r\n     */\r\n    getModulesToLoad(enabledModules: string[]): ModuleConfig[] {\r\n        const toLoad: ModuleConfig[] = [];\r\n        const visited = new Set<string>();\r\n\r\n        const addWithDeps = (id: string) => {\r\n            if (visited.has(id)) return;\r\n            visited.add(id);\r\n\r\n            const module = this.modules.get(id);\r\n            if (!module) return;\r\n\r\n            // Add dependencies first\r\n            if (module.dependencies) {\r\n                for (const dep of module.dependencies) {\r\n                    addWithDeps(dep);\r\n                }\r\n            }\r\n\r\n            toLoad.push(module);\r\n        };\r\n\r\n        // Add foundation modules (always enabled)\r\n        for (const module of this.getAll()) {\r\n            if (module.availability.defaultEnabled) {\r\n                addWithDeps(module.id);\r\n            }\r\n        }\r\n\r\n        // Add explicitly enabled modules\r\n        for (const id of enabledModules) {\r\n            addWithDeps(id);\r\n        }\r\n\r\n        return toLoad;\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nexport const moduleRegistry = new ModuleRegistryClass();\r\n", "import type { ModuleEvent, EventHandler } from './types';\r\n\r\n/**\r\n * Simple event bus for inter-module communication.\r\n * Modules should never depend on each other directly.\r\n * Instead, publish events and subscribe to them.\r\n * \r\n * Example:\r\n * - CMS publishes 'post.published'\r\n * - SEO subscribes to regenerate sitemap\r\n */\r\nclass EventBusClass {\r\n    private handlers: Map<string, Set<EventHandler>> = new Map();\r\n\r\n    /**\r\n     * Subscribe to an event\r\n     * @returns Unsubscribe function\r\n     */\r\n    subscribe(event: string, handler: EventHandler): () => void {\r\n        if (!this.handlers.has(event)) {\r\n            this.handlers.set(event, new Set());\r\n        }\r\n        this.handlers.get(event)!.add(handler);\r\n\r\n        // Return unsubscribe function\r\n        return () => {\r\n            this.handlers.get(event)?.delete(handler);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Publish an event to all subscribers\r\n     */\r\n    async publish(event: string, payload: Partial<ModuleEvent>): Promise<void> {\r\n        const handlers = this.handlers.get(event);\r\n        if (!handlers || handlers.size === 0) {\r\n            return;\r\n        }\r\n\r\n        const moduleEvent: ModuleEvent = {\r\n            moduleId: payload.moduleId || 'unknown',\r\n            tenantId: payload.tenantId,\r\n            timestamp: new Date(),\r\n            payload: payload.payload,\r\n        };\r\n\r\n        // Execute all handlers (don't wait for async handlers to complete)\r\n        const promises: Promise<void>[] = [];\r\n        for (const handler of handlers) {\r\n            try {\r\n                const result = handler(moduleEvent);\r\n                if (result instanceof Promise) {\r\n                    promises.push(result.catch(err => {\r\n                        console.error(`Event handler error for \"${event}\":`, err);\r\n                    }));\r\n                }\r\n            } catch (err) {\r\n                console.error(`Event handler error for \"${event}\":`, err);\r\n            }\r\n        }\r\n\r\n        // Wait for all async handlers\r\n        if (promises.length > 0) {\r\n            await Promise.all(promises);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Publish event without waiting for handlers\r\n     */\r\n    emit(event: string, payload: Partial<ModuleEvent>): void {\r\n        this.publish(event, payload).catch(err => {\r\n            console.error(`Event emit error for \"${event}\":`, err);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Remove all handlers for an event\r\n     */\r\n    clear(event: string): void {\r\n        this.handlers.delete(event);\r\n    }\r\n\r\n    /**\r\n     * Remove all handlers\r\n     */\r\n    clearAll(): void {\r\n        this.handlers.clear();\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nexport const eventBus = new EventBusClass();\r\n\r\n// Common event names\r\nexport const EVENTS = {\r\n    // Module lifecycle\r\n    MODULE_ENABLED: 'module.enabled',\r\n    MODULE_DISABLED: 'module.disabled',\r\n\r\n    // Tenant lifecycle\r\n    TENANT_PROVISIONED: 'tenant.provisioned',\r\n    TENANT_SUSPENDED: 'tenant.suspended',\r\n    TENANT_DEPROVISIONED: 'tenant.deprovisioned',\r\n\r\n    // User events\r\n    USER_CREATED: 'user.created',\r\n    USER_UPDATED: 'user.updated',\r\n    USER_DELETED: 'user.deleted',\r\n    USER_INVITED: 'user.invited',\r\n\r\n    // Auth events\r\n    LOGIN_SUCCESS: 'auth.login.success',\r\n    LOGIN_FAILED: 'auth.login.failed',\r\n    LOGOUT: 'auth.logout',\r\n    PASSWORD_CHANGED: 'auth.password.changed',\r\n    PASSWORD_RESET: 'auth.password.reset',\r\n    SESSION_REVOKED: 'auth.session.revoked',\r\n\r\n    // Settings events\r\n    SETTING_CHANGED: 'settings.changed',\r\n} as const;\r\n", "// Core Registry - Central module and settings management\r\nexport * from './types';\r\nexport { moduleRegistry } from './ModuleRegistry';\r\nexport { settingsRegistry } from './SettingsRegistry';\r\nexport { eventBus, EVENTS } from './EventBus';\r\n", "{\n  \"migrations\": [\n    \"0005_modular_architecture.sql\",\n    \"0006_schema_sync.sql\",\n    \"0007_user_enhancements.sql\",\n    \"001_initial.sql\",\n    \"002_auth.sql\",\n    \"003_add_deleted_at.sql\",\n    \"004_user_schema_updates.sql\"\n  ],\n  \"generated\": \"2026-01-10T10:06:04.402Z\"\n}", "import { notImplemented } from \"../../../_internal/utils.mjs\";\nexport const access = /*@__PURE__*/ notImplemented(\"fs.access\");\nexport const copyFile = /*@__PURE__*/ notImplemented(\"fs.copyFile\");\nexport const cp = /*@__PURE__*/ notImplemented(\"fs.cp\");\nexport const open = /*@__PURE__*/ notImplemented(\"fs.open\");\nexport const opendir = /*@__PURE__*/ notImplemented(\"fs.opendir\");\nexport const rename = /*@__PURE__*/ notImplemented(\"fs.rename\");\nexport const truncate = /*@__PURE__*/ notImplemented(\"fs.truncate\");\nexport const rm = /*@__PURE__*/ notImplemented(\"fs.rm\");\nexport const rmdir = /*@__PURE__*/ notImplemented(\"fs.rmdir\");\nexport const mkdir = /*@__PURE__*/ notImplemented(\"fs.mkdir\");\nexport const readdir = /*@__PURE__*/ notImplemented(\"fs.readdir\");\nexport const readlink = /*@__PURE__*/ notImplemented(\"fs.readlink\");\nexport const symlink = /*@__PURE__*/ notImplemented(\"fs.symlink\");\nexport const lstat = /*@__PURE__*/ notImplemented(\"fs.lstat\");\nexport const stat = /*@__PURE__*/ notImplemented(\"fs.stat\");\nexport const link = /*@__PURE__*/ notImplemented(\"fs.link\");\nexport const unlink = /*@__PURE__*/ notImplemented(\"fs.unlink\");\nexport const chmod = /*@__PURE__*/ notImplemented(\"fs.chmod\");\nexport const lchmod = /*@__PURE__*/ notImplemented(\"fs.lchmod\");\nexport const lchown = /*@__PURE__*/ notImplemented(\"fs.lchown\");\nexport const chown = /*@__PURE__*/ notImplemented(\"fs.chown\");\nexport const utimes = /*@__PURE__*/ notImplemented(\"fs.utimes\");\nexport const lutimes = /*@__PURE__*/ notImplemented(\"fs.lutimes\");\nexport const realpath = /*@__PURE__*/ notImplemented(\"fs.realpath\");\nexport const mkdtemp = /*@__PURE__*/ notImplemented(\"fs.mkdtemp\");\nexport const writeFile = /*@__PURE__*/ notImplemented(\"fs.writeFile\");\nexport const appendFile = /*@__PURE__*/ notImplemented(\"fs.appendFile\");\nexport const readFile = /*@__PURE__*/ notImplemented(\"fs.readFile\");\nexport const watch = /*@__PURE__*/ notImplemented(\"fs.watch\");\nexport const statfs = /*@__PURE__*/ notImplemented(\"fs.statfs\");\nexport const glob = /*@__PURE__*/ notImplemented(\"fs.glob\");\n", "export const UV_FS_SYMLINK_DIR = 1;\nexport const UV_FS_SYMLINK_JUNCTION = 2;\nexport const O_RDONLY = 0;\nexport const O_WRONLY = 1;\nexport const O_RDWR = 2;\nexport const UV_DIRENT_UNKNOWN = 0;\nexport const UV_DIRENT_FILE = 1;\nexport const UV_DIRENT_DIR = 2;\nexport const UV_DIRENT_LINK = 3;\nexport const UV_DIRENT_FIFO = 4;\nexport const UV_DIRENT_SOCKET = 5;\nexport const UV_DIRENT_CHAR = 6;\nexport const UV_DIRENT_BLOCK = 7;\nexport const EXTENSIONLESS_FORMAT_JAVASCRIPT = 0;\nexport const EXTENSIONLESS_FORMAT_WASM = 1;\nexport const S_IFMT = 61440;\nexport const S_IFREG = 32768;\nexport const S_IFDIR = 16384;\nexport const S_IFCHR = 8192;\nexport const S_IFBLK = 24576;\nexport const S_IFIFO = 4096;\nexport const S_IFLNK = 40960;\nexport const S_IFSOCK = 49152;\nexport const O_CREAT = 64;\nexport const O_EXCL = 128;\nexport const UV_FS_O_FILEMAP = 0;\nexport const O_NOCTTY = 256;\nexport const O_TRUNC = 512;\nexport const O_APPEND = 1024;\nexport const O_DIRECTORY = 65536;\nexport const O_NOATIME = 262144;\nexport const O_NOFOLLOW = 131072;\nexport const O_SYNC = 1052672;\nexport const O_DSYNC = 4096;\nexport const O_DIRECT = 16384;\nexport const O_NONBLOCK = 2048;\nexport const S_IRWXU = 448;\nexport const S_IRUSR = 256;\nexport const S_IWUSR = 128;\nexport const S_IXUSR = 64;\nexport const S_IRWXG = 56;\nexport const S_IRGRP = 32;\nexport const S_IWGRP = 16;\nexport const S_IXGRP = 8;\nexport const S_IRWXO = 7;\nexport const S_IROTH = 4;\nexport const S_IWOTH = 2;\nexport const S_IXOTH = 1;\nexport const F_OK = 0;\nexport const R_OK = 4;\nexport const W_OK = 2;\nexport const X_OK = 1;\nexport const UV_FS_COPYFILE_EXCL = 1;\nexport const COPYFILE_EXCL = 1;\nexport const UV_FS_COPYFILE_FICLONE = 2;\nexport const COPYFILE_FICLONE = 2;\nexport const UV_FS_COPYFILE_FICLONE_FORCE = 4;\nexport const COPYFILE_FICLONE_FORCE = 4;\n", "import { access, appendFile, chmod, chown, copyFile, cp, glob, lchmod, lchown, link, lstat, lutimes, mkdir, mkdtemp, open, opendir, readFile, readdir, readlink, realpath, rename, rm, rmdir, stat, statfs, symlink, truncate, unlink, utimes, watch, writeFile } from \"../internal/fs/promises.mjs\";\nimport * as constants from \"../internal/fs/constants.mjs\";\nexport { constants };\nexport * from \"../internal/fs/promises.mjs\";\nexport default {\n\tconstants,\n\taccess,\n\tappendFile,\n\tchmod,\n\tchown,\n\tcopyFile,\n\tcp,\n\tglob,\n\tlchmod,\n\tlchown,\n\tlink,\n\tlstat,\n\tlutimes,\n\tmkdir,\n\tmkdtemp,\n\topen,\n\topendir,\n\treadFile,\n\treaddir,\n\treadlink,\n\trealpath,\n\trename,\n\trm,\n\trmdir,\n\tstat,\n\tstatfs,\n\tsymlink,\n\ttruncate,\n\tunlink,\n\tutimes,\n\twatch,\n\twriteFile\n};\n", "import { notImplementedClass } from \"../../../_internal/utils.mjs\";\nexport const Dir = /*@__PURE__*/ notImplementedClass(\"fs.Dir\");\nexport const Dirent = /*@__PURE__*/ notImplementedClass(\"fs.Dirent\");\nexport const Stats = /*@__PURE__*/ notImplementedClass(\"fs.Stats\");\nexport const ReadStream = /*@__PURE__*/ notImplementedClass(\"fs.ReadStream\");\nexport const WriteStream = /*@__PURE__*/ notImplementedClass(\"fs.WriteStream\");\nexport const FileReadStream = ReadStream;\nexport const FileWriteStream = WriteStream;\n", "import { notImplemented, notImplementedAsync } from \"../../../_internal/utils.mjs\";\nimport * as fsp from \"./promises.mjs\";\nfunction callbackify(fn) {\n\tconst fnc = function(...args) {\n\t\tconst cb = args.pop();\n\t\tfn().catch((error) => cb(error)).then((val) => cb(undefined, val));\n\t};\n\tfnc.__promisify__ = fn;\n\tfnc.native = fnc;\n\treturn fnc;\n}\nexport const access = callbackify(fsp.access);\nexport const appendFile = callbackify(fsp.appendFile);\nexport const chown = callbackify(fsp.chown);\nexport const chmod = callbackify(fsp.chmod);\nexport const copyFile = callbackify(fsp.copyFile);\nexport const cp = callbackify(fsp.cp);\nexport const lchown = callbackify(fsp.lchown);\nexport const lchmod = callbackify(fsp.lchmod);\nexport const link = callbackify(fsp.link);\nexport const lstat = callbackify(fsp.lstat);\nexport const lutimes = callbackify(fsp.lutimes);\nexport const mkdir = callbackify(fsp.mkdir);\nexport const mkdtemp = callbackify(fsp.mkdtemp);\nexport const realpath = callbackify(fsp.realpath);\nexport const open = callbackify(fsp.open);\nexport const opendir = callbackify(fsp.opendir);\nexport const readdir = callbackify(fsp.readdir);\nexport const readFile = callbackify(fsp.readFile);\nexport const readlink = callbackify(fsp.readlink);\nexport const rename = callbackify(fsp.rename);\nexport const rm = callbackify(fsp.rm);\nexport const rmdir = callbackify(fsp.rmdir);\nexport const stat = callbackify(fsp.stat);\nexport const symlink = callbackify(fsp.symlink);\nexport const truncate = callbackify(fsp.truncate);\nexport const unlink = callbackify(fsp.unlink);\nexport const utimes = callbackify(fsp.utimes);\nexport const writeFile = callbackify(fsp.writeFile);\nexport const statfs = callbackify(fsp.statfs);\nexport const close = /*@__PURE__*/ notImplementedAsync(\"fs.close\");\nexport const createReadStream = /*@__PURE__*/ notImplementedAsync(\"fs.createReadStream\");\nexport const createWriteStream = /*@__PURE__*/ notImplementedAsync(\"fs.createWriteStream\");\nexport const exists = /*@__PURE__*/ notImplementedAsync(\"fs.exists\");\nexport const fchown = /*@__PURE__*/ notImplementedAsync(\"fs.fchown\");\nexport const fchmod = /*@__PURE__*/ notImplementedAsync(\"fs.fchmod\");\nexport const fdatasync = /*@__PURE__*/ notImplementedAsync(\"fs.fdatasync\");\nexport const fstat = /*@__PURE__*/ notImplementedAsync(\"fs.fstat\");\nexport const fsync = /*@__PURE__*/ notImplementedAsync(\"fs.fsync\");\nexport const ftruncate = /*@__PURE__*/ notImplementedAsync(\"fs.ftruncate\");\nexport const futimes = /*@__PURE__*/ notImplementedAsync(\"fs.futimes\");\nexport const lstatSync = /*@__PURE__*/ notImplementedAsync(\"fs.lstatSync\");\nexport const read = /*@__PURE__*/ notImplementedAsync(\"fs.read\");\nexport const readv = /*@__PURE__*/ notImplementedAsync(\"fs.readv\");\nexport const realpathSync = /*@__PURE__*/ notImplementedAsync(\"fs.realpathSync\");\nexport const statSync = /*@__PURE__*/ notImplementedAsync(\"fs.statSync\");\nexport const unwatchFile = /*@__PURE__*/ notImplementedAsync(\"fs.unwatchFile\");\nexport const watch = /*@__PURE__*/ notImplementedAsync(\"fs.watch\");\nexport const watchFile = /*@__PURE__*/ notImplementedAsync(\"fs.watchFile\");\nexport const write = /*@__PURE__*/ notImplementedAsync(\"fs.write\");\nexport const writev = /*@__PURE__*/ notImplementedAsync(\"fs.writev\");\nexport const _toUnixTimestamp = /*@__PURE__*/ notImplementedAsync(\"fs._toUnixTimestamp\");\nexport const openAsBlob = /*@__PURE__*/ notImplementedAsync(\"fs.openAsBlob\");\nexport const glob = /*@__PURE__*/ notImplementedAsync(\"fs.glob\");\nexport const appendFileSync = /*@__PURE__*/ notImplemented(\"fs.appendFileSync\");\nexport const accessSync = /*@__PURE__*/ notImplemented(\"fs.accessSync\");\nexport const chownSync = /*@__PURE__*/ notImplemented(\"fs.chownSync\");\nexport const chmodSync = /*@__PURE__*/ notImplemented(\"fs.chmodSync\");\nexport const closeSync = /*@__PURE__*/ notImplemented(\"fs.closeSync\");\nexport const copyFileSync = /*@__PURE__*/ notImplemented(\"fs.copyFileSync\");\nexport const cpSync = /*@__PURE__*/ notImplemented(\"fs.cpSync\");\nexport const existsSync = () => false;\nexport const fchownSync = /*@__PURE__*/ notImplemented(\"fs.fchownSync\");\nexport const fchmodSync = /*@__PURE__*/ notImplemented(\"fs.fchmodSync\");\nexport const fdatasyncSync = /*@__PURE__*/ notImplemented(\"fs.fdatasyncSync\");\nexport const fstatSync = /*@__PURE__*/ notImplemented(\"fs.fstatSync\");\nexport const fsyncSync = /*@__PURE__*/ notImplemented(\"fs.fsyncSync\");\nexport const ftruncateSync = /*@__PURE__*/ notImplemented(\"fs.ftruncateSync\");\nexport const futimesSync = /*@__PURE__*/ notImplemented(\"fs.futimesSync\");\nexport const lchownSync = /*@__PURE__*/ notImplemented(\"fs.lchownSync\");\nexport const lchmodSync = /*@__PURE__*/ notImplemented(\"fs.lchmodSync\");\nexport const linkSync = /*@__PURE__*/ notImplemented(\"fs.linkSync\");\nexport const lutimesSync = /*@__PURE__*/ notImplemented(\"fs.lutimesSync\");\nexport const mkdirSync = /*@__PURE__*/ notImplemented(\"fs.mkdirSync\");\nexport const mkdtempSync = /*@__PURE__*/ notImplemented(\"fs.mkdtempSync\");\nexport const openSync = /*@__PURE__*/ notImplemented(\"fs.openSync\");\nexport const opendirSync = /*@__PURE__*/ notImplemented(\"fs.opendirSync\");\nexport const readdirSync = /*@__PURE__*/ notImplemented(\"fs.readdirSync\");\nexport const readSync = /*@__PURE__*/ notImplemented(\"fs.readSync\");\nexport const readvSync = /*@__PURE__*/ notImplemented(\"fs.readvSync\");\nexport const readFileSync = /*@__PURE__*/ notImplemented(\"fs.readFileSync\");\nexport const readlinkSync = /*@__PURE__*/ notImplemented(\"fs.readlinkSync\");\nexport const renameSync = /*@__PURE__*/ notImplemented(\"fs.renameSync\");\nexport const rmSync = /*@__PURE__*/ notImplemented(\"fs.rmSync\");\nexport const rmdirSync = /*@__PURE__*/ notImplemented(\"fs.rmdirSync\");\nexport const symlinkSync = /*@__PURE__*/ notImplemented(\"fs.symlinkSync\");\nexport const truncateSync = /*@__PURE__*/ notImplemented(\"fs.truncateSync\");\nexport const unlinkSync = /*@__PURE__*/ notImplemented(\"fs.unlinkSync\");\nexport const utimesSync = /*@__PURE__*/ notImplemented(\"fs.utimesSync\");\nexport const writeFileSync = /*@__PURE__*/ notImplemented(\"fs.writeFileSync\");\nexport const writeSync = /*@__PURE__*/ notImplemented(\"fs.writeSync\");\nexport const writevSync = /*@__PURE__*/ notImplemented(\"fs.writevSync\");\nexport const statfsSync = /*@__PURE__*/ notImplemented(\"fs.statfsSync\");\nexport const globSync = /*@__PURE__*/ notImplemented(\"fs.globSync\");\n", "import promises from \"node:fs/promises\";\nimport { Dir, Dirent, FileReadStream, FileWriteStream, ReadStream, Stats, WriteStream } from \"./internal/fs/classes.mjs\";\nimport { _toUnixTimestamp, access, accessSync, appendFile, appendFileSync, chmod, chmodSync, chown, chownSync, close, closeSync, copyFile, copyFileSync, cp, cpSync, createReadStream, createWriteStream, exists, existsSync, fchmod, fchmodSync, fchown, fchownSync, fdatasync, fdatasyncSync, fstat, fstatSync, fsync, fsyncSync, ftruncate, ftruncateSync, futimes, futimesSync, glob, lchmod, globSync, lchmodSync, lchown, lchownSync, link, linkSync, lstat, lstatSync, lutimes, lutimesSync, mkdir, mkdirSync, mkdtemp, mkdtempSync, open, openAsBlob, openSync, opendir, opendirSync, read, readFile, readFileSync, readSync, readdir, readdirSync, readlink, readlinkSync, readv, readvSync, realpath, realpathSync, rename, renameSync, rm, rmSync, rmdir, rmdirSync, stat, statSync, statfs, statfsSync, symlink, symlinkSync, truncate, truncateSync, unlink, unlinkSync, unwatchFile, utimes, utimesSync, watch, watchFile, write, writeFile, writeFileSync, writeSync, writev, writevSync } from \"./internal/fs/fs.mjs\";\nimport * as constants from \"./internal/fs/constants.mjs\";\nimport { F_OK, R_OK, W_OK, X_OK } from \"./internal/fs/constants.mjs\";\nexport { F_OK, R_OK, W_OK, X_OK } from \"./internal/fs/constants.mjs\";\nexport { promises, constants };\nexport * from \"./internal/fs/fs.mjs\";\nexport * from \"./internal/fs/classes.mjs\";\nexport default {\n\tF_OK,\n\tR_OK,\n\tW_OK,\n\tX_OK,\n\tconstants,\n\tpromises,\n\tDir,\n\tDirent,\n\tFileReadStream,\n\tFileWriteStream,\n\tReadStream,\n\tStats,\n\tWriteStream,\n\t_toUnixTimestamp,\n\taccess,\n\taccessSync,\n\tappendFile,\n\tappendFileSync,\n\tchmod,\n\tchmodSync,\n\tchown,\n\tchownSync,\n\tclose,\n\tcloseSync,\n\tcopyFile,\n\tcopyFileSync,\n\tcp,\n\tcpSync,\n\tcreateReadStream,\n\tcreateWriteStream,\n\texists,\n\texistsSync,\n\tfchmod,\n\tfchmodSync,\n\tfchown,\n\tfchownSync,\n\tfdatasync,\n\tfdatasyncSync,\n\tfstat,\n\tfstatSync,\n\tfsync,\n\tfsyncSync,\n\tftruncate,\n\tftruncateSync,\n\tfutimes,\n\tfutimesSync,\n\tglob,\n\tlchmod,\n\tglobSync,\n\tlchmodSync,\n\tlchown,\n\tlchownSync,\n\tlink,\n\tlinkSync,\n\tlstat,\n\tlstatSync,\n\tlutimes,\n\tlutimesSync,\n\tmkdir,\n\tmkdirSync,\n\tmkdtemp,\n\tmkdtempSync,\n\topen,\n\topenAsBlob,\n\topenSync,\n\topendir,\n\topendirSync,\n\tread,\n\treadFile,\n\treadFileSync,\n\treadSync,\n\treaddir,\n\treaddirSync,\n\treadlink,\n\treadlinkSync,\n\treadv,\n\treadvSync,\n\trealpath,\n\trealpathSync,\n\trename,\n\trenameSync,\n\trm,\n\trmSync,\n\trmdir,\n\trmdirSync,\n\tstat,\n\tstatSync,\n\tstatfs,\n\tstatfsSync,\n\tsymlink,\n\tsymlinkSync,\n\ttruncate,\n\ttruncateSync,\n\tunlink,\n\tunlinkSync,\n\tunwatchFile,\n\tutimes,\n\tutimesSync,\n\twatch,\n\twatchFile,\n\twrite,\n\twriteFile,\n\twriteFileSync,\n\twriteSync,\n\twritev,\n\twritevSync\n};\n", "import { moduleRegistry, type ModuleConfig, ADMIN_ROUTES } from '@reactpress/core-registry';\r\n\r\n/**\r\n * Core Module Configuration\r\n * \r\n * Provides basic infrastructure links like Dashboard and Module Management.\r\n */\r\nexport const coreModuleConfig: ModuleConfig = {\r\n    id: 'core',\r\n    name: 'Platform Core',\r\n    version: '1.0.0',\r\n    description: 'Essential platform infrastructure and dashboard',\r\n    category: 'core',\r\n    isCore: true,\r\n    features: ['Infrastructure', 'System Health', 'Service Mesh'],\r\n    dependencies: [],\r\n    tags: ['core', 'platform', 'system'],\r\n\r\n    routes: () => { }, // Handled by main app routing\r\n\r\n    menu: {\r\n        label: 'Dashboard',\r\n        icon: 'LayoutDashboard',\r\n        href: `${ADMIN_ROUTES.DASHBOARD}`,\r\n        order: 0,\r\n    },\r\n\r\n    availability: {\r\n        requiresPlatformAdmin: false,\r\n        availableForTenants: true,\r\n        defaultEnabled: true,\r\n    },\r\n\r\n    permissions: ['platform.view'],\r\n};\r\n\r\nexport function registerCoreModules() {\r\n    // 1. Dashboard - Infrastructure, not an installable module\r\n    moduleRegistry.register({\r\n        id: 'dashboard',\r\n        name: 'Dashboard',\r\n        version: '1.0.0',\r\n        routes: () => { },\r\n        menu: { label: 'Dashboard', icon: 'LayoutDashboard', href: '/hpanel', order: 0 },\r\n        isCore: true,\r\n        isInfrastructure: true, // Don't show in modules marketplace\r\n        category: 'core',\r\n        features: ['Usage overview', 'Quick stats'],\r\n        tags: ['dashboard', 'stats'],\r\n        availability: { defaultEnabled: true, availableForTenants: true },\r\n        permissions: []\r\n    });\r\n\r\n    // 2. Module Management - Infrastructure, not an installable module\r\n    moduleRegistry.register({\r\n        id: 'module-manager',\r\n        name: 'Modules',\r\n        version: '1.0.0',\r\n        routes: () => { },\r\n        menu: { label: 'Modules', icon: 'Package', href: '/hpanel/modules', order: 5 },\r\n        isCore: true,\r\n        isInfrastructure: true, // Don't show in modules marketplace\r\n        category: 'core',\r\n        features: ['Module installation', 'Tenant module toggles'],\r\n        tags: ['modules', 'plugins'],\r\n        availability: { requiresPlatformAdmin: true, defaultEnabled: true },\r\n        permissions: ['modules.manage']\r\n    });\r\n\r\n    // 3. Settings (Global) - Infrastructure, not an installable module\r\n    moduleRegistry.register({\r\n        id: 'settings',\r\n        name: 'Settings',\r\n        version: '1.0.0',\r\n        routes: () => { },\r\n        menu: { label: 'Settings', icon: 'Settings', href: '/hpanel/settings', order: 100 },\r\n        isCore: true,\r\n        isInfrastructure: true, // Don't show in modules marketplace\r\n        category: 'core',\r\n        features: ['Global configuration', 'Branding'],\r\n        tags: ['settings', 'config'],\r\n        availability: { defaultEnabled: true, availableForTenants: true },\r\n        permissions: ['settings.view']\r\n    });\r\n}\r\n", "import { Hono } from 'hono';\nimport { API_ROUTES } from '@reactpress/core-registry';\n\n/**\n * Register all authentication routes on the Hono app\n * \n * Mounts complete auth API at /api/v1/auth including:\n * - Login/logout (single session and all sessions)\n * - Password management\n * - Session management and history\n * - User info and login history\n * \n * All endpoints track login attempts and manage session tokens.\n * Currently uses UUID-based tokens (TODO: migrate to JWT)\n * \n * @param {Hono<any>} app - Hono app instance to mount routes on\n * \n * @example\n * import { registerAuthRoutes } from '@reactpress/modules-auth';\n * const app = new Hono();\n * registerAuthRoutes(app);\n * \n * // Routes now available:\n * // POST   /api/v1/auth/login\n * // POST   /api/v1/auth/logout\n * // POST   /api/v1/auth/logout-all\n * // GET    /api/v1/auth/me\n * // GET    /api/v1/auth/sessions\n * // DELETE /api/v1/auth/sessions/:id\n * // GET    /api/v1/auth/login-history\n * // POST   /api/v1/auth/change-password\n */\nexport function registerAuthRoutes(app: Hono<any>): void {\n    const auth = new Hono<{ Bindings: any; Variables: any }>();\n\n    /**\n     * POST /api/v1/auth/login\n     * Authenticate user with username/password\n     */\n    auth.post('/login', async (c) => {\n        const db = c.env.DB;\n        const body = await c.req.json();\n        const { username, password } = body;\n\n        if (!username || !password) {\n            return c.json({ error: 'Username and password are required' }, 400);\n        }\n\n        try {\n            // Find user\n            const user = await db.prepare(\n                'SELECT id, username, password, role, tenant_id, status, email_verified FROM users WHERE username = ?'\n            ).bind(username).first();\n\n            if (!user) {\n                // Track failed login attempt\n                await trackLoginAttempt(db, username, null, false, 'User not found', c);\n                return c.json({ error: 'Invalid credentials' }, 401);\n            }\n\n            // Check password (simple comparison for now, should use bcrypt)\n            if (user.password !== password) {\n                await trackLoginAttempt(db, username, user.tenant_id, false, 'Invalid password', c);\n                return c.json({ error: 'Invalid credentials' }, 401);\n            }\n\n            // Check if user is active\n            if (user.status !== 'active') {\n                await trackLoginAttempt(db, username, user.tenant_id, false, 'Account not active', c);\n                return c.json({ error: 'Account is not active' }, 403);\n            }\n\n            // Create session\n            const sessionId = crypto.randomUUID();\n            const accessToken = crypto.randomUUID(); // Should use JWT\n            const expiresAt = Math.floor(Date.now() / 1000) + (60 * 60 * 24); // 24 hours\n\n            await db.prepare(`\n        INSERT INTO sessions (id, user_id, tenant_id, access_token, expires_at, user_agent, ip_address, created_at, last_activity_at)\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\n      `).bind(\n                sessionId,\n                user.id,\n                user.tenant_id,\n                accessToken,\n                expiresAt,\n                c.req.header('user-agent') || 'unknown',\n                c.req.header('cf-connecting-ip') || c.req.header('x-forwarded-for') || 'unknown',\n                Math.floor(Date.now() / 1000),\n                Math.floor(Date.now() / 1000)\n            ).run();\n\n            // Track successful login\n            await trackLoginAttempt(db, username, user.tenant_id, true, null, c);\n\n            // Update last login\n            await db.prepare('UPDATE users SET last_login_at = ? WHERE id = ?')\n                .bind(Math.floor(Date.now() / 1000), user.id).run();\n\n            return c.json({\n                success: true,\n                token: accessToken,\n                user: {\n                    id: user.id,\n                    username: user.username,\n                    role: user.role,\n                    tenantId: user.tenant_id,\n                },\n                expiresAt,\n            });\n        } catch (error: any) {\n            console.error('Login error:', error);\n            return c.json({ error: 'Login failed', message: error.message }, 500);\n        }\n    });\n\n    /**\n     * POST /api/v1/auth/logout\n     * Logout current session\n     */\n    auth.post('/logout', async (c) => {\n        const db = c.env.DB;\n        const token = c.req.header('Authorization')?.replace('Bearer ', '');\n\n        if (!token) {\n            return c.json({ error: 'No token provided' }, 400);\n        }\n\n        try {\n            await db.prepare('UPDATE sessions SET revoked_at = ? WHERE access_token = ?')\n                .bind(Math.floor(Date.now() / 1000), token).run();\n\n            return c.json({ success: true });\n        } catch (error: any) {\n            return c.json({ error: 'Logout failed' }, 500);\n        }\n    });\n\n    /**\n     * POST /api/v1/auth/logout-all\n     * Logout all sessions for the user\n     */\n    auth.post('/logout-all', async (c) => {\n        const db = c.env.DB;\n        const token = c.req.header('Authorization')?.replace('Bearer ', '');\n\n        if (!token) {\n            return c.json({ error: 'No token provided' }, 400);\n        }\n\n        try {\n            // Get user from token\n            const session = await db.prepare('SELECT user_id FROM sessions WHERE access_token = ? AND revoked_at IS NULL')\n                .bind(token).first();\n\n            if (!session) {\n                return c.json({ error: 'Invalid session' }, 401);\n            }\n\n            // Revoke all sessions\n            await db.prepare('UPDATE sessions SET revoked_at = ? WHERE user_id = ?')\n                .bind(Math.floor(Date.now() / 1000), session.user_id).run();\n\n            return c.json({ success: true });\n        } catch (error: any) {\n            return c.json({ error: 'Logout all failed' }, 500);\n        }\n    });\n\n    /**\n     * GET /api/v1/auth/me\n     * Get current user info\n     */\n    auth.get('/me', async (c) => {\n        const db = c.env.DB;\n        const token = c.req.header('Authorization')?.replace('Bearer ', '');\n\n        if (!token) {\n            return c.json({ error: 'No token provided' }, 401);\n        }\n\n        try {\n            const session = await db.prepare(`\n        SELECT s.user_id, s.tenant_id, s.expires_at, u.username, u.role, u.email, u.first_name, u.last_name, u.avatar_url\n        FROM sessions s\n        JOIN users u ON s.user_id = u.id\n        WHERE s.access_token = ? AND s.revoked_at IS NULL AND s.expires_at > ?\n      `).bind(token, Math.floor(Date.now() / 1000)).first();\n\n            if (!session) {\n                return c.json({ error: 'Invalid or expired session' }, 401);\n            }\n\n            return c.json({\n                id: session.user_id,\n                username: session.username,\n                email: session.email,\n                role: session.role,\n                tenantId: session.tenant_id,\n                firstName: session.first_name,\n                lastName: session.last_name,\n                avatarUrl: session.avatar_url,\n            });\n        } catch (error: any) {\n            return c.json({ error: 'Failed to get user info' }, 500);\n        }\n    });\n\n    /**\n     * GET /api/v1/auth/sessions\n     * List active sessions for current user\n     */\n    auth.get('/sessions', async (c) => {\n        const db = c.env.DB;\n        const token = c.req.header('Authorization')?.replace('Bearer ', '');\n\n        if (!token) {\n            return c.json({ error: 'No token provided' }, 401);\n        }\n\n        try {\n            const currentSession = await db.prepare('SELECT user_id FROM sessions WHERE access_token = ? AND revoked_at IS NULL')\n                .bind(token).first();\n\n            if (!currentSession) {\n                return c.json({ error: 'Invalid session' }, 401);\n            }\n\n            const sessions = await db.prepare(`\n        SELECT id, user_agent, ip_address, last_activity_at, created_at,\n               CASE WHEN access_token = ? THEN 1 ELSE 0 END as is_current\n        FROM sessions\n        WHERE user_id = ? AND revoked_at IS NULL AND expires_at > ?\n        ORDER BY last_activity_at DESC\n      `).bind(token, currentSession.user_id, Math.floor(Date.now() / 1000)).all();\n\n            return c.json(sessions.results);\n        } catch (error: any) {\n            return c.json({ error: 'Failed to get sessions' }, 500);\n        }\n    });\n\n    /**\n     * DELETE /api/v1/auth/sessions/:id\n     * Revoke a specific session\n     */\n    auth.delete('/sessions/:id', async (c) => {\n        const db = c.env.DB;\n        const sessionId = c.req.param('id');\n        const token = c.req.header('Authorization')?.replace('Bearer ', '');\n\n        if (!token) {\n            return c.json({ error: 'No token provided' }, 401);\n        }\n\n        try {\n            // Verify ownership\n            const currentSession = await db.prepare('SELECT user_id FROM sessions WHERE access_token = ? AND revoked_at IS NULL')\n                .bind(token).first();\n\n            if (!currentSession) {\n                return c.json({ error: 'Invalid session' }, 401);\n            }\n\n            // Revoke the target session (only if owned by the same user)\n            await db.prepare('UPDATE sessions SET revoked_at = ? WHERE id = ? AND user_id = ?')\n                .bind(Math.floor(Date.now() / 1000), sessionId, currentSession.user_id).run();\n\n            return c.json({ success: true });\n        } catch (error: any) {\n            return c.json({ error: 'Failed to revoke session' }, 500);\n        }\n    });\n\n    /**\n     * GET /api/v1/auth/login-history\n     * Get login history for current user\n     */\n    auth.get('/login-history', async (c) => {\n        const db = c.env.DB;\n        const token = c.req.header('Authorization')?.replace('Bearer ', '');\n\n        if (!token) {\n            return c.json({ error: 'No token provided' }, 401);\n        }\n\n        try {\n            const session = await db.prepare('SELECT user_id FROM sessions WHERE access_token = ? AND revoked_at IS NULL')\n                .bind(token).first();\n\n            if (!session) {\n                return c.json({ error: 'Invalid session' }, 401);\n            }\n\n            // Get user's email/username\n            const user = await db.prepare('SELECT username FROM users WHERE id = ?').bind(session.user_id).first();\n\n            if (!user) {\n                return c.json({ error: 'User not found' }, 404);\n            }\n\n            const history = await db.prepare(`\n        SELECT id, success, failure_reason, ip_address, user_agent, location, created_at\n        FROM login_attempts\n        WHERE email = ?\n        ORDER BY created_at DESC\n        LIMIT 50\n      `).bind(user.username).all();\n\n            return c.json(history.results);\n        } catch (error: any) {\n            return c.json({ error: 'Failed to get login history' }, 500);\n        }\n    });\n\n    /**\n     * POST /api/v1/auth/change-password\n     * Change password for current user\n     */\n    auth.post('/change-password', async (c) => {\n        const db = c.env.DB;\n        const token = c.req.header('Authorization')?.replace('Bearer ', '');\n        const { currentPassword, newPassword } = await c.req.json();\n\n        if (!token) {\n            return c.json({ error: 'No token provided' }, 401);\n        }\n\n        if (!currentPassword || !newPassword) {\n            return c.json({ error: 'Current and new password are required' }, 400);\n        }\n\n        if (newPassword.length < 8) {\n            return c.json({ error: 'New password must be at least 8 characters' }, 400);\n        }\n\n        try {\n            const session = await db.prepare('SELECT user_id FROM sessions WHERE access_token = ? AND revoked_at IS NULL')\n                .bind(token).first();\n\n            if (!session) {\n                return c.json({ error: 'Invalid session' }, 401);\n            }\n\n            const user = await db.prepare('SELECT password FROM users WHERE id = ?').bind(session.user_id).first();\n\n            if (user?.password !== currentPassword) {\n                return c.json({ error: 'Current password is incorrect' }, 400);\n            }\n\n            await db.prepare('UPDATE users SET password = ?, updated_at = ? WHERE id = ?')\n                .bind(newPassword, Math.floor(Date.now() / 1000), session.user_id).run();\n\n            return c.json({ success: true });\n        } catch (error: any) {\n            return c.json({ error: 'Failed to change password' }, 500);\n        }\n    });\n\n    // Mount auth routes\n    app.route('/api/v1/auth', auth);\n}\n\n/**\n * Track login attempt in database\n * \n * Logs all login attempts (successful and failed) for security auditing.\n * Captures user credentials, status, reason for failure, IP address, and user agent.\n * \n * @param {any} db - D1 database instance\n * @param {string} email - Username/email of login attempt\n * @param {string|null} tenantId - Tenant ID if available (null if user not found)\n * @param {boolean} success - Whether login succeeded\n * @param {string|null} failureReason - Reason for failure ('Invalid password', 'Account not active', etc.)\n * @param {any} c - Hono context (for IP and user-agent headers)\n * @returns {Promise<void>}\n * \n * @example\n * // Successful login\n * await trackLoginAttempt(db, 'alice@acme.com', 'tenant-123', true, null, c);\n * \n * // Failed login\n * await trackLoginAttempt(db, 'bob@acme.com', null, false, 'User not found', c);\n * \n * @note Silently fails if database insert fails (logs error but doesn't throw)\n */\nasync function trackLoginAttempt(\n    db: any,\n    email: string,\n    tenantId: string | null,\n    success: boolean,\n    failureReason: string | null,\n    c: any\n): Promise<void> {\n    try {\n        await db.prepare(`\n      INSERT INTO login_attempts (id, email, tenant_id, success, failure_reason, ip_address, user_agent, created_at)\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?)\n    `).bind(\n            crypto.randomUUID(),\n            email,\n            tenantId,\n            success ? 1 : 0,\n            failureReason,\n            c.req.header('cf-connecting-ip') || c.req.header('x-forwarded-for') || 'unknown',\n            c.req.header('user-agent') || 'unknown',\n            Math.floor(Date.now() / 1000)\n        ).run();\n    } catch (err) {\n        console.error('Failed to track login attempt:', err);\n    }\n}\n", "import type { SettingSection } from '@reactpress/core-registry';\r\n\r\n/**\r\n * Auth module settings section\r\n * These settings control authentication behavior per tenant\r\n */\r\nexport const authSettingsSection: SettingSection = {\r\n    id: 'auth',\r\n    label: 'Authentication & Security',\r\n    icon: 'Shield',\r\n    order: 20,\r\n    availableForTenants: true,\r\n    requiredPermission: 'settings.auth.manage',\r\n\r\n    fields: [\r\n        // ============================================================\r\n        // GENERAL SETTINGS\r\n        // ============================================================\r\n        {\r\n            key: 'auth.allowGuestAccess',\r\n            label: 'Allow Guest Access',\r\n            type: 'boolean',\r\n            description: 'Allow access to public pages without login',\r\n            defaultValue: false,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.enableSocialLogin',\r\n            label: 'Enable Social Login',\r\n            type: 'boolean',\r\n            description: 'Allow users to login with Google, GitHub, etc.',\r\n            defaultValue: false,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n\r\n        // ============================================================\r\n        // ADMIN UI (Placeholder - hidden or empty)\r\n        // ============================================================\r\n        // No specific admin UI settings for auth yet\r\n\r\n        // ============================================================\r\n        // FRONTEND UI (Login, Registration, etc.)\r\n        // ============================================================\r\n        {\r\n            key: 'auth.requireEmailVerification',\r\n            label: 'Require Email Verification',\r\n            type: 'boolean',\r\n            description: 'Users must verify email before accessing the app',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'Frontend UI',\r\n        },\r\n        {\r\n            key: 'auth.allowSelfRegistration',\r\n            label: 'Allow Self Registration',\r\n            type: 'boolean',\r\n            description: 'Users can register without an invitation',\r\n            defaultValue: false,\r\n            scope: 'tenant',\r\n            group: 'Frontend UI',\r\n        },\r\n        {\r\n            key: 'auth.allowMagicLink',\r\n            label: 'Enable Magic Link Login',\r\n            type: 'boolean',\r\n            description: 'Allow passwordless login via email link',\r\n            defaultValue: false,\r\n            scope: 'tenant',\r\n            group: 'Frontend UI',\r\n        },\r\n        {\r\n            key: 'auth.loginPageTitle',\r\n            label: 'Login Page Title',\r\n            type: 'text',\r\n            description: 'Title shown on the login page',\r\n            defaultValue: 'Sign In',\r\n            scope: 'tenant',\r\n            group: 'Frontend UI',\r\n        },\r\n\r\n        // ============================================================\r\n        // SECURITY POLICIES (Moved from root groups if needed, \r\n        // or keep as General if we want to merge)\r\n        // User requested: \"General settings for auth can be under General\"\r\n        // Let's keep specific policies as sub-types or just put them in General?\r\n        // Let's put them in \"General\" as requested to consolidate.\r\n        // ============================================================\r\n        {\r\n            key: 'auth.passwordMinLength',\r\n            label: 'Minimum Password Length',\r\n            type: 'number',\r\n            description: 'Minimum characters required for passwords',\r\n            defaultValue: 8,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.passwordRequireUppercase',\r\n            label: 'Require Uppercase Letters',\r\n            type: 'boolean',\r\n            description: 'Passwords must contain at least one uppercase letter',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.passwordRequireNumbers',\r\n            label: 'Require Numbers',\r\n            type: 'boolean',\r\n            description: 'Passwords must contain at least one number',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.passwordRequireSpecialChars',\r\n            label: 'Require Special Characters',\r\n            type: 'boolean',\r\n            description: 'Passwords must contain at least one special character',\r\n            defaultValue: false,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.passwordExpiryDays',\r\n            label: 'Password Expiry (Days)',\r\n            type: 'number',\r\n            description: 'Force password reset after this many days (0 = never)',\r\n            defaultValue: 0,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.maxLoginAttempts',\r\n            label: 'Max Login Attempts',\r\n            type: 'number',\r\n            description: 'Lock account after this many failed attempts',\r\n            defaultValue: 5,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.lockoutDurationMinutes',\r\n            label: 'Lockout Duration (Minutes)',\r\n            type: 'number',\r\n            description: 'How long accounts stay locked',\r\n            defaultValue: 30,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.sessionTimeoutMinutes',\r\n            label: 'Session Timeout (Minutes)',\r\n            type: 'number',\r\n            description: 'Auto-logout after inactivity',\r\n            defaultValue: 60,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'auth.maxConcurrentSessions',\r\n            label: 'Max Concurrent Sessions',\r\n            type: 'number',\r\n            description: 'Maximum devices logged in simultaneously (0 = unlimited)',\r\n            defaultValue: 0,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n    ],\r\n};\r\n\r\n", "/**\r\n * Authentication Module Configuration\r\n * This is the single source of truth for module metadata\r\n */\r\nexport const moduleConfig = {\r\n    id: 'auth',\r\n    name: 'Authentication',\r\n    description: 'Login, sessions, password management, and security policies',\r\n    longDescription: 'Comprehensive authentication system with multi-factor support, session management, password policies, and security event logging.',\r\n    icon: 'Shield',\r\n    version: '1.0.0',\r\n    category: 'core' as const,\r\n    isCore: true,\r\n    features: [\r\n        'Login/Logout',\r\n        'Session Management',\r\n        'Password Policies',\r\n        'Security Events',\r\n        'Multi-Factor Authentication',\r\n    ],\r\n    dependencies: [],\r\n    tags: ['security', 'auth', 'login'],\r\n    tables: ['sessions', 'login_attempts', 'password_resets', 'security_events'],\r\n    permissions: [\r\n        'auth.sessions.view',\r\n        'auth.sessions.manage',\r\n        'auth.policies.manage',\r\n        'auth.security.view',\r\n    ],\r\n};\r\n\r\nexport type ModuleConfig = typeof moduleConfig;\r\n", "import { Hono } from 'hono';\r\nimport { moduleRegistry, type ModuleConfig, ADMIN_ROUTES } from '@reactpress/core-registry';\r\nimport { registerAuthRoutes } from './routes/authRoutes';\r\nimport { authSettingsSection } from './settings/authSettings';\r\n\r\n/**\r\n * Auth Module Configuration\r\n * \r\n * This is a foundation module - always loaded, cannot be disabled.\r\n * Handles authentication, sessions, password management, and security.\r\n */\r\nexport const authModuleConfig: ModuleConfig = {\r\n    id: 'auth',\r\n    name: 'Authentication',\r\n    version: '1.0.0',\r\n    description: 'Authentication, sessions, and security management',\r\n    category: 'core',\r\n    isCore: true,\r\n    features: ['Login', 'Logout', 'Session Management', 'Password Reset'],\r\n    dependencies: [],\r\n    tags: ['security', 'identity', 'auth'],\r\n    tables: ['sessions', 'login_attempts', 'password_resets', 'security_events'],\r\n\r\n    routes: registerAuthRoutes,\r\n\r\n    menu: {\r\n        label: 'Security',\r\n        icon: 'Shield',\r\n        href: `${ADMIN_ROUTES.SECURITY}`,\r\n        order: 30,\r\n    },\r\n\r\n    availability: {\r\n        requiresPlatformAdmin: false,\r\n        availableForTenants: true,\r\n        defaultEnabled: true, // Foundation module - always enabled\r\n    },\r\n\r\n    permissions: [\r\n        'auth.settings.manage',\r\n        'sessions.view',\r\n        'sessions.revoke',\r\n        'login-history.view',\r\n    ],\r\n\r\n    requiredPermission: 'sessions.view',\r\n\r\n    settings: authSettingsSection,\r\n\r\n    // Breeze lifecycle hooks\r\n    onProvision: async (tenantId, db) => {\r\n        console.log(`[Auth] Provisioning for tenant: ${tenantId}`);\r\n        // Create default security settings for new tenant\r\n    },\r\n\r\n    onEnable: async (tenantId, db) => {\r\n        console.log(`[Auth] Enabled for tenant: ${tenantId}`);\r\n    },\r\n\r\n    onDisable: async (tenantId, db) => {\r\n        // Auth cannot be disabled for a tenant\r\n        console.warn(`[Auth] Cannot disable auth module`);\r\n    },\r\n    apiRoutes: [\r\n        { method: 'POST', path: '/api/v1/auth/login', description: 'Authenticate user and issue tokens' },\r\n        { method: 'POST', path: '/api/v1/auth/logout', description: 'Invalidate current session' },\r\n        { method: 'POST', path: '/api/v1/auth/logout-all', description: 'Invalidate all sessions for user' },\r\n        { method: 'POST', path: '/api/v1/auth/refresh', description: 'Refresh access token' },\r\n        { method: 'GET', path: '/api/v1/auth/me', description: 'Get current user profile' },\r\n        { method: 'GET', path: '/api/v1/auth/sessions', description: 'List active sessions', requiredPermission: 'sessions.view' },\r\n        { method: 'POST', path: '/api/v1/auth/forgot-password', description: 'Request password reset' },\r\n        { method: 'POST', path: '/api/v1/auth/reset-password', description: 'Reset password with token' },\r\n    ],\r\n    adminRoutes: [\r\n        { path: '/hpanel/security', component: 'SecurityPage', requiredPermission: 'sessions.view' },\r\n    ],\r\n    frontendRoutes: [\r\n        { path: '/login', component: 'LoginPage' },\r\n        { path: '/register', component: 'RegisterPage' },\r\n        { path: '/forgot-password', component: 'ForgotPasswordPage' },\r\n        { path: '/reset-password', component: 'ResetPasswordPage' },\r\n    ],\r\n};\r\n\r\n// Auto-register on import\r\nmoduleRegistry.register(authModuleConfig);\r\n\r\n// Re-export for external use\r\nexport { registerAuthRoutes } from './routes/authRoutes';\r\nexport { authSettingsSection } from './settings/authSettings';\r\nexport { moduleConfig } from './module.config';\r\n", "import { Hono } from 'hono';\r\nimport { moduleRegistry } from '@reactpress/core-registry';\r\n\r\n/**\r\n * Users module routes\r\n * Routes for user CRUD, roles, and invitations\r\n */\r\nexport function registerUsersRoutes(app: Hono<any>): void {\r\n    const users = new Hono<{ Bindings: any; Variables: any }>();\r\n    const roles = new Hono<{ Bindings: any; Variables: any }>();\r\n    const invitations = new Hono<{ Bindings: any; Variables: any }>();\r\n\r\n    const checkUserLimit = async (db: any, tenantId: string) => {\r\n        const tenant = await db.prepare('SELECT max_users FROM tenants WHERE id = ?').bind(tenantId).first();\r\n        if (!tenant) return { allowed: true };\r\n\r\n        const maxUsers = (tenant as any).max_users || 0;\r\n        if (maxUsers <= 0) return { allowed: true };\r\n\r\n        const usersCount = await db.prepare('SELECT COUNT(*) as count FROM users WHERE tenant_id = ? AND status != ?').bind(tenantId, 'archived').first();\r\n        const activeUsersCount = (usersCount as any).count || 0;\r\n\r\n        const invitesCount = await db.prepare('SELECT COUNT(*) as count FROM invitations WHERE tenant_id = ? AND status = ?').bind(tenantId, 'pending').first();\r\n        const pendingInvitesCount = (invitesCount as any).count || 0;\r\n\r\n        if (activeUsersCount + pendingInvitesCount >= maxUsers) {\r\n            return {\r\n                allowed: false,\r\n                current: activeUsersCount + pendingInvitesCount,\r\n                max: maxUsers,\r\n                error: 'User limit reached. Please upgrade your plan.'\r\n            };\r\n        }\r\n\r\n        return { allowed: true };\r\n    };\r\n\r\n    // ============================================================================\r\n    // USER ROUTES - /api/v1/users\r\n    // ============================================================================\r\n\r\n    users.get('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const tenantId = c.req.query('tenantId');\r\n        const status = c.req.query('status');\r\n        const search = c.req.query('search');\r\n\r\n        try {\r\n            let query = `SELECT id, username, email, first_name, last_name, role, status, tenant_id, created_at FROM users WHERE 1=1`;\r\n            const params: any[] = [];\r\n\r\n            if (tenantId && tenantId !== 'default') {\r\n                query += ' AND tenant_id = ?';\r\n                params.push(tenantId);\r\n            }\r\n\r\n            if (status && status !== 'all') {\r\n                query += ' AND status = ?';\r\n                params.push(status);\r\n            } else {\r\n                // Default: Hide archived unless explicitly requested? \r\n                // Actually, let's show all if status is 'all' but status filter in UI will handle it.\r\n            }\r\n\r\n            if (search) {\r\n                query += ' AND (username LIKE ? OR email LIKE ? OR first_name LIKE ? OR last_name LIKE ?)';\r\n                const searchTerm = `%${search}%`;\r\n                params.push(searchTerm, searchTerm, searchTerm, searchTerm);\r\n            }\r\n\r\n            query += ' ORDER BY created_at DESC';\r\n\r\n            const results = await db.prepare(query).bind(...params).all();\r\n            return c.json(results.results || []);\r\n        } catch (error: any) {\r\n            console.error('Users fetch error:', error);\r\n            return c.json({ error: 'Failed to fetch users', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * GET /api/v1/users/:id\r\n     * Get a single user\r\n     */\r\n    users.get('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n\r\n        try {\r\n            const user = await db.prepare(`\r\n        SELECT id, username, email, first_name, last_name, phone, avatar_url, timezone,\r\n               role, status, email_verified, email_verified_at, account_expires_at,\r\n               last_login_at, created_at, updated_at, tenant_id\r\n        FROM users WHERE id = ? AND deleted_at IS NULL\r\n      `).bind(id).first();\r\n\r\n            if (!user) {\r\n                return c.json({ error: 'User not found' }, 404);\r\n            }\r\n\r\n            return c.json(user);\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to fetch user', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/users\r\n     * Create a new user\r\n     */\r\n    users.post('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const body = await c.req.json();\r\n        const { username, email, password, role = 'viewer', tenantId, firstName, lastName } = body;\r\n\r\n        if (!username || !password) {\r\n            return c.json({ error: 'Username and password are required' }, 400);\r\n        }\r\n\r\n        const id = crypto.randomUUID();\r\n        const now = Math.floor(Date.now() / 1000);\r\n\r\n        try {\r\n            // Check Limits\r\n            const limitCheck = await checkUserLimit(db, tenantId || 'default');\r\n            if (!limitCheck.allowed) {\r\n                return c.json({ error: limitCheck.error }, 403);\r\n            }\r\n\r\n            await db.prepare(`\r\n        INSERT INTO users (id, tenant_id, username, email, password, first_name, last_name, role, status, joined_via, created_at, last_activity_at)\r\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'active', ?, ?, ?)\r\n      `).bind(id, tenantId || 'default', username, email, password, firstName, lastName, role, 'manual', now, now).run();\r\n\r\n            return c.json({ id, username, email, role, status: 'active', joined_via: 'manual', created_at: now }, 201);\r\n        } catch (error: any) {\r\n            if (error.message?.includes('UNIQUE constraint failed')) {\r\n                return c.json({ error: 'Username or email already exists' }, 409);\r\n            }\r\n            return c.json({ error: 'Failed to create user', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * PATCH /api/v1/users/:id\r\n     * Update a user\r\n     */\r\n    users.patch('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n        const body = await c.req.json();\r\n        const { username, email, role, status, firstName, lastName, phone, timezone } = body;\r\n\r\n        const updates: string[] = [];\r\n        const params: any[] = [];\r\n\r\n        if (username) { updates.push('username = ?'); params.push(username); }\r\n        if (email) { updates.push('email = ?'); params.push(email); }\r\n        if (role) { updates.push('role = ?'); params.push(role); }\r\n        if (status) { updates.push('status = ?'); params.push(status); }\r\n        if (firstName !== undefined) { updates.push('first_name = ?'); params.push(firstName); }\r\n        if (lastName !== undefined) { updates.push('last_name = ?'); params.push(lastName); }\r\n        if (phone !== undefined) { updates.push('phone = ?'); params.push(phone); }\r\n        if (timezone) { updates.push('timezone = ?'); params.push(timezone); }\r\n\r\n        if (updates.length === 0) {\r\n            return c.json({ error: 'No fields to update' }, 400);\r\n        }\r\n\r\n        updates.push('updated_at = ?');\r\n        params.push(Math.floor(Date.now() / 1000));\r\n        params.push(id);\r\n\r\n        try {\r\n            // Safety guard: Don't allow suspending super_admins via API\r\n            if (status === 'suspended') {\r\n                const user = await db.prepare('SELECT role FROM users WHERE id = ?').bind(id).first();\r\n                if (user?.role === 'super_admin' || user?.role === 'super-admin') {\r\n                    return c.json({ error: 'Super Admin accounts cannot be suspended' }, 403);\r\n                }\r\n            }\r\n\r\n            await db.prepare(`UPDATE users SET ${updates.join(', ')} WHERE id = ?`).bind(...params).run();\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to update user', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    users.delete('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n        const permanent = c.req.query('permanent') === 'true';\r\n\r\n        try {\r\n            // Safety guard: Don't allow deleting super_admins via API\r\n            const user = await db.prepare('SELECT role FROM users WHERE id = ?').bind(id).first();\r\n            if (user?.role === 'super_admin' || user?.role === 'super-admin') {\r\n                return c.json({ error: 'Super Admin accounts cannot be deleted' }, 403);\r\n            }\r\n\r\n            if (permanent) {\r\n                // Hard delete\r\n                await db.prepare('DELETE FROM users WHERE id = ?').bind(id).run();\r\n            } else {\r\n                // Soft delete (archive)\r\n                await db.prepare('UPDATE users SET deleted_at = ?, status = ?, updated_at = ? WHERE id = ?')\r\n                    .bind(Math.floor(Date.now() / 1000), 'archived', Math.floor(Date.now() / 1000), id).run();\r\n            }\r\n            return c.json({ success: true, permanent });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to delete user', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    users.post('/bulk-delete', async (c) => {\r\n        const db = c.env.DB;\r\n        const { ids, permanent = false } = await c.req.json();\r\n\r\n        if (!Array.isArray(ids) || ids.length === 0) {\r\n            return c.json({ error: 'IDs array is required' }, 400);\r\n        }\r\n\r\n        try {\r\n            const placeholders = ids.map(() => '?').join(', ');\r\n            if (permanent) {\r\n                await db.prepare(`DELETE FROM users WHERE id IN (${placeholders})`)\r\n                    .bind(...ids).run();\r\n            } else {\r\n                await db.prepare(`UPDATE users SET deleted_at = ?, status = ?, updated_at = ? WHERE id IN (${placeholders})`)\r\n                    .bind(Math.floor(Date.now() / 1000), 'archived', Math.floor(Date.now() / 1000), ...ids).run();\r\n            }\r\n            return c.json({ success: true, deleted: ids.length, permanent });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to delete users', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    // ============================================================================\r\n    // SEED DATA ROUTES\r\n    // ============================================================================\r\n\r\n    /**\r\n     * GET /api/v1/users/seed/info\r\n     * Returns info about what users will be seeded\r\n     */\r\n    users.get('/seed/info', async (c) => {\r\n        return c.json({\r\n            users: [\r\n                { role: 'admin', username: '{tenant}_admin', password: 'admin123', email: 'admin@{tenant}' },\r\n                { role: 'manager', username: '{tenant}_manager', password: 'admin123', email: 'manager@{tenant}' },\r\n                { role: 'editor', username: '{tenant}_editor', password: 'admin123', email: 'editor@{tenant}' },\r\n                { role: 'viewer', username: '{tenant}_viewer', password: 'admin123', email: 'viewer@{tenant}' },\r\n                { role: 'user', username: '{tenant}_user', password: 'admin123', email: 'user@{tenant}' },\r\n            ]\r\n        });\r\n    });\r\n\r\n    /**\r\n     * GET /api/v1/users/seed/status\r\n     * Health check for seed data across all tenants\r\n     */\r\n    users.get('/seed/status', async (c) => {\r\n        const db = c.env.DB;\r\n        try {\r\n            const tenantsRes = await db.prepare('SELECT id, slug FROM tenants').all();\r\n            const tenants = tenantsRes.results || [];\r\n\r\n            const status: any[] = [];\r\n            for (const tenant of tenants as any[]) {\r\n                const seedUsers = await db.prepare(`\r\n                    SELECT COUNT(*) as count FROM users \r\n                    WHERE tenant_id = ? AND username IN (?, ?, ?, ?, ?)\r\n                `).bind(\r\n                    tenant.id,\r\n                    `${tenant.slug}_admin`,\r\n                    `${tenant.slug}_manager`,\r\n                    `${tenant.slug}_editor`,\r\n                    `${tenant.slug}_viewer`,\r\n                    `${tenant.slug}_user`\r\n                ).first();\r\n\r\n                status.push({\r\n                    tenantId: tenant.id,\r\n                    slug: tenant.slug,\r\n                    count: (seedUsers as any)?.count || 0,\r\n                    isComplete: (seedUsers as any)?.count >= 5\r\n                });\r\n            }\r\n\r\n            return c.json({\r\n                totalTenants: tenants.length,\r\n                completeTenants: status.filter(s => s.isComplete).length,\r\n                details: status\r\n            });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to check seed status' }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/users/seed\r\n     * Seed default users across all tenants\r\n     */\r\n    users.post('/seed', async (c) => {\r\n        const db = c.env.DB;\r\n        try {\r\n            const tenantsRes = await db.prepare('SELECT id, slug FROM tenants').all();\r\n            const tenants = tenantsRes.results || [];\r\n\r\n            const defaultUsers = [\r\n                { role: 'admin', suffix: 'admin' },\r\n                { role: 'manager', suffix: 'manager' },\r\n                { role: 'editor', suffix: 'editor' },\r\n                { role: 'viewer', suffix: 'viewer' },\r\n                { role: 'user', suffix: 'user' },\r\n            ];\r\n\r\n            const now = Math.floor(Date.now() / 1000);\r\n            let count = 0;\r\n\r\n            for (const tenant of tenants as any[]) {\r\n                for (const def of defaultUsers) {\r\n                    const username = `${tenant.slug}_${def.suffix}`;\r\n                    const email = `${def.suffix}@${tenant.slug}`;\r\n                    const id = `u_${tenant.slug}_${def.suffix}`;\r\n\r\n                    const res = await db.prepare(`\r\n                        INSERT OR IGNORE INTO users (id, tenant_id, username, password, email, first_name, last_name, role, status, created_at, updated_at)\r\n                        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n                    `).bind(\r\n                        id,\r\n                        tenant.id,\r\n                        username,\r\n                        'admin123',\r\n                        email,\r\n                        def.role.charAt(0).toUpperCase() + def.role.slice(1),\r\n                        'User',\r\n                        def.role,\r\n                        'active',\r\n                        now,\r\n                        now\r\n                    ).run();\r\n\r\n                    if (res.meta.changes > 0) count++;\r\n                }\r\n            }\r\n\r\n            return c.json({ success: true, seeded: count });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to seed users', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    // ============================================================================\r\n    // PERMISSION ROUTES - /api/v1/permissions\r\n    // ============================================================================\r\n\r\n    const permissions = new Hono<{ Bindings: any; Variables: any }>();\r\n\r\n    /**\r\n     * GET /api/v1/permissions\r\n     * List all available permissions grouped by module\r\n     */\r\n    permissions.get('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const modules = moduleRegistry.getAll();\r\n\r\n        // Map code-based permissions\r\n        const modulePermsMap: Record<string, { moduleId: string; moduleName: string; permissions: string[] }> = {};\r\n\r\n        modules.forEach(m => {\r\n            if (m.permissions && m.permissions.length > 0) {\r\n                modulePermsMap[m.id] = {\r\n                    moduleId: m.id,\r\n                    moduleName: m.name,\r\n                    permissions: [...m.permissions]\r\n                };\r\n            }\r\n        });\r\n\r\n        try {\r\n            // Fetch custom permissions from DB\r\n            const results = await db.prepare('SELECT id, module_id, slug FROM permissions').all();\r\n            const dbPermissions = results.results || [];\r\n\r\n            dbPermissions.forEach((p: any) => {\r\n                const mod = modulePermsMap[p.module_id];\r\n                if (mod) {\r\n                    if (!mod.permissions.includes(p.slug)) {\r\n                        mod.permissions.push(p.slug);\r\n                    }\r\n                } else {\r\n                    // Module might not be in registry (future module or removed?)\r\n                    // Still show it as a category\r\n                    modulePermsMap[p.module_id] = {\r\n                        moduleId: p.module_id,\r\n                        moduleName: p.module_id.charAt(0).toUpperCase() + p.module_id.slice(1),\r\n                        permissions: [p.slug]\r\n                    };\r\n                }\r\n            });\r\n        } catch (error) {\r\n            console.error('Error fetching DB permissions:', error);\r\n        }\r\n\r\n        return c.json(Object.values(modulePermsMap));\r\n    });\r\n\r\n    permissions.post('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const { moduleId, slug, name, description } = await c.req.json();\r\n\r\n        if (!moduleId || !slug) {\r\n            return c.json({ error: 'Module ID and slug are required' }, 400);\r\n        }\r\n\r\n        const id = `${moduleId}.${slug}`;\r\n        const finalName = name || slug.charAt(0).toUpperCase() + slug.slice(1);\r\n\r\n        try {\r\n            await db.prepare('INSERT INTO permissions (id, module_id, name, slug, description) VALUES (?, ?, ?, ?, ?)')\r\n                .bind(id, moduleId, finalName, slug, description || '')\r\n                .run();\r\n            return c.json({ success: true, id });\r\n        } catch (error: any) {\r\n            if (error.message?.includes('UNIQUE constraint failed')) {\r\n                return c.json({ error: 'Permission already exists' }, 409);\r\n            }\r\n            return c.json({ error: 'Failed to add permission', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    permissions.delete('/:moduleId/:slug', async (c) => {\r\n        const db = c.env.DB;\r\n        const moduleId = c.req.param('moduleId');\r\n        const slug = c.req.param('slug');\r\n\r\n        try {\r\n            await db.prepare('DELETE FROM permissions WHERE module_id = ? AND slug = ?')\r\n                .bind(moduleId, slug)\r\n                .run();\r\n            // Note: We don't delete code-based permissions, just custom ones in DB.\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to delete permission', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    // ============================================================================\r\n    // ROLE ROUTES - /api/v1/roles\r\n    // ============================================================================\r\n\r\n    /**\r\n     * GET /api/v1/roles\r\n     * List all roles\r\n     */\r\n    roles.get('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const tenantId = c.req.query('tenantId');\r\n\r\n        try {\r\n            let query = `\r\n                SELECT \r\n                    r.id, r.name, r.slug, r.description, r.is_system, r.created_at, r.tenant_id,\r\n                    (SELECT COUNT(*) FROM users u WHERE u.role = r.slug) as user_count\r\n                FROM roles r\r\n            `;\r\n            const params: any[] = [];\r\n\r\n            if (tenantId) {\r\n                query += ' WHERE r.tenant_id = ? OR r.is_system = 1';\r\n                params.push(tenantId);\r\n            }\r\n\r\n            query += ' ORDER BY r.is_system DESC, r.name ASC';\r\n\r\n            const results = await db.prepare(query).bind(...params).all();\r\n            return c.json(results.results || []);\r\n        } catch (error: any) {\r\n            console.error('Roles fetch error:', error);\r\n            // Return default roles if table doesn't exist\r\n            return c.json([\r\n                { id: 'super_admin', name: 'Super Admin', slug: 'super_admin', is_system: 1 },\r\n                { id: 'admin', name: 'Administrator', slug: 'admin', is_system: 1 },\r\n                { id: 'editor', name: 'Editor', slug: 'editor', is_system: 1 },\r\n                { id: 'viewer', name: 'Viewer', slug: 'viewer', is_system: 1 },\r\n            ]);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * GET /api/v1/roles/:id\r\n     * Get a single role with permissions\r\n     */\r\n    roles.get('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n\r\n        try {\r\n            const role = await db.prepare('SELECT * FROM roles WHERE id = ?').bind(id).first();\r\n\r\n            if (!role) {\r\n                return c.json({ error: 'Role not found' }, 404);\r\n            }\r\n\r\n            // Fetch permissions\r\n            const permissionsRes = await db.prepare(`\r\n                SELECT permission_id FROM role_permissions WHERE role_id = ?\r\n            `).bind(id).all();\r\n\r\n            const permissions = (permissionsRes.results || []).map((p: any) => p.permission_id);\r\n\r\n            return c.json({ ...role, permissions });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to fetch role', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/roles\r\n     * Create a new role\r\n     */\r\n    roles.post('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const body = await c.req.json();\r\n        const { name, slug, description, tenantId, permissions = [] } = body;\r\n\r\n        if (!name || !slug) {\r\n            return c.json({ error: 'Name and slug are required' }, 400);\r\n        }\r\n\r\n        const id = crypto.randomUUID();\r\n\r\n        try {\r\n            await db.prepare(`\r\n        INSERT INTO roles (id, tenant_id, name, slug, description, is_system, created_at)\r\n        VALUES (?, ?, ?, ?, ?, 0, ?)\r\n      `).bind(id, tenantId || 'default', name, slug, description, Math.floor(Date.now() / 1000)).run();\r\n\r\n            // Insert permissions\r\n            if (Array.isArray(permissions) && permissions.length > 0) {\r\n                const stmt = db.prepare('INSERT INTO role_permissions (role_id, permission_id) VALUES (?, ?)');\r\n                const batch = permissions.map((permId: string) => stmt.bind(id, permId));\r\n                await db.batch(batch);\r\n            }\r\n\r\n            return c.json({ id, name, slug, description, permissions }, 201);\r\n        } catch (error: any) {\r\n            if (error.message?.includes('UNIQUE constraint failed')) {\r\n                return c.json({ error: 'Role slug already exists for this tenant' }, 409);\r\n            }\r\n            return c.json({ error: 'Failed to create role', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * PATCH /api/v1/roles/:id\r\n     * Update a role\r\n     */\r\n    roles.patch('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n        const body = await c.req.json();\r\n        const { name, description, permissions } = body;\r\n\r\n        try {\r\n            const role = await db.prepare('SELECT is_system FROM roles WHERE id = ?').bind(id).first();\r\n            if (!role) return c.json({ error: 'Role not found' }, 404);\r\n\r\n            if (role.is_system && (name || description)) {\r\n                // Allow updating permissions for system roles? Maybe not name/slug.\r\n                // let's allow description update but not name for system roles\r\n            }\r\n\r\n            const updates: string[] = [];\r\n            const params: any[] = [];\r\n\r\n            if (name) { updates.push('name = ?'); params.push(name); }\r\n            if (description !== undefined) { updates.push('description = ?'); params.push(description); }\r\n\r\n            if (updates.length > 0) {\r\n                await db.prepare(`UPDATE roles SET ${updates.join(', ')} WHERE id = ?`).bind(...params, id).run();\r\n            }\r\n\r\n            // Update permissions if provided\r\n            if (permissions !== undefined && Array.isArray(permissions)) {\r\n                // Transaction-like: delete all, then insert new\r\n                // D1 doesn't support full transactions in HTTP API easily, but batch is atomic\r\n                const deleteStmt = db.prepare('DELETE FROM role_permissions WHERE role_id = ?').bind(id);\r\n                const insertStmt = db.prepare('INSERT INTO role_permissions (role_id, permission_id) VALUES (?, ?)');\r\n\r\n                const batch = [deleteStmt, ...permissions.map((permId: string) => insertStmt.bind(id, permId))];\r\n                await db.batch(batch);\r\n            }\r\n\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to update role', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * DELETE /api/v1/roles/:id\r\n     * Delete a role (non-system only)\r\n     */\r\n    roles.delete('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n\r\n        try {\r\n            const role = await db.prepare('SELECT is_system FROM roles WHERE id = ?').bind(id).first();\r\n\r\n            if (!role) {\r\n                return c.json({ error: 'Role not found' }, 404);\r\n            }\r\n\r\n            if (role.is_system) {\r\n                return c.json({ error: 'Cannot delete system role' }, 403);\r\n            }\r\n\r\n            // Delete associations first\r\n            await db.prepare('DELETE FROM role_permissions WHERE role_id = ?').bind(id).run();\r\n            // TODO: Handle users assigned to this role? separate check needed?\r\n\r\n            await db.prepare('DELETE FROM roles WHERE id = ?').bind(id).run();\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to delete role', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    // ============================================================================\r\n    // INVITATION ROUTES - /api/v1/invitations\r\n    // ============================================================================\r\n\r\n    /**\r\n     * GET /api/v1/invitations\r\n     * List invitations\r\n     */\r\n    invitations.get('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const tenantId = c.req.query('tenantId');\r\n        const status = c.req.query('status');\r\n\r\n        try {\r\n            let query = 'SELECT id, email, role_id, token, status, invited_by, expires_at, accepted_at, created_at, tenant_id FROM invitations WHERE 1=1';\r\n            const params: any[] = [];\r\n\r\n            if (tenantId) {\r\n                query += ' AND tenant_id = ?';\r\n                params.push(tenantId);\r\n            }\r\n\r\n            if (status) {\r\n                query += ' AND status = ?';\r\n                params.push(status);\r\n            }\r\n\r\n            query += ' ORDER BY created_at DESC';\r\n\r\n            const results = await db.prepare(query).bind(...params).all();\r\n            return c.json(results.results);\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to fetch invitations', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/invitations\r\n     * Send invitation\r\n     */\r\n    invitations.post('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const body = await c.req.json();\r\n        const { email, roleId, tenantId, invitedBy } = body;\r\n\r\n        if (!email) {\r\n            return c.json({ error: 'Email is required' }, 400);\r\n        }\r\n\r\n        const id = crypto.randomUUID();\r\n        const token = crypto.randomUUID();\r\n        const expiresAt = Math.floor(Date.now() / 1000) + (7 * 24 * 60 * 60); // 7 days\r\n\r\n        try {\r\n            // Check Limits\r\n            const limitCheck = await checkUserLimit(db, tenantId || 'default');\r\n            if (!limitCheck.allowed) {\r\n                return c.json({ error: limitCheck.error }, 403);\r\n            }\r\n\r\n            await db.prepare(`\r\n        INSERT INTO invitations (id, tenant_id, email, role_id, token, status, invited_by, expires_at, created_at)\r\n        VALUES (?, ?, ?, ?, ?, 'pending', ?, ?, ?)\r\n      `).bind(id, tenantId || 'default', email, roleId, token, invitedBy, expiresAt, Math.floor(Date.now() / 1000)).run();\r\n\r\n            return c.json({ id, email, token, expiresAt, status: 'pending' }, 201);\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to send invitation', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/invitations/:id/resend\r\n     * Resend invitation\r\n     */\r\n    invitations.post('/:id/resend', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n\r\n        try {\r\n            const newToken = crypto.randomUUID();\r\n            const expiresAt = Math.floor(Date.now() / 1000) + (7 * 24 * 60 * 60);\r\n\r\n            await db.prepare('UPDATE invitations SET token = ?, expires_at = ?, status = ? WHERE id = ?')\r\n                .bind(newToken, expiresAt, 'pending', id).run();\r\n\r\n            return c.json({ success: true, token: newToken, expiresAt });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to resend invitation', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * DELETE /api/v1/invitations/:id\r\n     * Cancel invitation\r\n     */\r\n    invitations.delete('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n\r\n        try {\r\n            await db.prepare('UPDATE invitations SET status = ? WHERE id = ?').bind('cancelled', id).run();\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to cancel invitation', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    // Mount routes\r\n    app.route('/api/v1/users', users);\r\n    app.route('/api/v1/roles', roles);\r\n    app.route('/api/v1/invitations', invitations);\r\n    app.route('/api/v1/permissions', permissions);\r\n}\r\n", "import type { SettingSection } from '@reactpress/core-registry';\r\n\r\n/**\r\n * Users module settings section\r\n * Controls user management behavior per tenant\r\n */\r\nexport const usersSettingsSection: SettingSection = {\r\n    id: 'users',\r\n    label: 'Users & Permissions',\r\n    icon: 'Users',\r\n    order: 25,\r\n    availableForTenants: true,\r\n    requiredPermission: 'settings.users.manage',\r\n\r\n    fields: [\r\n        // ============================================================\r\n        // ADMIN UI\r\n        // ============================================================\r\n        {\r\n            key: 'users.seedData.generate',\r\n            label: 'Generate Default Users',\r\n            type: 'button',\r\n            description: 'Automatically creates a standard set of users (Admin, Manager, Editor, Viewer, User) for every existing tenant. This is useful for initial setup or restoring standard access levels.',\r\n            defaultValue: null,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n            actionUrl: '/api/v1/users/seed',\r\n            actionMethod: 'POST',\r\n            actionLabel: 'Generate Now',\r\n        },\r\n\r\n        // ============================================================\r\n        // GENERAL SETTINGS\r\n        // ============================================================\r\n        {\r\n            key: 'users.defaultRole',\r\n            label: 'Default Role for New Users',\r\n            type: 'select',\r\n            description: 'Role assigned to new users by default',\r\n            defaultValue: 'viewer',\r\n            options: [\r\n                { label: 'Viewer', value: 'viewer' },\r\n                { label: 'Editor', value: 'editor' },\r\n                { label: 'Admin', value: 'admin' },\r\n            ],\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'users.maxUsersPerTenant',\r\n            label: 'Max Users',\r\n            type: 'number',\r\n            description: 'Maximum users allowed for this tenant (0 = unlimited)',\r\n            defaultValue: 0,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'users.invitationExpiryDays',\r\n            label: 'Invitation Expiry (Days)',\r\n            type: 'number',\r\n            description: 'How long invitation links remain valid',\r\n            defaultValue: 7,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'users.allowInviteByNonAdmin',\r\n            label: 'Allow Non-Admins to Invite',\r\n            type: 'boolean',\r\n            description: 'Editors can invite new users',\r\n            defaultValue: false,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'users.requirePhoneNumber',\r\n            label: 'Require Phone Number',\r\n            type: 'boolean',\r\n            description: 'Make phone number a required field',\r\n            defaultValue: false,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'users.allowAvatarUpload',\r\n            label: 'Allow Avatar Upload',\r\n            type: 'boolean',\r\n            description: 'Users can upload profile pictures',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'users.allowDataExport',\r\n            label: 'Allow Data Export',\r\n            type: 'boolean',\r\n            description: 'Users can export their personal data (GDPR)',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'users.allowAccountDeletion',\r\n            label: 'Allow Account Deletion',\r\n            type: 'boolean',\r\n            description: 'Users can request account deletion (GDPR)',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'General',\r\n        },\r\n\r\n        // ============================================================\r\n        // ADMIN UI SETTINGS\r\n        // Controls what features are visible in the Users management page\r\n        // ============================================================\r\n        {\r\n            key: 'users.ui.showStatsCards',\r\n            label: 'Show Stats Cards',\r\n            type: 'boolean',\r\n            description: 'Display summary stats (Total, Active, Pending, Roles) above the table',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'users.ui.showSearch',\r\n            label: 'Enable Search',\r\n            type: 'boolean',\r\n            description: 'Show search input for filtering users',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'users.ui.showExport',\r\n            label: 'Enable Export',\r\n            type: 'boolean',\r\n            description: 'Allow exporting user data',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'users.ui.showImport',\r\n            label: 'Enable Import',\r\n            type: 'boolean',\r\n            description: 'Allow bulk user import',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'users.ui.showBulkActions',\r\n            label: 'Enable Bulk Actions',\r\n            type: 'boolean',\r\n            description: 'Allow bulk role change, suspend, delete',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'users.ui.allowInvite',\r\n            label: 'Allow User Invites',\r\n            type: 'boolean',\r\n            description: 'Enable invite user workflow',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'users.ui.showPagination',\r\n            label: 'Show Pagination',\r\n            type: 'boolean',\r\n            description: 'Show pagination controls with page size selector',\r\n            defaultValue: true,\r\n            scope: 'tenant',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'users.ui.defaultPageSize',\r\n            label: 'Default Page Size',\r\n            type: 'select',\r\n            description: 'Number of users per page',\r\n            defaultValue: '10',\r\n            options: [\r\n                { label: '10', value: '10' },\r\n                { label: '25', value: '25' },\r\n                { label: '50', value: '50' },\r\n                { label: '100', value: '100' },\r\n            ],\r\n            scope: 'tenant',\r\n            group: 'Admin UI',\r\n        },\r\n\r\n        // ============================================================\r\n        // VISIBLE COLUMNS\r\n        // =================================== =========================\r\n        { key: 'users.ui.columns.showId', label: 'ID', type: 'boolean', defaultValue: false, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showUsername', label: 'Username', type: 'boolean', defaultValue: true, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showEmail', label: 'Email', type: 'boolean', defaultValue: true, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showFullName', label: 'Full Name', type: 'boolean', defaultValue: true, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showRole', label: 'Role', type: 'boolean', defaultValue: true, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showStatus', label: 'Status', type: 'boolean', defaultValue: true, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showLastLogin', label: 'Last Login', type: 'boolean', defaultValue: true, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showCreatedAt', label: 'Created', type: 'boolean', defaultValue: true, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showUpdatedAt', label: 'Updated', type: 'boolean', defaultValue: false, scope: 'tenant', group: 'Display Columns' },\r\n        { key: 'users.ui.columns.showCreatedBy', label: 'Created By', type: 'boolean', defaultValue: false, scope: 'tenant', group: 'Display Columns' },\r\n\r\n        // ============================================================\r\n        // FILTER CONFIGURATION\r\n        // JSON structure for dynamic filter settings per column\r\n        // ============================================================\r\n        {\r\n            key: 'users.ui.filterConfig',\r\n            label: 'Filter Configuration',\r\n            type: 'filterConfig',\r\n            description: 'Configure which columns appear as filters and how they behave',\r\n            scope: 'tenant',\r\n            group: 'Users Filters',\r\n            defaultValue: {\r\n                username: {\r\n                    enabled: false,\r\n                    type: 'text',\r\n                    label: 'Username',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                email: {\r\n                    enabled: false,\r\n                    type: 'text',\r\n                    label: 'Email',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                fullName: {\r\n                    enabled: false,\r\n                    type: 'text',\r\n                    label: 'Full Name',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                role: {\r\n                    enabled: true,\r\n                    type: 'select',\r\n                    label: 'Role',\r\n                    options: 'auto',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                status: {\r\n                    enabled: true,\r\n                    type: 'select',\r\n                    label: 'Status',\r\n                    options: 'auto',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                createdAt: {\r\n                    enabled: false,\r\n                    type: 'date-range',\r\n                    label: 'Created Date',\r\n                    sortOptions: ['newest', 'oldest'],\r\n                    defaultSort: 'newest'\r\n                },\r\n                lastLogin: {\r\n                    enabled: false,\r\n                    type: 'date-range',\r\n                    label: 'Last Login',\r\n                    sortOptions: ['newest', 'oldest'],\r\n                    defaultSort: 'newest'\r\n                },\r\n                createdBy: {\r\n                    enabled: false,\r\n                    type: 'text',\r\n                    label: 'Created By',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                }\r\n            }\r\n        },\r\n\r\n    ],\r\n};\r\n", "/**\r\n * Users Module Configuration\r\n * This is the single source of truth for module metadata\r\n */\r\nexport const moduleConfig = {\r\n    id: 'users',\r\n    name: 'Users',\r\n    description: 'User management, roles, permissions, and invitations',\r\n    longDescription: 'Full user lifecycle management including RBAC, team invitations, and GDPR compliance features.',\r\n    icon: 'Users',\r\n    version: '1.0.0',\r\n    category: 'core' as const,\r\n    isCore: true,\r\n    features: [\r\n        'User CRUD',\r\n        'Role Management',\r\n        'Invitations',\r\n        'GDPR Export',\r\n        'User Profiles',\r\n    ],\r\n    dependencies: ['auth'],\r\n    tags: ['users', 'rbac', 'permissions'],\r\n    tables: ['users', 'roles', 'permissions', 'user_roles', 'role_permissions', 'invitations'],\r\n    permissions: [\r\n        'users.view',\r\n        'users.create',\r\n        'users.edit',\r\n        'users.delete',\r\n        'users.invite',\r\n        'roles.view',\r\n        'roles.manage',\r\n    ],\r\n};\r\n\r\nexport type ModuleConfig = typeof moduleConfig;\r\n", "import { moduleRegistry, type ModuleConfig, ADMIN_ROUTES } from '@reactpress/core-registry';\r\nimport { registerUsersRoutes } from './routes/usersRoutes';\r\nimport { usersSettingsSection } from './settings/usersSettings';\r\n\r\n/**\r\n * Users Module Configuration\r\n * \r\n * This is a foundation module - always loaded for tenant management.\r\n * Handles user CRUD, roles, permissions, and invitations.\r\n */\r\nexport const usersModuleConfig: ModuleConfig = {\r\n    id: 'users',\r\n    name: 'Users',\r\n    version: '1.0.0',\r\n    description: 'User management, roles, and permissions',\r\n    category: 'core',\r\n    isCore: true,\r\n    features: ['User CRUD', 'Role Management', 'Permissions', 'Invitations'],\r\n    dependencies: ['auth'],\r\n    tags: ['users', 'roles', 'permissions', 'access'],\r\n    tables: ['users', 'roles', 'permissions', 'user_roles', 'role_permissions', 'invitations'],\r\n\r\n    routes: registerUsersRoutes,\r\n\r\n    menu: {\r\n        label: 'Users',\r\n        icon: 'Users',\r\n        href: `${ADMIN_ROUTES.USERS}`,\r\n        order: 20,\r\n        badge: {\r\n            type: 'count',\r\n            getValue: async () => {\r\n                // Would return pending invitations count\r\n                return undefined;\r\n            },\r\n        },\r\n    },\r\n\r\n    availability: {\r\n        requiresPlatformAdmin: false,\r\n        availableForTenants: true,\r\n        defaultEnabled: true, // Foundation module\r\n    },\r\n\r\n    permissions: [\r\n        'users.view',\r\n        'users.create',\r\n        'users.update',\r\n        'users.delete',\r\n        'users.invite',\r\n        'roles.view',\r\n        'roles.manage',\r\n        'permissions.manage',\r\n        'settings.users.manage',\r\n    ],\r\n\r\n    requiredPermission: 'users.view',\r\n\r\n    settings: usersSettingsSection,\r\n\r\n\r\n    // Breeze lifecycle hooks\r\n    onProvision: async (tenantId, db) => {\r\n        console.log(`[Users] Provisioning for tenant: ${tenantId}`);\r\n        // Create default roles for new tenant\r\n        const defaultRoles = [\r\n            { slug: 'admin', name: 'Administrator', description: 'Full access to all features' },\r\n            { slug: 'editor', name: 'Editor', description: 'Can create and edit content' },\r\n            { slug: 'viewer', name: 'Viewer', description: 'Read-only access' },\r\n        ];\r\n\r\n        for (const role of defaultRoles) {\r\n            try {\r\n                await db.prepare(`\r\n          INSERT INTO roles (id, tenant_id, name, slug, description, is_system, created_at)\r\n          VALUES (?, ?, ?, ?, ?, 1, ?)\r\n        `).bind(\r\n                    crypto.randomUUID(),\r\n                    tenantId,\r\n                    role.name,\r\n                    role.slug,\r\n                    role.description,\r\n                    Math.floor(Date.now() / 1000)\r\n                ).run();\r\n            } catch (err) {\r\n                console.log(`Role ${role.slug} may already exist for tenant ${tenantId}`);\r\n            }\r\n        }\r\n    },\r\n\r\n    onEnable: async (tenantId, db) => {\r\n        console.log(`[Users] Enabled for tenant: ${tenantId}`);\r\n    },\r\n    apiRoutes: [\r\n        { method: 'GET', path: '/api/v1/users', description: 'List users', requiredPermission: 'users.view' },\r\n        { method: 'POST', path: '/api/v1/users', description: 'Create user', requiredPermission: 'users.create' },\r\n        { method: 'GET', path: '/api/v1/users/:id', description: 'Get user details', requiredPermission: 'users.view' },\r\n        { method: 'PUT', path: '/api/v1/users/:id', description: 'Update user', requiredPermission: 'users.edit' },\r\n        { method: 'DELETE', path: '/api/v1/users/:id', description: 'Delete user', requiredPermission: 'users.delete' },\r\n        { method: 'POST', path: '/api/v1/users/invite', description: 'Invite new user', requiredPermission: 'users.invite' },\r\n        { method: 'GET', path: '/api/v1/roles', description: 'List roles', requiredPermission: 'roles.view' },\r\n        { method: 'POST', path: '/api/v1/roles', description: 'Create role', requiredPermission: 'roles.create' },\r\n        { method: 'GET', path: '/api/v1/permissions', description: 'List permissions', requiredPermission: 'roles.view' },\r\n    ],\r\n    adminRoutes: [\r\n        { path: '/hpanel/users', component: 'UsersPage', requiredPermission: 'users.view' },\r\n        { path: '/hpanel/users/roles', component: 'RolesPage', requiredPermission: 'roles.view' },\r\n    ],\r\n    frontendRoutes: [],\r\n};\r\n\r\n// Auto-register on import\r\nmoduleRegistry.register(usersModuleConfig);\r\n\r\n// Re-export\r\nexport { registerUsersRoutes } from './routes/usersRoutes';\r\nexport { usersSettingsSection } from './settings/usersSettings';\r\nexport { moduleConfig } from './module.config';\r\n", "import { Hono } from 'hono';\r\n\r\n/**\r\n * Tenants module routes\r\n * Full lifecycle management for multi-tenant platform\r\n */\r\nexport function registerTenantsRoutes(app: Hono<any>): void {\r\n    const tenants = new Hono<{ Bindings: any; Variables: any }>();\r\n\r\n    // ============================================================================\r\n    // TENANT ROUTES - /api/v1/tenants\r\n    // ============================================================================\r\n\r\n    /**\r\n     * GET /api/v1/tenants\r\n     * List all tenants (platform admin only)\r\n     */\r\n    tenants.get('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const status = c.req.query('status');\r\n        const search = c.req.query('search');\r\n\r\n        try {\r\n            let query = `\r\n                SELECT t.id, t.name, t.slug, t.status, td.domain, t.plan_name, t.created_at\r\n                FROM tenants t\r\n                LEFT JOIN tenant_domains td ON t.id = td.tenant_id AND td.is_primary = 1\r\n                WHERE 1=1\r\n            `;\r\n            const params: any[] = [];\r\n\r\n            if (status && status !== 'all') {\r\n                query += ' AND t.status = ?';\r\n                params.push(status);\r\n            }\r\n\r\n            if (search) {\r\n                query += ' AND (t.name LIKE ? OR t.slug LIKE ? OR td.domain LIKE ?)';\r\n                const searchTerm = `%${search}%`;\r\n                params.push(searchTerm, searchTerm, searchTerm);\r\n            }\r\n\r\n            query += ' ORDER BY t.name ASC';\r\n\r\n            const results = await db.prepare(query).bind(...params).all();\r\n            return c.json(results.results || []);\r\n        } catch (error: any) {\r\n            console.error('Tenants fetch error:', error);\r\n            return c.json({ error: 'Failed to fetch tenants', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * GET /api/v1/tenants/stats\r\n     * Get platform-wide tenant statistics\r\n     */\r\n    tenants.get('/stats', async (c) => {\r\n        const db = c.env.DB;\r\n\r\n        try {\r\n            const stats = await db.prepare(`\r\n        SELECT \r\n          COUNT(*) as total,\r\n          SUM(CASE WHEN status = 'active' THEN 1 ELSE 0 END) as active,\r\n          SUM(CASE WHEN status = 'trial' THEN 1 ELSE 0 END) as trial,\r\n          SUM(CASE WHEN status = 'suspended' THEN 1 ELSE 0 END) as suspended,\r\n          SUM(mrr) as total_mrr,\r\n          SUM(current_users) as total_users\r\n        FROM tenants\r\n        WHERE deleted_at IS NULL\r\n      `).first();\r\n\r\n            return c.json(stats);\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to fetch stats', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * GET /api/v1/tenants/:id\r\n     * Get single tenant details\r\n     */\r\n    tenants.get('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n\r\n        try {\r\n            const tenant = await db.prepare(`\r\n        SELECT * FROM tenants WHERE id = ? AND deleted_at IS NULL\r\n      `).bind(id).first();\r\n\r\n            if (!tenant) {\r\n                return c.json({ error: 'Tenant not found' }, 404);\r\n            }\r\n\r\n            return c.json(tenant);\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to fetch tenant', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/tenants\r\n     * Create a new tenant (provision)\r\n     */\r\n    tenants.post('/', async (c) => {\r\n        const db = c.env.DB;\r\n        const kv = c.env.TENANT_MANIFESTS;\r\n        const body = await c.req.json();\r\n\r\n        const {\r\n            name,\r\n            slug,\r\n            domain,\r\n            ownerEmail,\r\n            planName = 'free',\r\n            maxUsers = 5,\r\n            maxStorage = 1,\r\n            status = 'trial',\r\n        } = body;\r\n\r\n        if (!name || !slug) {\r\n            return c.json({ error: 'Name and slug are required' }, 400);\r\n        }\r\n\r\n        const id = crypto.randomUUID();\r\n        const now = Math.floor(Date.now() / 1000);\r\n        const trialEndsAt = status === 'trial' ? now + (14 * 24 * 60 * 60) : null;\r\n\r\n        try {\r\n            // Insert tenant into the database with all actual columns\r\n            await db.prepare(`\r\n                INSERT INTO tenants (\r\n                    id, name, slug, domain, status, owner_email, \r\n                    plan_name, max_users, max_storage, trial_ends_at,\r\n                    created_at, updated_at, config\r\n                ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n            `).bind(\r\n                id, name, slug, domain || null, status, ownerEmail || null,\r\n                planName, maxUsers, maxStorage, trialEndsAt,\r\n                now, now, JSON.stringify({})\r\n            ).run();\r\n\r\n            // Add domain to lookup table\r\n            if (domain) {\r\n                await db.prepare(`\r\n                    INSERT INTO tenant_domains (id, tenant_id, domain, is_primary, created_at)\r\n                    VALUES (?, ?, ?, 1, ?)\r\n                `).bind(crypto.randomUUID(), id, domain, now).run();\r\n\r\n                // Update KV manifest for fast domain lookup\r\n                if (kv) {\r\n                    const manifest = await kv.get('tenant_manifest', 'json') || {};\r\n                    manifest[domain] = { id, slug, name };\r\n                    await kv.put('tenant_manifest', JSON.stringify(manifest));\r\n                }\r\n            }\r\n\r\n            return c.json({\r\n                id,\r\n                name,\r\n                slug,\r\n                domain,\r\n                status,\r\n                planName,\r\n                trialEndsAt\r\n            }, 201);\r\n        } catch (error: any) {\r\n            if (error.message?.includes('UNIQUE constraint failed')) {\r\n                return c.json({ error: 'Slug or domain already exists' }, 409);\r\n            }\r\n            return c.json({ error: 'Failed to create tenant', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * PATCH /api/v1/tenants/:id\r\n     * Update a tenant\r\n     */\r\n    tenants.patch('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const kv = c.env.TENANT_MANIFESTS;\r\n        const id = c.req.param('id');\r\n        const body = await c.req.json();\r\n\r\n        // These columns now all exist in the database\r\n        const allowedFields = [\r\n            'name', 'slug', 'domain', 'status', 'owner_email', 'billing_email',\r\n            'plan_name', 'plan_id', 'max_users', 'max_storage', 'max_api_calls',\r\n            'industry', 'company_size', 'notes', 'data_region',\r\n            'encryption_enabled', 'api_access_enabled'\r\n        ];\r\n\r\n        const updates: string[] = [];\r\n        const params: any[] = [];\r\n\r\n        for (const field of allowedFields) {\r\n            const camelCase = field.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\r\n            if (body[camelCase] !== undefined) {\r\n                updates.push(`${field} = ?`);\r\n                params.push(body[camelCase]);\r\n            } else if (body[field] !== undefined) {\r\n                updates.push(`${field} = ?`);\r\n                params.push(body[field]);\r\n            }\r\n        }\r\n\r\n        if (updates.length === 0) {\r\n            return c.json({ error: 'No fields to update' }, 400);\r\n        }\r\n\r\n        try {\r\n            // Update main tenant fields\r\n            updates.push('updated_at = ?');\r\n            params.push(Math.floor(Date.now() / 1000));\r\n            params.push(id);\r\n            await db.prepare(`UPDATE tenants SET ${updates.join(', ')} WHERE id = ?`).bind(...params).run();\r\n\r\n            // Handle domain update in KV if domain was updated\r\n            const newDomain = body.domain;\r\n            if (newDomain !== undefined) {\r\n                // Get current primary domain for KV cleanup\r\n                const currentDomain = await db.prepare(\r\n                    'SELECT domain FROM tenant_domains WHERE tenant_id = ? AND is_primary = 1'\r\n                ).bind(id).first();\r\n\r\n                if (currentDomain?.domain && currentDomain.domain !== newDomain) {\r\n                    // Delete old KV entry\r\n                    if (kv) {\r\n                        const manifest = await kv.get('tenant_manifest', 'json') || {};\r\n                        delete manifest[currentDomain.domain];\r\n                        await kv.put('tenant_manifest', JSON.stringify(manifest));\r\n                    }\r\n                }\r\n\r\n                // Delete old primary domain\r\n                await db.prepare(\r\n                    'DELETE FROM tenant_domains WHERE tenant_id = ? AND is_primary = 1'\r\n                ).bind(id).run();\r\n\r\n                // Insert new primary domain if provided\r\n                if (newDomain) {\r\n                    await db.prepare(`\r\n                        INSERT INTO tenant_domains (id, tenant_id, domain, is_primary, created_at)\r\n                        VALUES (?, ?, ?, 1, ?)\r\n                    `).bind(crypto.randomUUID(), id, newDomain, Math.floor(Date.now() / 1000)).run();\r\n\r\n                    // Update KV manifest\r\n                    if (kv) {\r\n                        const tenant = await db.prepare('SELECT name, slug FROM tenants WHERE id = ?').bind(id).first();\r\n                        if (tenant) {\r\n                            const manifest = await kv.get('tenant_manifest', 'json') || {};\r\n                            manifest[newDomain] = { id, slug: tenant.slug, name: tenant.name };\r\n                            await kv.put('tenant_manifest', JSON.stringify(manifest));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to update tenant', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/tenants/:id/suspend\r\n     * Suspend a tenant\r\n     */\r\n    tenants.post('/:id/suspend', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n        const { reason } = await c.req.json();\r\n        const now = Math.floor(Date.now() / 1000);\r\n\r\n        try {\r\n            await db.prepare(`\r\n                UPDATE tenants \r\n                SET status = 'suspended', suspended_at = ?, suspended_reason = ?, updated_at = ?\r\n                WHERE id = ?\r\n            `).bind(now, reason || 'Suspended by administrator', now, id).run();\r\n\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to suspend tenant', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/tenants/:id/reactivate\r\n     * Reactivate a suspended tenant\r\n     */\r\n    tenants.post('/:id/reactivate', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n        const now = Math.floor(Date.now() / 1000);\r\n\r\n        try {\r\n            await db.prepare(`\r\n                UPDATE tenants \r\n                SET status = 'active', suspended_at = NULL, suspended_reason = NULL, updated_at = ?\r\n                WHERE id = ?\r\n            `).bind(now, id).run();\r\n\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to reactivate tenant', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * DELETE /api/v1/tenants/:id\r\n     * Soft delete (archive) a tenant or permanently delete\r\n     */\r\n    tenants.delete('/:id', async (c) => {\r\n        const db = c.env.DB;\r\n        const kv = c.env.TENANT_MANIFESTS;\r\n        const id = c.req.param('id');\r\n        const permanent = c.req.query('permanent') === 'true';\r\n        const now = Math.floor(Date.now() / 1000);\r\n\r\n        try {\r\n            // Get tenant domains for KV cleanup\r\n            const domains = await db.prepare(\r\n                'SELECT domain FROM tenant_domains WHERE tenant_id = ?'\r\n            ).bind(id).all();\r\n\r\n            if (permanent) {\r\n                // Hard delete from database\r\n                await db.prepare('DELETE FROM tenant_domains WHERE tenant_id = ?').bind(id).run();\r\n                await db.prepare('DELETE FROM tenants WHERE id = ?').bind(id).run();\r\n            } else {\r\n                // Soft delete: just update status to 'archived'\r\n                await db.prepare(`\r\n                    UPDATE tenants \r\n                    SET status = 'archived', deleted_at = ?, updated_at = ?\r\n                    WHERE id = ?\r\n                `).bind(now, now, id).run();\r\n            }\r\n\r\n            // Cleanup KV for all domains\r\n            if (kv && domains.results) {\r\n                for (const row of (domains.results as any[])) {\r\n                    if (row.domain) {\r\n                        await kv.delete(`tenant:${row.domain}`);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return c.json({ success: true, permanent });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to delete tenant', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * GET /api/v1/tenants/:id/usage\r\n     * Get tenant usage statistics\r\n     */\r\n    tenants.get('/:id/usage', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n\r\n        try {\r\n            const usage = await db.prepare(`\r\n        SELECT \r\n          current_users, max_users,\r\n          storage_used, max_storage,\r\n          api_calls_this_month, max_api_calls\r\n        FROM tenants WHERE id = ?\r\n      `).bind(id).first();\r\n\r\n            if (!usage) {\r\n                return c.json({ error: 'Tenant not found' }, 404);\r\n            }\r\n\r\n            return c.json({\r\n                users: {\r\n                    current: usage.current_users,\r\n                    max: usage.max_users,\r\n                    percentage: usage.max_users > 0 ? Math.round((usage.current_users / usage.max_users) * 100) : 0,\r\n                },\r\n                storage: {\r\n                    current: usage.storage_used,\r\n                    max: usage.max_storage,\r\n                    unit: 'GB',\r\n                    percentage: usage.max_storage > 0 ? Math.round((usage.storage_used / usage.max_storage) * 100) : 0,\r\n                },\r\n                apiCalls: {\r\n                    current: usage.api_calls_this_month,\r\n                    max: usage.max_api_calls,\r\n                    percentage: usage.max_api_calls > 0 ? Math.round((usage.api_calls_this_month / usage.max_api_calls) * 100) : 0,\r\n                },\r\n            });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to fetch usage', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * GET /api/v1/tenants/:id/modules\r\n     * Get enabled modules for tenant\r\n     */\r\n    tenants.get('/:id/modules', async (c) => {\r\n        const db = c.env.DB;\r\n        const id = c.req.param('id');\r\n\r\n        try {\r\n            const modules = await db.prepare(`\r\n        SELECT module_id, enabled, enabled_at, enabled_by, settings\r\n        FROM module_status\r\n        WHERE tenant_id = ?\r\n      `).bind(id).all();\r\n\r\n            return c.json(modules.results);\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to fetch modules', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/tenants/:id/modules/:moduleId/enable\r\n     * Enable a module for tenant\r\n     */\r\n    tenants.post('/:id/modules/:moduleId/enable', async (c) => {\r\n        const db = c.env.DB;\r\n        const tenantId = c.req.param('id');\r\n        const moduleId = c.req.param('moduleId');\r\n        const { enabledBy } = await c.req.json();\r\n\r\n        try {\r\n            await db.prepare(`\r\n        INSERT INTO module_status (id, module_id, tenant_id, enabled, enabled_at, enabled_by, created_at)\r\n        VALUES (?, ?, ?, 1, ?, ?, ?)\r\n        ON CONFLICT(module_id, tenant_id) DO UPDATE SET enabled = 1, enabled_at = ?, enabled_by = ?, updated_at = ?\r\n      `).bind(\r\n                crypto.randomUUID(),\r\n                moduleId,\r\n                tenantId,\r\n                Math.floor(Date.now() / 1000),\r\n                enabledBy,\r\n                Math.floor(Date.now() / 1000),\r\n                Math.floor(Date.now() / 1000),\r\n                enabledBy,\r\n                Math.floor(Date.now() / 1000)\r\n            ).run();\r\n\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to enable module', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * POST /api/v1/tenants/:id/modules/:moduleId/disable\r\n     * Disable a module for tenant\r\n     */\r\n    tenants.post('/:id/modules/:moduleId/disable', async (c) => {\r\n        const db = c.env.DB;\r\n        const tenantId = c.req.param('id');\r\n        const moduleId = c.req.param('moduleId');\r\n\r\n        try {\r\n            await db.prepare(`\r\n        UPDATE module_status SET enabled = 0, updated_at = ?\r\n        WHERE module_id = ? AND tenant_id = ?\r\n      `).bind(Math.floor(Date.now() / 1000), moduleId, tenantId).run();\r\n\r\n            return c.json({ success: true });\r\n        } catch (error: any) {\r\n            return c.json({ error: 'Failed to disable module', message: error.message }, 500);\r\n        }\r\n    });\r\n\r\n    // Mount routes\r\n    app.route('/api/v1/tenants', tenants);\r\n}\r\n", "import type { SettingSection } from '@reactpress/core-registry';\r\n\r\n/**\r\n * Tenants module settings section\r\n * Platform-level settings for multi-tenancy (super admin only)\r\n */\r\nexport const tenantsSettingsSection: SettingSection = {\r\n    id: 'tenants',\r\n    label: 'Multi-Tenancy',\r\n    icon: 'Building2',\r\n    order: 10,\r\n    availableForTenants: false, // Platform admin only\r\n    requiredPermission: 'tenants.manage',\r\n\r\n    fields: [\r\n        // ============================================================\r\n        // GENERAL SETTINGS\r\n        // ============================================================\r\n        {\r\n            key: 'tenants.registrationEnabled',\r\n            label: 'Enable Tenant Registration',\r\n            type: 'boolean',\r\n            description: 'Allow new tenants to register',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'General',\r\n        },\r\n        {\r\n            key: 'tenants.requireBusinessEmail',\r\n            label: 'Require Business Email',\r\n            type: 'boolean',\r\n            description: 'Block registration from free email providers (gmail, yahoo, etc.)',\r\n            defaultValue: false,\r\n            scope: 'platform',\r\n            group: 'General',\r\n        },\r\n\r\n        // ============================================================\r\n        // ADMIN UI SETTINGS\r\n        // Controls what features are visible in the Tenants management page\r\n        // ============================================================\r\n        {\r\n            key: 'tenants.ui.showStatsCards',\r\n            label: 'Show Stats Cards',\r\n            type: 'boolean',\r\n            description: 'Display summary stats (Total, Active, Trial, Plans) above the table',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'tenants.ui.showSearch',\r\n            label: 'Enable Search',\r\n            type: 'boolean',\r\n            description: 'Show search input for filtering tenants',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'tenants.ui.showExportCSV',\r\n            label: 'Enable CSV Export',\r\n            type: 'boolean',\r\n            description: 'Allow exporting tenant data to CSV',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'tenants.ui.showBulkImport',\r\n            label: 'Enable Bulk Import',\r\n            type: 'boolean',\r\n            description: 'Allow bulk tenant creation via import',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'tenants.ui.showQuickActions',\r\n            label: 'Enable Quick Actions',\r\n            type: 'boolean',\r\n            description: 'Show quick actions dropdown (Edit, Clone, Suspend, etc.)',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'tenants.ui.allowClone',\r\n            label: 'Allow Tenant Cloning',\r\n            type: 'boolean',\r\n            description: 'Allow cloning tenants from the list view',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'tenants.ui.allowStatusChange',\r\n            label: 'Allow Status Changes',\r\n            type: 'boolean',\r\n            description: 'Allow changing tenant status (Suspend, Activate, Archive)',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'tenants.ui.showPagination',\r\n            label: 'Show Pagination',\r\n            type: 'boolean',\r\n            description: 'Show pagination controls with page size selector',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n        {\r\n            key: 'tenants.ui.defaultPageSize',\r\n            label: 'Default Page Size',\r\n            type: 'select',\r\n            description: 'Number of tenants per page',\r\n            defaultValue: '10',\r\n            options: [\r\n                { label: '10', value: '10' },\r\n                { label: '25', value: '25' },\r\n                { label: '50', value: '50' },\r\n                { label: '100', value: '100' },\r\n            ],\r\n            scope: 'platform',\r\n            group: 'Admin UI',\r\n        },\r\n\r\n        // ============================================================\r\n        // VISIBLE COLUMNS - ALL columns from tenants schema\r\n        // ============================================================\r\n        // Basic Info\r\n        { key: 'tenants.ui.columns.showId', label: 'ID', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showName', label: 'Name', type: 'boolean', defaultValue: true, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showSlug', label: 'Slug', type: 'boolean', defaultValue: true, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showDomain', label: 'Domain', type: 'boolean', defaultValue: true, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showStatus', label: 'Status', type: 'boolean', defaultValue: true, scope: 'platform', group: 'Display Columns' },\r\n        // Lifecycle\r\n        { key: 'tenants.ui.columns.showTrialEndsAt', label: 'Trial Ends', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showSuspendedAt', label: 'Suspended At', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showSuspendedReason', label: 'Suspended Reason', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        // Ownership\r\n        { key: 'tenants.ui.columns.showOwnerId', label: 'Owner ID', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showOwnerEmail', label: 'Owner Email', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showBillingEmail', label: 'Billing Email', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        // Subscription\r\n        { key: 'tenants.ui.columns.showPlanId', label: 'Plan ID', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showPlanName', label: 'Plan', type: 'boolean', defaultValue: true, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showBillingStatus', label: 'Billing Status', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showNextBillingDate', label: 'Next Billing', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showMrr', label: 'MRR', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        // Resource Limits\r\n        { key: 'tenants.ui.columns.showMaxUsers', label: 'Max Users', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showMaxStorage', label: 'Max Storage', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showMaxApiCalls', label: 'Max API Calls', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        // Real-time Usage\r\n        { key: 'tenants.ui.columns.showCurrentUsers', label: 'Current Users', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showStorageUsed', label: 'Storage Used', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showApiCallsThisMonth', label: 'API Calls (Month)', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        // Metadata\r\n        { key: 'tenants.ui.columns.showIndustry', label: 'Industry', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showCompanySize', label: 'Company Size', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showNotes', label: 'Notes', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showTags', label: 'Tags', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        // Audit\r\n        { key: 'tenants.ui.columns.showLastActivityAt', label: 'Last Activity', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showCreatedAt', label: 'Created', type: 'boolean', defaultValue: true, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showUpdatedAt', label: 'Updated', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n        { key: 'tenants.ui.columns.showCreatedBy', label: 'Created By', type: 'boolean', defaultValue: false, scope: 'platform', group: 'Display Columns' },\r\n\r\n        // ============================================================\r\n        // FILTER CONFIGURATION\r\n        // JSON structure for dynamic filter settings per column\r\n        // ============================================================\r\n        {\r\n            key: 'tenants.ui.filterConfig',\r\n            label: 'Filter Configuration',\r\n            type: 'filterConfig',\r\n            description: 'Configure which columns appear as filters and how they behave',\r\n            scope: 'platform',\r\n            group: 'Filters',\r\n            defaultValue: {\r\n                name: {\r\n                    enabled: false,\r\n                    type: 'text',\r\n                    label: 'Name',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                slug: {\r\n                    enabled: false,\r\n                    type: 'text',\r\n                    label: 'Slug',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                domain: {\r\n                    enabled: false,\r\n                    type: 'text',\r\n                    label: 'Domain',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                status: {\r\n                    enabled: true,\r\n                    type: 'select',\r\n                    label: 'Status',\r\n                    options: 'auto',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                planName: {\r\n                    enabled: true,\r\n                    type: 'select',\r\n                    label: 'Plan',\r\n                    options: 'auto',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                ownerEmail: {\r\n                    enabled: false,\r\n                    type: 'text',\r\n                    label: 'Owner',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                industry: {\r\n                    enabled: false,\r\n                    type: 'select',\r\n                    label: 'Industry',\r\n                    options: 'auto',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                companySize: {\r\n                    enabled: false,\r\n                    type: 'select',\r\n                    label: 'Company Size',\r\n                    options: 'auto',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                billingStatus: {\r\n                    enabled: false,\r\n                    type: 'select',\r\n                    label: 'Billing Status',\r\n                    options: 'auto',\r\n                    sortOptions: ['a-z', 'z-a'],\r\n                    defaultSort: 'a-z'\r\n                },\r\n                createdAt: {\r\n                    enabled: false,\r\n                    type: 'date-range',\r\n                    label: 'Created Date',\r\n                    sortOptions: ['newest', 'oldest'],\r\n                    defaultSort: 'newest'\r\n                },\r\n                trialEndsAt: {\r\n                    enabled: false,\r\n                    type: 'date-range',\r\n                    label: 'Trial End Date',\r\n                    sortOptions: ['newest', 'oldest'],\r\n                    defaultSort: 'newest'\r\n                },\r\n                tags: {\r\n                    enabled: false,\r\n                    type: 'multi-select',\r\n                    label: 'Tags',\r\n                    options: 'auto'\r\n                }\r\n            }\r\n        },\r\n\r\n        // ============================================================\r\n        // DEFAULT TENANT SETTINGS\r\n        // ============================================================\r\n        {\r\n            key: 'tenants.defaultPlan',\r\n            label: 'Default Plan',\r\n            type: 'select',\r\n            description: 'Plan assigned to new tenants',\r\n            defaultValue: 'free',\r\n            options: [\r\n                { label: 'Free', value: 'free' },\r\n                { label: 'Starter', value: 'starter' },\r\n                { label: 'Professional', value: 'professional' },\r\n                { label: 'Enterprise', value: 'enterprise' },\r\n            ],\r\n            scope: 'platform',\r\n            group: 'Defaults',\r\n        },\r\n        {\r\n            key: 'tenants.trialDays',\r\n            label: 'Trial Period (Days)',\r\n            type: 'number',\r\n            description: 'Number of days for trial period',\r\n            defaultValue: 14,\r\n            scope: 'platform',\r\n            group: 'Defaults',\r\n        },\r\n\r\n        // ============================================================\r\n        // LIMITS\r\n        // ============================================================\r\n        {\r\n            key: 'tenants.defaultMaxUsers',\r\n            label: 'Default Max Users',\r\n            type: 'number',\r\n            description: 'Default user limit for new tenants',\r\n            defaultValue: 5,\r\n            scope: 'platform',\r\n            group: 'Limits',\r\n        },\r\n        {\r\n            key: 'tenants.defaultMaxStorage',\r\n            label: 'Default Max Storage (GB)',\r\n            type: 'number',\r\n            description: 'Default storage limit for new tenants',\r\n            defaultValue: 1,\r\n            scope: 'platform',\r\n            group: 'Limits',\r\n        },\r\n        {\r\n            key: 'tenants.defaultMaxApiCalls',\r\n            label: 'Default API Call Limit',\r\n            type: 'number',\r\n            description: 'Default monthly API call limit',\r\n            defaultValue: 1000,\r\n            scope: 'platform',\r\n            group: 'Limits',\r\n        },\r\n\r\n        // ============================================================\r\n        // DOMAIN SETTINGS\r\n        // ============================================================\r\n        {\r\n            key: 'tenants.allowCustomDomains',\r\n            label: 'Allow Custom Domains',\r\n            type: 'boolean',\r\n            description: 'Tenants can use their own domains',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Domains',\r\n        },\r\n        {\r\n            key: 'tenants.requireDomainVerification',\r\n            label: 'Require Domain Verification',\r\n            type: 'boolean',\r\n            description: 'Custom domains must be verified via DNS',\r\n            defaultValue: true,\r\n            scope: 'platform',\r\n            group: 'Domains',\r\n        },\r\n\r\n        // ============================================================\r\n        // PROVISIONING\r\n        // ============================================================\r\n        {\r\n            key: 'tenants.autoProvisionModules',\r\n            label: 'Auto-Provision Modules',\r\n            type: 'text',\r\n            description: 'Comma-separated list of modules to enable for new tenants',\r\n            defaultValue: 'cms,seo',\r\n            scope: 'platform',\r\n            group: 'Provisioning',\r\n        },\r\n    ],\r\n};\r\n\r\n", "/**\r\n * Tenants Module Configuration\r\n * This is the single source of truth for module metadata\r\n */\r\nexport const moduleConfig = {\r\n    id: 'tenants',\r\n    name: 'Tenants',\r\n    description: 'Multi-tenant management and provisioning (Platform Admin)',\r\n    longDescription: 'Complete multi-tenancy infrastructure with provisioning, billing integration, and usage tracking.',\r\n    icon: 'Building2',\r\n    version: '1.0.0',\r\n    category: 'core' as const,\r\n    isCore: true,\r\n    features: [\r\n        'Tenant CRUD',\r\n        'Module Assignment',\r\n        'Usage Tracking',\r\n        'Billing Integration',\r\n        'Domain Management',\r\n    ],\r\n    dependencies: ['auth', 'users'],\r\n    tags: ['platform', 'multitenancy', 'tenants'],\r\n    tables: ['tenants', 'domains'],\r\n    permissions: [\r\n        'tenants.view',\r\n        'tenants.manage',\r\n        'tenants.modules.manage',\r\n        'tenants.usage.view',\r\n    ],\r\n};\r\n\r\nexport type ModuleConfig = typeof moduleConfig;\r\n", "import { moduleRegistry, type ModuleConfig, ADMIN_ROUTES } from '@reactpress/core-registry';\r\nimport { registerTenantsRoutes } from './routes/tenantsRoutes';\r\nimport { tenantsSettingsSection } from './settings/tenantsSettings';\r\n\r\n/**\r\n * Tenants Module Configuration\r\n * \r\n * This is a PLATFORM module - only visible to super admins.\r\n * Handles multi-tenancy, provisioning, and tenant lifecycle.\r\n */\r\nexport const tenantsModuleConfig: ModuleConfig = {\r\n    id: 'tenants',\r\n    name: 'Tenants',\r\n    version: '1.0.0',\r\n    description: 'Multi-tenant management and provisioning',\r\n    category: 'core',\r\n    isCore: true,\r\n    features: ['Tenant Provisioning', 'Domain Mapping', 'Resource Limits', 'Status Management'],\r\n    dependencies: ['auth', 'users'],\r\n    tags: ['multi-tenancy', 'platform', 'infrastructure'],\r\n    tables: ['tenants', 'tenant_domains'],\r\n\r\n    routes: registerTenantsRoutes,\r\n\r\n    menu: {\r\n        label: 'Tenants',\r\n        icon: 'Building2',\r\n        href: `${ADMIN_ROUTES.TENANTS}`,\r\n        order: 10,\r\n    },\r\n\r\n    availability: {\r\n        requiresPlatformAdmin: true, // Only super admin\r\n        availableForTenants: false,\r\n        defaultEnabled: false, // Not a tenant-level module\r\n    },\r\n\r\n    permissions: [\r\n        'tenants.view',\r\n        'tenants.create',\r\n        'tenants.update',\r\n        'tenants.delete',\r\n        'tenants.suspend',\r\n        'tenants.manage',\r\n        'tenants.modules.manage',\r\n    ],\r\n\r\n    requiredPermission: 'tenants.view',\r\n\r\n    settings: tenantsSettingsSection,\r\n\r\n\r\n    // Breeze lifecycle hooks\r\n    onProvision: async (tenantId, db) => {\r\n        console.log(`[Tenants] Platform provisioned`);\r\n        // Create default tenant if not exists\r\n    },\r\n    apiRoutes: [\r\n        { method: 'GET', path: '/api/v1/tenants', description: 'List tenants', requiredPermission: 'tenants.view' },\r\n        { method: 'POST', path: '/api/v1/tenants', description: 'Create tenant', requiredPermission: 'tenants.create' },\r\n        { method: 'GET', path: '/api/v1/tenants/:id', description: 'Get tenant details', requiredPermission: 'tenants.view' },\r\n        { method: 'PUT', path: '/api/v1/tenants/:id', description: 'Update tenant', requiredPermission: 'tenants.edit' },\r\n        { method: 'DELETE', path: '/api/v1/tenants/:id', description: 'Delete tenant', requiredPermission: 'tenants.delete' },\r\n        { method: 'GET', path: '/api/v1/tenants/domains', description: 'List tenant domains', requiredPermission: 'tenants.view' },\r\n        { method: 'POST', path: '/api/v1/tenants/:id/restore', description: 'Restore archived tenant', requiredPermission: 'tenants.restore' },\r\n    ],\r\n    adminRoutes: [\r\n        { path: '/hpanel/tenants', component: 'TenantsPage', requiredPermission: 'tenants.view' },\r\n        { path: '/hpanel/tenants/:id', component: 'TenantDetailPage', requiredPermission: 'tenants.view' },\r\n    ],\r\n    frontendRoutes: [],\r\n};\r\n\r\n// Auto-register on import\r\nmoduleRegistry.register(tenantsModuleConfig);\r\n\r\n// Re-export\r\nexport { registerTenantsRoutes } from './routes/tenantsRoutes';\r\nexport { tenantsSettingsSection } from './settings/tenantsSettings';\r\nexport { moduleConfig } from './module.config';\r\n", "import { moduleRegistry, type ModuleConfig } from '@reactpress/core-registry';\r\n\r\n/**\r\n * CMS Module Configuration\r\n */\r\nexport const cmsModuleConfig: ModuleConfig = {\r\n    id: 'cms',\r\n    name: 'Content Management',\r\n    version: '1.0.0',\r\n    description: 'Create and manage pages, blog posts, and media library',\r\n    category: 'features',\r\n    isCore: false,\r\n    features: ['Page Builder', 'Blog', 'Media Library', 'Navigation Menus'],\r\n    dependencies: [],\r\n    tags: ['content', 'cms', 'publishing'],\r\n\r\n    routes: (app) => {\r\n        // Routes will be implemented in cmsRoutes.ts\r\n    },\r\n\r\n    menu: {\r\n        label: 'CMS',\r\n        icon: 'FileText',\r\n        href: '/hpanel/cms',\r\n        order: 40,\r\n    },\r\n\r\n    availability: {\r\n        requiresPlatformAdmin: false,\r\n        availableForTenants: true,\r\n        defaultEnabled: false,\r\n    },\r\n\r\n    permissions: [\r\n        'cms.view',\r\n        'cms.create',\r\n        'cms.edit',\r\n        'cms.publish',\r\n        'cms.delete',\r\n        'media.manage'\r\n    ],\r\n\r\n    requiredPermission: 'cms.view',\r\n};\r\n\r\n// Auto-register on import\r\nmoduleRegistry.register(cmsModuleConfig);\r\n", "import { moduleRegistry, type ModuleConfig } from '@reactpress/core-registry';\r\n\r\n/**\r\n * CRM Module Configuration\r\n */\r\nexport const crmModuleConfig: ModuleConfig = {\r\n    id: 'crm',\r\n    name: 'Customer Relations',\r\n    version: '1.0.0',\r\n    description: 'Manage contacts, leads, and form submissions',\r\n    category: 'features',\r\n    isCore: false,\r\n    features: ['Contact Directory', 'Lead Tracking', 'Form Builder', 'Submission Exports'],\r\n    dependencies: [],\r\n    tags: ['marketing', 'crm', 'contacts'],\r\n\r\n    routes: (app) => {\r\n        // Routes will be implemented in crmRoutes.ts\r\n    },\r\n\r\n    menu: {\r\n        label: 'CRM',\r\n        icon: 'Contact',\r\n        href: '/hpanel/crm',\r\n        order: 50,\r\n    },\r\n\r\n    availability: {\r\n        requiresPlatformAdmin: false,\r\n        availableForTenants: true,\r\n        defaultEnabled: false,\r\n    },\r\n\r\n    permissions: [\r\n        'crm.view',\r\n        'crm.contacts.manage',\r\n        'crm.leads.manage',\r\n        'crm.forms.view',\r\n        'crm.forms.manage'\r\n    ],\r\n\r\n    requiredPermission: 'crm.view',\r\n};\r\n\r\n// Auto-register on import\r\nmoduleRegistry.register(crmModuleConfig);\r\n", "import { moduleRegistry, type ModuleConfig } from '@reactpress/core-registry';\r\n\r\n/**\r\n * SEO Module Configuration\r\n */\r\nexport const seoModuleConfig: ModuleConfig = {\r\n    id: 'seo',\r\n    name: 'SEO Optimizer',\r\n    version: '1.0.0',\r\n    description: 'Optimize content for search engines, manage sitemaps and robots.txt',\r\n    category: 'features',\r\n    isCore: false,\r\n    features: ['Sitemap Generation', 'Robots.txt Editor', 'SEO Audit', 'Meta Tag Management'],\r\n    dependencies: ['cms'],\r\n    tags: ['seo', 'marketing', 'search'],\r\n\r\n    routes: (app) => {\r\n        // Routes will be implemented in seoRoutes.ts\r\n    },\r\n\r\n    menu: {\r\n        label: 'SEO',\r\n        icon: 'Search',\r\n        href: '/hpanel/seo',\r\n        order: 60,\r\n    },\r\n\r\n    availability: {\r\n        requiresPlatformAdmin: false,\r\n        availableForTenants: true,\r\n        defaultEnabled: false,\r\n    },\r\n\r\n    permissions: [\r\n        'seo.view',\r\n        'seo.settings.manage',\r\n        'seo.audit',\r\n        'seo.redirects.manage'\r\n    ],\r\n\r\n    requiredPermission: 'seo.view',\r\n};\r\n\r\n// Auto-register on import\r\nmoduleRegistry.register(seoModuleConfig);\r\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"D:\\\\react-projects\\\\reactpal\\\\backend\\\\.wrangler\\\\tmp\\\\bundle-Fb88eC\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"D:\\\\react-projects\\\\reactpal\\\\backend\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"D:\\\\react-projects\\\\reactpal\\\\backend\\\\.wrangler\\\\tmp\\\\bundle-Fb88eC\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"D:\\\\react-projects\\\\reactpal\\\\backend\\\\.wrangler\\\\tmp\\\\bundle-Fb88eC\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"D:\\\\react-projects\\\\reactpal\\\\backend\\\\src\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"D:\\\\react-projects\\\\reactpal\\\\backend\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"D:\\\\react-projects\\\\reactpal\\\\backend\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"D:\\\\react-projects\\\\reactpal\\\\backend\\\\src\\\\index.ts\";\n\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "import { Hono } from 'hono';\r\nimport { cors } from 'hono/cors';\r\nimport { tenantResolverMiddleware } from './middleware/tenant-resolver';\r\nimport { adminAuthMiddleware } from './middleware/admin-auth';\r\nimport resolver from './routes/v1/resolver';\r\nimport settings from './routes/v1/settings';\r\nimport schema from './routes/v1/schema';\r\nimport database from './routes/v1/database';\r\nimport { registerModulesRoutes } from './routes/v1/modules';\r\nimport { bootstrapBackend } from './lib/bootstrap';\r\nimport { loadModuleRoutes } from './lib/ModuleLoader';\r\n\r\n// Import Types from Workers\r\nimport { type D1Database, type KVNamespace } from '@cloudflare/workers-types';\r\n\r\ntype Bindings = {\r\n    DB: D1Database;\r\n    TENANT_MANIFESTS: KVNamespace;\r\n    ADMIN_KEY: string;\r\n    CLOUDFLARE_API_TOKEN?: string;\r\n    CLOUDFLARE_ACCOUNT_ID?: string;\r\n    CLOUDFLARE_DATABASE_ID?: string;\r\n}\r\n\r\ntype Variables = {\r\n    tenantId: string;\r\n    tenant: any;\r\n    isAdmin: boolean;\r\n    user: any;\r\n}\r\n\r\nconst app = new Hono<{ Bindings: Bindings, Variables: Variables }>();\r\n\r\n// Middlewares\r\napp.use('*', cors());\r\napp.use('*', tenantResolverMiddleware);\r\napp.use('*', adminAuthMiddleware);\r\n\r\n// API Routes\r\napp.route('/api/v1/resolver', resolver);\r\napp.route('/api/v1/settings', settings);\r\napp.route('/api/v1/schema', schema);\r\napp.route('/api/v1/database', database);\r\n\r\n// Module routes (management API)\r\nregisterModulesRoutes(app);\r\n\r\n// Initialize modular system\r\nbootstrapBackend().then(() => {\r\n    // Mount all module routes AFTER bootstrapping is complete\r\n    // This includes auth, users, tenants, and any enabled optional modules\r\n    loadModuleRoutes(app);\r\n}).catch(err => {\r\n    console.error('Failed to bootstrap backend:', err);\r\n});\r\n\r\n// Health Check\r\napp.get('/health', (c) => c.json({ status: 'ok', timestamp: new Date().toISOString() }));\r\n\r\n// Error Handling\r\napp.onError((err, c) => {\r\n    console.error(err);\r\n    return c.json({ error: 'Internal Server Error', message: err.message }, 500);\r\n});\r\n\r\nexport default app;\r\n", "// src/middleware/cors/index.ts\nvar cors = (options) => {\n  const defaults = {\n    origin: \"*\",\n    allowMethods: [\"GET\", \"HEAD\", \"PUT\", \"POST\", \"DELETE\", \"PATCH\"],\n    allowHeaders: [],\n    exposeHeaders: []\n  };\n  const opts = {\n    ...defaults,\n    ...options\n  };\n  const findAllowOrigin = ((optsOrigin) => {\n    if (typeof optsOrigin === \"string\") {\n      if (optsOrigin === \"*\") {\n        return () => optsOrigin;\n      } else {\n        return (origin) => optsOrigin === origin ? origin : null;\n      }\n    } else if (typeof optsOrigin === \"function\") {\n      return optsOrigin;\n    } else {\n      return (origin) => optsOrigin.includes(origin) ? origin : null;\n    }\n  })(opts.origin);\n  const findAllowMethods = ((optsAllowMethods) => {\n    if (typeof optsAllowMethods === \"function\") {\n      return optsAllowMethods;\n    } else if (Array.isArray(optsAllowMethods)) {\n      return () => optsAllowMethods;\n    } else {\n      return () => [];\n    }\n  })(opts.allowMethods);\n  return async function cors2(c, next) {\n    function set(key, value) {\n      c.res.headers.set(key, value);\n    }\n    const allowOrigin = await findAllowOrigin(c.req.header(\"origin\") || \"\", c);\n    if (allowOrigin) {\n      set(\"Access-Control-Allow-Origin\", allowOrigin);\n    }\n    if (opts.credentials) {\n      set(\"Access-Control-Allow-Credentials\", \"true\");\n    }\n    if (opts.exposeHeaders?.length) {\n      set(\"Access-Control-Expose-Headers\", opts.exposeHeaders.join(\",\"));\n    }\n    if (c.req.method === \"OPTIONS\") {\n      if (opts.origin !== \"*\") {\n        set(\"Vary\", \"Origin\");\n      }\n      if (opts.maxAge != null) {\n        set(\"Access-Control-Max-Age\", opts.maxAge.toString());\n      }\n      const allowMethods = await findAllowMethods(c.req.header(\"origin\") || \"\", c);\n      if (allowMethods.length) {\n        set(\"Access-Control-Allow-Methods\", allowMethods.join(\",\"));\n      }\n      let headers = opts.allowHeaders;\n      if (!headers?.length) {\n        const requestHeaders = c.req.header(\"Access-Control-Request-Headers\");\n        if (requestHeaders) {\n          headers = requestHeaders.split(/\\s*,\\s*/);\n        }\n      }\n      if (headers?.length) {\n        set(\"Access-Control-Allow-Headers\", headers.join(\",\"));\n        c.res.headers.append(\"Vary\", \"Access-Control-Request-Headers\");\n      }\n      c.res.headers.delete(\"Content-Length\");\n      c.res.headers.delete(\"Content-Type\");\n      return new Response(null, {\n        headers: c.res.headers,\n        status: 204,\n        statusText: \"No Content\"\n      });\n    }\n    await next();\n    if (opts.origin !== \"*\") {\n      c.header(\"Vary\", \"Origin\", { append: true });\n    }\n  };\n};\nexport {\n  cors\n};\n", "import { type Context, type Next } from 'hono';\n\n/**\n * Middleware to resolve tenant from incoming request\n * \n * Resolves tenant using multiple strategies (in order):\n * 1. Query parameter (?tenant=id or ?tenantId=id) - for manual override/debugging\n * 2. KV manifest cache (edge performance) - checks tenant:domain key\n * 3. Database fallback - queries tenant_domains table\n * 4. Default tenant - falls back to 'default' tenant if no match\n * \n * Sets `c.set('tenant', tenantObject)` and `c.set('tenantId', id)` for downstream handlers\n * \n * @param {Context} c - Hono context\n * @param {Next} next - Next middleware function\n * \n * @example\n * // In Hono router setup:\n * app.use('*', tenantResolverMiddleware);\n * \n * // In a route handler:\n * app.get('/api/data', async (c) => {\n *   const tenantId = c.get('tenantId'); // 'default' or resolved tenant id\n *   const tenant = c.get('tenant');     // full tenant object (may be undefined)\n * });\n */\nexport async function tenantResolverMiddleware(c: Context, next: Next) {\n    const host = c.req.header('host') || '';\n    const domain = host.split(':')[0]; // Remove port\n\n    // 1. Try to resolve via ?tenant=... or ?tenantId=... parameter (Manual Override / Debug)\n    const queryId = c.req.query('tenant') || c.req.query('tenantId');\n    let tenant: any = null;\n    let explicitlyRequested = false;\n\n    if (queryId) {\n        explicitlyRequested = true;\n        const db = c.env.DB;\n        const result = await db.prepare(`\n            SELECT t.* FROM tenants t\n            LEFT JOIN tenant_domains td ON t.id = td.tenant_id\n            WHERE t.id = ? OR t.slug = ? OR td.domain = ?\n            LIMIT 1\n        `).bind(queryId, queryId, queryId).first();\n\n        if (result) {\n            tenant = {\n                ...result,\n                config: typeof result.config === 'string' ? JSON.parse(result.config) : result.config\n            };\n        }\n    } else {\n        // 2. Resolve via Domain -> KV Manifest (Edge Performance)\n        const kv = c.env.TENANT_MANIFESTS;\n        tenant = await kv.get(`tenant:${domain}`, { type: 'json' }) as any;\n\n        if (!tenant) {\n            // 3. Fallback to D1 Database\n            const db = c.env.DB;\n            const result = await db.prepare(`\n                SELECT t.* FROM tenants t\n                JOIN tenant_domains td ON t.id = td.tenant_id\n                WHERE td.domain = ?\n            `).bind(domain).first();\n\n            if (result) {\n                tenant = {\n                    ...result,\n                    config: typeof result.config === 'string' ? JSON.parse(result.config) : result.config\n                };\n                // Auto-populate KV\n                await kv.put(`tenant:${domain}`, JSON.stringify(tenant));\n            }\n        }\n    }\n\n    if (tenant) {\n        c.set('tenant', tenant);\n        c.set('tenantId', tenant.id);\n    } else if (explicitlyRequested) {\n        // If they asked for a specific tenant and we didn't find it, don't fall back\n        c.set('tenantId', 'invalid');\n    } else {\n        // Fallback to fetching 'default' tenant from DB to ensure metadata exists\n        const db = c.env.DB;\n        const result = await db.prepare(\"SELECT * FROM tenants WHERE id = 'default'\").first();\n        if (result) {\n            const defaultTenant = {\n                ...result,\n                config: typeof result.config === 'string' ? JSON.parse(result.config) : result.config\n            };\n            c.set('tenant', defaultTenant);\n            c.set('tenantId', 'default');\n        } else {\n            c.set('tenantId', 'default');\n        }\n    }\n\n    await next();\n}\n", "import { type Context, type Next } from 'hono';\r\n\r\n/**\r\n * Simple Master Key Middleware for Phase 1.\r\n * Sets isAdmin: true if the x-admin-key header matches.\r\n */\r\nexport async function adminAuthMiddleware(c: Context, next: Next) {\r\n    const adminKey = c.req.header('x-admin-key');\r\n    const masterKey = c.env.ADMIN_KEY;\r\n    const authHeader = c.req.header('Authorization');\r\n    const token = authHeader?.startsWith('Bearer ') ? authHeader.substring(7) : null;\r\n\r\n    // 1. Check Master Key (Legacy/SuperAdmin)\r\n    if (adminKey && adminKey === masterKey) {\r\n        c.set('isAdmin', true);\r\n        c.set('user', { role: 'super-admin', isPlatformAdmin: true });\r\n        return await next();\r\n    }\r\n\r\n    // 2. Check Session Token\r\n    if (token) {\r\n        const db = c.env.DB;\r\n        try {\r\n            const session = await db.prepare(`\r\n                SELECT s.user_id, s.tenant_id, u.role, u.username\r\n                FROM sessions s\r\n                JOIN users u ON s.user_id = u.id\r\n                WHERE s.access_token = ? AND s.revoked_at IS NULL AND s.expires_at > ?\r\n            `).bind(token, Math.floor(Date.now() / 1000)).first();\r\n\r\n            if (session) {\r\n                c.set('isAdmin', true);\r\n                c.set('user', {\r\n                    id: session.user_id,\r\n                    username: session.username,\r\n                    role: session.role,\r\n                    tenantId: session.tenant_id,\r\n                    isPlatformAdmin: session.role === 'super-admin'\r\n                });\r\n                return await next();\r\n            }\r\n        } catch (err) {\r\n            console.error('Auth middleware DB error:', err);\r\n        }\r\n    }\r\n\r\n    c.set('isAdmin', false);\r\n    c.set('user', null);\r\n    await next();\r\n}\r\n", "import { Hono } from 'hono';\r\n\r\nconst resolver = new Hono<{ Bindings: any, Variables: any }>();\r\n\r\n/**\r\n * GET /api/v1/auth/resolve-tenant\r\n * Returns the current resolved tenant info.\r\n */\r\nresolver.get('/resolve-tenant', (c) => {\r\n    const tenantId = c.get('tenantId');\r\n    const tenant = c.get('tenant');\r\n\r\n    if (tenantId === 'invalid') {\r\n        return c.json({ valid: false, error: 'Tenant not found' }, 404);\r\n    }\r\n\r\n    if (tenant) {\r\n        return c.json({\r\n            valid: true,\r\n            id: tenant.id,\r\n            slug: tenant.slug,\r\n            name: tenant.name,\r\n            domain: tenant.domain\r\n        });\r\n    }\r\n\r\n    // fallback info if tenantId is default but DB fetch failed for some reason\r\n    if (tenantId === 'default') {\r\n        return c.json({\r\n            valid: true,\r\n            id: 'default',\r\n            slug: 'default',\r\n            name: 'Default Tenant',\r\n            domain: 'default'\r\n        });\r\n    }\r\n\r\n    return c.json({ valid: false }, 404);\r\n});\r\n\r\nexport default resolver;\r\n", "import { Hono } from 'hono';\r\nimport { settingsRegistry } from '@reactpress/core-registry';\r\n\r\nconst settings = new Hono<{ Bindings: any; Variables: any }>();\r\n\r\n/**\r\n * GET /api/v1/settings/sections/:moduleId\r\n * Fetches settings schema merged with database values\r\n */\r\nsettings.get('/sections/:moduleId', async (c) => {\r\n    const db = c.env.DB;\r\n    const moduleId = c.req.param('moduleId');\r\n    const tenantId = c.req.query('tenantId') || 'default';\r\n\r\n    const section = settingsRegistry.get(moduleId);\r\n    console.log(`[Settings] Fetching section: ${moduleId} - Found: ${!!section} - Fields: ${section?.fields.length}`);\r\n    if (!section) {\r\n        return c.json({ error: 'Settings section not found' }, 404);\r\n    }\r\n\r\n    try {\r\n        const results = await db.prepare(`\r\n            SELECT key, value FROM settings \r\n            WHERE tenant_id = ? AND module_id = ?\r\n        `).bind(tenantId, moduleId).all();\r\n\r\n        const values: Record<string, any> = {};\r\n        for (const row of (results.results || [])) {\r\n            try {\r\n                const val = (row as any).value;\r\n                values[(row as any).key] = (val && (val.startsWith('{') || val.startsWith('[') || val === 'true' || val === 'false'))\r\n                    ? JSON.parse(val)\r\n                    : val;\r\n            } catch (e) {\r\n                values[(row as any).key] = (row as any).value;\r\n            }\r\n        }\r\n\r\n        // Merge DB values first to preserve settings not in the registry (e.g. dynamic UI columns)\r\n        const mergedValues: Record<string, any> = { ...values };\r\n        section.fields.forEach(field => {\r\n            if (mergedValues[field.key] === undefined) {\r\n                mergedValues[field.key] = field.defaultValue;\r\n            }\r\n        });\r\n\r\n        return c.json({\r\n            ...section,\r\n            values: mergedValues\r\n        });\r\n    } catch (error: any) {\r\n        console.error('Failed to get settings:', error);\r\n        return c.json(section);\r\n    }\r\n});\r\n\r\n/**\r\n * PUT /api/v1/settings\r\n * Atomic update of multiple settings for a module\r\n * Uses ON CONFLICT for efficient upsert\r\n */\r\nsettings.put('/', async (c) => {\r\n    const db = c.env.DB;\r\n    const payload = await c.req.json();\r\n    const { tenantId, moduleId, settings: newSettings } = payload;\r\n\r\n    if (!moduleId || !newSettings) {\r\n        return c.json({ error: 'moduleId and settings are required' }, 400);\r\n    }\r\n\r\n    const tId = tenantId || 'default';\r\n    const now = Math.floor(Date.now() / 1000);\r\n\r\n    try {\r\n        const statements: any[] = [];\r\n        for (const [key, value] of Object.entries(newSettings)) {\r\n            const jsonValue = typeof value === 'string' ? value : JSON.stringify(value);\r\n\r\n            statements.push(\r\n                db.prepare(`\r\n                    INSERT INTO settings (id, tenant_id, module_id, key, value, updated_at)\r\n                    VALUES (?, ?, ?, ?, ?, ?)\r\n                    ON CONFLICT(tenant_id, module_id, key) DO UPDATE SET\r\n                    value = EXCLUDED.value, updated_at = EXCLUDED.updated_at\r\n                `).bind(\r\n                    crypto.randomUUID(),\r\n                    tId,\r\n                    moduleId,\r\n                    key,\r\n                    jsonValue,\r\n                    now\r\n                )\r\n            );\r\n        }\r\n\r\n        if (statements.length > 0) {\r\n            await db.batch(statements);\r\n        }\r\n\r\n        return c.json({ success: true });\r\n    } catch (error: any) {\r\n        console.error('Failed to save settings:', error);\r\n        return c.json({ error: 'Failed to save settings', message: error.message }, 500);\r\n    }\r\n});\r\n\r\nexport default settings;\r\n", "import { Hono } from 'hono';\r\n\r\nconst schema = new Hono<{ Bindings: any; Variables: any }>();\r\n\r\n/**\r\n * GET /api/v1/schema/:table\r\n * Get column information for a table\r\n */\r\nschema.get('/:table', async (c) => {\r\n    const db = c.env.DB;\r\n    const table = c.req.param('table');\r\n\r\n    // Basic validation to prevent SQL injection in table name\r\n    // TODO: Dynamic validation against database tables\r\n    const allowedTables = [\r\n        'users', 'tenants', 'invitations', 'roles', 'permissions',\r\n        'user_roles', 'role_permissions', 'sessions', 'login_attempts',\r\n        'password_resets', 'security_events', 'settings', 'audit_logs',\r\n        'tenant_domains', 'module_status'\r\n    ];\r\n    if (!allowedTables.includes(table)) {\r\n        return c.json({ error: 'Invalid table name' }, 400);\r\n    }\r\n\r\n    try {\r\n        const results = await db.prepare(`PRAGMA table_info(${table})`).all();\r\n        const columns = results.results.map((col: any) => ({\r\n            name: col.name,\r\n            type: col.type,\r\n            notnull: col.notnull === 1,\r\n            pk: col.pk === 1,\r\n            defaultValue: col.dflt_value\r\n        }));\r\n\r\n        return c.json({\r\n            table,\r\n            columns\r\n        });\r\n    } catch (error: any) {\r\n        console.error(`Schema fetch error for ${table}:`, error);\r\n        return c.json({ error: `Failed to fetch schema for ${table}`, message: error.message }, 500);\r\n    }\r\n});\r\n\r\nexport default schema;\r\n", "import { Hono } from 'hono';\r\nimport * as schema from '../../db/schema';\r\nimport { getTableColumns, getTableName } from 'drizzle-orm';\r\nimport { SQLiteTable } from 'drizzle-orm/sqlite-core';\r\nimport * as fs from 'node:fs';\r\nimport * as path from 'node:path';\r\nimport { MigrationLoader } from '../../lib/migrationLoader';\r\n\r\n// Helper for unique IDs that works in all environments\r\nconst generateId = () => {\r\n    try {\r\n        return globalThis.crypto?.randomUUID() || `id_${Math.random().toString(36).slice(2)}`;\r\n    } catch (e) {\r\n        return `id_${Date.now()}_${Math.random().toString(36).slice(2)}`;\r\n    }\r\n};\r\n\r\nconst database = new Hono<{ Bindings: any; Variables: any }>();\r\n\r\n// Helper to log administrative actions to the audit_logs table\r\nasync function logAudit(db: any, event: string, payload: any, tenantId = 'system') {\r\n    try {\r\n        await db.prepare(`\r\n            INSERT INTO audit_logs (id, event, payload, tenant_id, created_at)\r\n            VALUES (?, ?, ?, ?, ?)\r\n        `).bind(\r\n            generateId(),\r\n            event,\r\n            typeof payload === 'string' ? payload : JSON.stringify(payload),\r\n            tenantId,\r\n            Math.floor(Date.now() / 1000)\r\n        ).run();\r\n    } catch (e) {\r\n        console.warn('[Audit Log Failed]:', e);\r\n    }\r\n}\r\n\r\n// Global error handler for this router\r\ndatabase.onError((err, c) => {\r\n    console.error('[Database API Error]:', err);\r\n    return c.json({\r\n        success: false,\r\n        error: err.name || 'Internal Error',\r\n        message: err.message || 'An unexpected error occurred',\r\n        stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\r\n    }, 500);\r\n});\r\n\r\n/**\r\n * GET /api/v1/database/status\r\n * Get database statistics and health\r\n */\r\ndatabase.get('/status', async (c) => {\r\n    const db = c.env.DB;\r\n\r\n    try {\r\n        // Table count & Total Records\r\n        const tablesResult = await db.prepare(\"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' AND name NOT LIKE '__drizzle_%' AND name NOT LIKE '_cf_%' AND name NOT LIKE 'd1_%'\").all();\r\n        const tables = tablesResult.results || [];\r\n        const tableCount = tables.length;\r\n\r\n        // Calculate total records\r\n        let totalRecords = 0;\r\n        for (const table of tables) {\r\n            try {\r\n                const countRes = await db.prepare(`SELECT count(*) as count FROM ${table.name}`).first();\r\n                totalRecords += (countRes as any)?.count || 0;\r\n            } catch (e) {\r\n                console.warn(`Could not count records for table ${table.name}:`, e);\r\n            }\r\n        }\r\n\r\n        // Estimate size based on record count (rough approximation)\r\n        const estimatedSizeBytes = totalRecords * 1024; // Rough estimate: 1KB per record\r\n        const sizeFormatted = estimatedSizeBytes > 0 ? formatBytes(estimatedSizeBytes) + ' (estimated)' : 'Managed by D1';\r\n\r\n        return c.json({\r\n            status: 'healthy',\r\n            sizeBytes: estimatedSizeBytes,\r\n            sizeFormatted,\r\n            tableCount,\r\n            recordCount: totalRecords,\r\n            databaseId: c.env.DB_ID || 'worker-db',\r\n            note: 'Size is estimated. Use Cloudflare Dashboard for exact metrics.'\r\n        });\r\n    } catch (error: any) {\r\n        console.error('Database status error:', error);\r\n        return c.json({ error: 'Failed to fetch database status', message: error.message }, 500);\r\n    }\r\n});\r\n\r\n/**\r\n * GET /api/v1/database/tables\r\n * List all tables with row and column counts\r\n */\r\ndatabase.get('/tables', async (c) => {\r\n    const db = c.env.DB;\r\n\r\n    try {\r\n        // Helper for pagination\r\n        const page = parseInt(c.req.query('page') || '1');\r\n        const limit = parseInt(c.req.query('limit') || '10');\r\n        const offset = (page - 1) * limit;\r\n\r\n        const tablesResult = await db.prepare(\"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' AND name NOT LIKE '__drizzle_%' AND name NOT LIKE '_cf_%' AND name NOT LIKE 'd1_%' LIMIT ? OFFSET ?\")\r\n            .bind(limit, offset)\r\n            .all();\r\n\r\n        const countResult = await db.prepare(\"SELECT count(*) as total FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' AND name NOT LIKE '__drizzle_%' AND name NOT LIKE '_cf_%' AND name NOT LIKE 'd1_%'\").first();\r\n        const total = (countResult as any)?.total || 0;\r\n\r\n        const tableNames = (tablesResult.results || []).map((r: any) => r.name);\r\n\r\n        const tables = await Promise.all(tableNames.map(async (name: string) => {\r\n            let records = 0;\r\n            let colInfo: any[] = [];\r\n\r\n            try {\r\n                const rowCountResult = await db.prepare(`SELECT count(*) as count FROM ${name}`).first();\r\n                records = (rowCountResult as any)?.count || 0;\r\n            } catch (e) {\r\n                console.warn(`Failed to get row count for ${name}:`, e);\r\n            }\r\n\r\n            try {\r\n                const colInfoResult = await db.prepare(`PRAGMA table_info(${name})`).all();\r\n                colInfo = colInfoResult.results || [];\r\n            } catch (e) {\r\n                console.warn(`Failed to get PRAGMA table_info for ${name}:`, e);\r\n            }\r\n\r\n            return {\r\n                name,\r\n                records,\r\n                columnCount: colInfo.length,\r\n                columns: colInfo\r\n            };\r\n        }));\r\n\r\n        return c.json({\r\n            data: tables,\r\n            meta: {\r\n                page,\r\n                limit,\r\n                total,\r\n                totalPages: Math.ceil(total / limit)\r\n            }\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('Database tables error:', error);\r\n        return c.json({ error: 'Failed to fetch tables', message: error.message }, 500);\r\n    }\r\n});\r\n\r\n\r\n/**\r\n * GET /api/v1/database/tables/remote\r\n * Get remote table stats via CLI\r\n * NOTE: This requires CLOUDFLARE_API_TOKEN to be set in production/workers.\r\n * CLI execution is not possible in Worker runtime.\r\n */\r\n// Helper to query D1 via HTTP API\r\ninterface CloudflareD1Response {\r\n    result: {\r\n        meta: {\r\n            changed_db: boolean;\r\n            changes: number;\r\n            duration: number;\r\n            last_row_id: number;\r\n            rows_read: number;\r\n            rows_written: number;\r\n            size_after: number;\r\n        };\r\n        results: any[];\r\n        success: boolean;\r\n    }[];\r\n    success: boolean;\r\n    errors: any[];\r\n    messages: any[];\r\n}\r\n\r\nasync function queryD1(accountId: string, databaseId: string, token: string, sql: string): Promise<any[]> {\r\n    const url = `https://api.cloudflare.com/client/v4/accounts/${accountId}/d1/database/${databaseId}/query`;\r\n    const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ sql })\r\n    });\r\n\r\n    if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(`Cloudflare API Error: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    const json = (await response.json()) as CloudflareD1Response;\r\n\r\n    if (!json.success || !json.result || json.result.length === 0) {\r\n        if (json.errors && json.errors.length > 0) {\r\n            throw new Error(`D1 Query Error: ${JSON.stringify(json.errors)}`);\r\n        }\r\n        return [];\r\n    }\r\n\r\n    return json.result[0].results || [];\r\n}\r\n\r\n/**\r\n * GET /api/v1/database/tables/remote\r\n * Get remote table stats via Cloudflare D1 HTTP API\r\n */\r\ndatabase.get('/tables/remote', async (c) => {\r\n    const accountId = c.env.CLOUDFLARE_ACCOUNT_ID;\r\n    const token = c.env.CLOUDFLARE_API_TOKEN;\r\n    // Fallback to the ID from wrangler.toml if env var is missing\r\n    const databaseId = c.env.CLOUDFLARE_DATABASE_ID || '39a4d54d-a335-4e15-bb6b-b02362fa16ea';\r\n\r\n    if (!accountId || !token) {\r\n        return c.json({\r\n            success: false,\r\n            message: 'Remote stats require CLOUDFLARE_API_TOKEN and CLOUDFLARE_ACCOUNT_ID environment variables.'\r\n        });\r\n    }\r\n\r\n    try {\r\n        // 1. Get Table Names\r\n        const tables = await queryD1(accountId, databaseId, token, \"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' AND name NOT LIKE '__drizzle_%' AND name NOT LIKE '_cf_%' AND name NOT LIKE 'd1_%'\");\r\n        const tableNames = tables.map((t: any) => t.name);\r\n\r\n        if (tableNames.length === 0) {\r\n            return c.json({ success: true, data: {} });\r\n        }\r\n\r\n        // 2. Construct UNION ALL query for counts\r\n        // Batch queries to avoid \"too many terms in compound SELECT\" error\r\n        // SQLite limit is often 500, but Cloudflare D1 might be stricter or query length limits apply.\r\n        // A safe batch size is 5-10.\r\n        const BATCH_SIZE = 5;\r\n        const result: Record<string, any> = {};\r\n\r\n        for (let i = 0; i < tableNames.length; i += BATCH_SIZE) {\r\n            const batch = tableNames.slice(i, i + BATCH_SIZE);\r\n\r\n            const countQueries = batch.map((name: string) => {\r\n                const escapedName = name.replace(/'/g, \"''\");\r\n                const identifier = `\"${name.replace(/\"/g, '\"\"')}\"`;\r\n                return `SELECT '${escapedName}' as name, count(*) as count, (SELECT count(*) FROM pragma_table_info('${escapedName}')) as columns FROM ${identifier}`;\r\n            });\r\n\r\n            const fullQuery = countQueries.join(' UNION ALL ');\r\n\r\n            try {\r\n                console.log(`[RemoteStats] Querying batch ${i}:`, batch);\r\n                const stats = await queryD1(accountId, databaseId, token, fullQuery);\r\n                stats.forEach((s: any) => {\r\n                    result[s.name] = { records: s.count, columns: s.columns };\r\n                });\r\n            } catch (batchError: any) {\r\n                console.error(`[RemoteStats] Failed batch ${i}-${i + BATCH_SIZE}:`, batchError.message || batchError);\r\n                if (batchError.message?.includes('SQLITE_AUTH')) {\r\n                    console.error('[RemoteStats] SQLITE_AUTH error suggests one of these tables is restricted:', batch);\r\n                }\r\n                // Continue with other batches even if one fails\r\n            }\r\n        }\r\n\r\n        return c.json({ success: true, data: result });\r\n\r\n    } catch (e: any) {\r\n        console.error('Remote stats error:', e);\r\n        return c.json({ success: false, message: e.message }, 500);\r\n    }\r\n});\r\n\r\n/**\r\n * POST /api/v1/database/tables/sync-data\r\n * Push local table data to remote D1\r\n */\r\ndatabase.post('/tables/sync-data', async (c) => {\r\n    const accountId = c.env.CLOUDFLARE_ACCOUNT_ID;\r\n    const token = c.env.CLOUDFLARE_API_TOKEN;\r\n    const databaseId = c.env.CLOUDFLARE_DATABASE_ID || '39a4d54d-a335-4e15-bb6b-b02362fa16ea';\r\n    const db = c.env.DB;\r\n\r\n    const { table } = await c.req.json();\r\n\r\n    if (!accountId || !token) {\r\n        return c.json({ success: false, message: 'Missing Cloudflare credentials.' }, 400);\r\n    }\r\n\r\n    try {\r\n        // 1. Get local data\r\n        const dataResult = await db.prepare(`SELECT * FROM ${table}`).all();\r\n        const rows = dataResult.results || [];\r\n\r\n        if (rows.length === 0) {\r\n            return c.json({ success: true, message: 'No data to sync.' });\r\n        }\r\n\r\n        // 2. Prepare batches\r\n        const BATCH_SIZE = 20; // 20 rows per batch\r\n        let successCount = 0;\r\n\r\n        for (let i = 0; i < rows.length; i += BATCH_SIZE) {\r\n            const batch = rows.slice(i, i + BATCH_SIZE);\r\n            const statements: string[] = [];\r\n\r\n            for (const row of batch) {\r\n                const columns = Object.keys(row);\r\n                // Simple escaping for common types\r\n                const values = Object.values(row).map(v => {\r\n                    if (v === null) return 'NULL';\r\n                    if (typeof v === 'string') return `'${v.replace(/'/g, \"''\")}'`;\r\n                    if (typeof v === 'boolean') return v ? 1 : 0;\r\n                    if (v instanceof Date) return `'${v.toISOString()}'`;\r\n                    return v;\r\n                });\r\n\r\n                statements.push(`INSERT OR REPLACE INTO \"${table}\" (${columns.join(', ')}) VALUES (${values.join(', ')})`);\r\n            }\r\n\r\n            // Execute batch via Cloudflare API\r\n            // Cloudflare D1 HTTP API supports multiple statements separated by newlines/semicolons or as an array of queries if using the specific batch endpoint.\r\n            // But queryD1 helper uses /query which takes a single SQL string. We can combine with semicolons.\r\n            const fullSql = statements.join('; ');\r\n            await queryD1(accountId, databaseId, token, fullSql);\r\n            successCount += batch.length;\r\n        }\r\n\r\n        await logAudit(db, 'DATA_SYNC', { table, rows: successCount });\r\n\r\n        return c.json({\r\n            success: true,\r\n            message: `Successfully synced ${successCount} records to remote.`\r\n        });\r\n\r\n    } catch (e: any) {\r\n        console.error('Data sync error:', e);\r\n        return c.json({ success: false, message: e.message }, 500);\r\n    }\r\n});\r\n\r\n/**\r\n * POST /api/v1/database/tables/pull-data\r\n * Pull remote D1 data to local\r\n */\r\ndatabase.post('/tables/pull-data', async (c) => {\r\n    const accountId = c.env.CLOUDFLARE_ACCOUNT_ID;\r\n    const token = c.env.CLOUDFLARE_API_TOKEN;\r\n    const databaseId = c.env.CLOUDFLARE_DATABASE_ID || '39a4d54d-a335-4e15-bb6b-b02362fa16ea';\r\n    const db = c.env.DB;\r\n\r\n    const { table } = await c.req.json();\r\n\r\n    if (!accountId || !token) {\r\n        return c.json({ success: false, message: 'Missing Cloudflare credentials.' }, 400);\r\n    }\r\n\r\n    try {\r\n        // 1. Get remote data\r\n        const rows = await queryD1(accountId, databaseId, token, `SELECT * FROM \"${table}\"`);\r\n\r\n        if (rows.length === 0) {\r\n            return c.json({ success: true, message: 'No data on remote to sync.' });\r\n        }\r\n\r\n        // 2. Insert into local\r\n        // We handle batching manually for safety\r\n        const BATCH_SIZE = 50;\r\n        let successCount = 0;\r\n        const statements: any[] = [];\r\n\r\n        for (const row of rows) {\r\n            const columns = Object.keys(row);\r\n            const placeholders = columns.map(() => '?').join(', ');\r\n            const values = Object.values(row);\r\n\r\n            statements.push(\r\n                db.prepare(`INSERT OR REPLACE INTO \"${table}\" (${columns.join(', ')}) VALUES (${placeholders})`).bind(...values)\r\n            );\r\n        }\r\n\r\n        // Execute in chunks\r\n        for (let i = 0; i < statements.length; i += BATCH_SIZE) {\r\n            const chunk = statements.slice(i, i + BATCH_SIZE);\r\n            await db.batch(chunk);\r\n            successCount += chunk.length;\r\n        }\r\n\r\n        await logAudit(db, 'DATA_PULL', { table, rows: successCount });\r\n\r\n        return c.json({\r\n            success: true,\r\n            message: `Successfully pulled ${successCount} records from remote.`\r\n        });\r\n\r\n    } catch (e: any) {\r\n        console.error('Data pull error:', e);\r\n        return c.json({ success: false, message: e.message }, 500);\r\n    }\r\n});\r\n\r\n/**\r\n * GET /api/v1/database/schema/compare\r\n * Compare local Drizzle schema with remote DB structure\r\n */\r\ndatabase.get('/schema/compare', async (c) => {\r\n    const db = c.env.DB;\r\n\r\n    try {\r\n        const diffs: any[] = [];\r\n\r\n        // Iterate through all exported tables in schema\r\n        for (const [key, value] of Object.entries(schema)) {\r\n            if (isDrizzleTable(value)) {\r\n                const tableName = getTableName(value);\r\n                const schemaColumns = getTableColumns(value);\r\n\r\n                // Fetch remote info\r\n                let remoteColumns: any[] = [];\r\n                try {\r\n                    const remoteColumnsResult = await db.prepare(`PRAGMA table_info(${tableName})`).all();\r\n                    remoteColumns = (remoteColumnsResult.results || []).map((col: any) => ({\r\n                        name: col.name,\r\n                        type: col.type,\r\n                        notnull: col.notnull === 1,\r\n                        pk: col.pk === 1,\r\n                        default: col.dflt_value\r\n                    }));\r\n                } catch (e) {\r\n                    console.warn(`Failed to compare schema for table ${tableName}:`, e);\r\n                }\r\n\r\n                const localColumns = Object.values(schemaColumns).map((col: any) => ({\r\n                    name: col.name,\r\n                    type: col.getSQLType(),\r\n                    notnull: col.notNull,\r\n                    default: col.default !== undefined ? String(col.default) : null\r\n                }));\r\n\r\n                // Compare\r\n                const columns: any[] = [];\r\n                const allColNames = Array.from(new Set([\r\n                    ...localColumns.map(c => c.name),\r\n                    ...remoteColumns.map((c: any) => c.name)\r\n                ]));\r\n\r\n                let mismatch = false;\r\n                for (const name of allColNames) {\r\n                    const local = localColumns.find(c => c.name === name);\r\n                    const remote = remoteColumns.find((c: any) => c.name === name);\r\n\r\n                    const isMatch = local && remote &&\r\n                        local.type.toUpperCase() === remote.type.toUpperCase() &&\r\n                        local.notnull === remote.notnull;\r\n\r\n                    if (!isMatch) mismatch = true;\r\n\r\n                    columns.push({\r\n                        name,\r\n                        type: local?.type || remote?.type,\r\n                        local: !!local,\r\n                        remote: !!remote,\r\n                        match: isMatch\r\n                    });\r\n                }\r\n\r\n                diffs.push({\r\n                    table: tableName,\r\n                    status: mismatch ? (remoteColumns.length === 0 ? 'missing' : 'mismatch') : 'match',\r\n                    columns\r\n                });\r\n            }\r\n        }\r\n\r\n        return c.json(diffs);\r\n    } catch (error: any) {\r\n        console.error('Schema compare error:', error);\r\n        return c.json({ error: 'Failed to compare schema', message: error.message }, 500);\r\n    }\r\n});\r\n\r\n/**\r\n * GET /api/v1/database/export\r\n * Export database as SQL dump\r\n */\r\ndatabase.get('/export', async (c) => {\r\n    const db = c.env.DB;\r\n\r\n    try {\r\n        let sqlDump = '-- D1 Database Export\\n';\r\n        sqlDump += `-- Generated: ${new Date().toISOString()}\\n\\n`;\r\n\r\n        // Get all tables\r\n        const tablesResult = await db.prepare(\r\n            \"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' AND name NOT LIKE '__drizzle_%' AND name NOT LIKE '_cf_%' AND name NOT LIKE 'd1_%'\"\r\n        ).all();\r\n\r\n        const tables = tablesResult.results || [];\r\n\r\n        for (const table of tables) {\r\n            const tableName = (table as any).name;\r\n\r\n            // Get table schema\r\n            const schemaResult = await db.prepare(\r\n                `SELECT sql FROM sqlite_master WHERE type='table' AND name=?`\r\n            ).bind(tableName).first();\r\n\r\n            if (schemaResult) {\r\n                sqlDump += `-- Table: ${tableName}\\n`;\r\n                sqlDump += `${(schemaResult as any).sql};\\n\\n`;\r\n            }\r\n\r\n            // Get table data\r\n            const dataResult = await db.prepare(`SELECT * FROM ${tableName}`).all();\r\n            const rows = dataResult.results || [];\r\n\r\n            if (rows.length > 0) {\r\n                sqlDump += `-- Data for ${tableName}\\n`;\r\n\r\n                for (const row of rows) {\r\n                    const columns = Object.keys(row);\r\n                    const values = Object.values(row).map(v => {\r\n                        if (v === null) return 'NULL';\r\n                        if (typeof v === 'string') return `'${v.replace(/'/g, \"''\")}'`;\r\n                        return v;\r\n                    });\r\n\r\n                    sqlDump += `INSERT INTO ${tableName} (${columns.join(', ')}) VALUES (${values.join(', ')});\\n`;\r\n                }\r\n                sqlDump += '\\n';\r\n            }\r\n        }\r\n\r\n        return new Response(sqlDump, {\r\n            headers: {\r\n                'Content-Type': 'application/sql',\r\n                'Content-Disposition': `attachment; filename=\"d1-backup-${Date.now()}.sql\"`\r\n            }\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('Database export error:', error);\r\n        return c.json({ error: 'Failed to export database', message: error.message }, 500);\r\n    }\r\n});\r\n\r\n\r\n/**\r\n * GET /api/v1/database/migrations\r\n * List migration files and their status in DB\r\n * Now works in both local development and production!\r\n */\r\ndatabase.get('/migrations', async (c) => {\r\n    const db = c.env.DB;\r\n\r\n    try {\r\n        const page = parseInt(c.req.query('page') || '1');\r\n        const limit = parseInt(c.req.query('limit') || '10');\r\n        const offset = (page - 1) * limit;\r\n\r\n        // 1. Load migration files first (this is now fast via internal manifest)\r\n        const loader = new MigrationLoader();\r\n        const migrationFiles = await loader.listMigrations();\r\n\r\n        // 2. Try to get applied migrations from DB\r\n        let appliedMap = new Map<string, any>();\r\n\r\n        // Check both common migration tables\r\n        const tablesToCheck = ['d1_migrations', '__drizzle_migrations'];\r\n\r\n        for (const tableName of tablesToCheck) {\r\n            try {\r\n                const result = await db.prepare(`SELECT * FROM ${tableName}`).all();\r\n                (result.results || []).forEach((m: any) => {\r\n                    // Normalize data from different table schemas\r\n                    const id = String(m.id || '');\r\n                    const name = String(m.name || '');\r\n                    const appliedAt = m.applied_at || m.created_at;\r\n                    const hash = m.hash || null;\r\n\r\n                    const data = { id, name, hash, appliedAt, status: 'applied' };\r\n\r\n                    if (id) appliedMap.set(id, data);\r\n                    if (name) appliedMap.set(name, data);\r\n                    // Also match without extension\r\n                    if (name.endsWith('.sql')) appliedMap.set(name.replace('.sql', ''), data);\r\n                });\r\n            } catch (e) {\r\n                // Ignore if table doesn't exist\r\n            }\r\n        }\r\n\r\n        // 3. Merge data: combine file list with applied status\r\n        const allMigrations = migrationFiles.map(({ id: fileId, name }) => {\r\n            const nameWithoutExt = name.replace('.sql', '');\r\n            const applied = appliedMap.get(name) ||\r\n                appliedMap.get(nameWithoutExt) ||\r\n                appliedMap.get(fileId);\r\n\r\n            return {\r\n                id: name,\r\n                name: name,\r\n                status: applied ? 'applied' : 'pending',\r\n                appliedAt: applied?.appliedAt || null,\r\n                hash: applied?.hash || null\r\n            };\r\n        });\r\n\r\n        // 4. Natural Sort Descending (latest first)\r\n        allMigrations.sort((a, b) => {\r\n            const getNum = (s: string) => parseInt(s.match(/^\\d+/)?.[0] || '0');\r\n            const numA = getNum(a.name);\r\n            const numB = getNum(b.name);\r\n\r\n            if (numA !== numB) return numB - numA;\r\n            return b.name.localeCompare(a.name);\r\n        });\r\n        const total = allMigrations.length;\r\n        const sliced = allMigrations.slice(offset, offset + limit);\r\n\r\n        return c.json({\r\n            data: sliced,\r\n            meta: {\r\n                page,\r\n                limit,\r\n                total,\r\n                totalPages: Math.ceil(total / limit)\r\n            }\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('Migration fetch error:', error);\r\n        return c.json({\r\n            data: [],\r\n            meta: {\r\n                page: 1,\r\n                limit: 10,\r\n                total: 0,\r\n                totalPages: 1,\r\n                error: error.message,\r\n                hint: 'Run \"npm run db:manifest\" to generate migration manifest'\r\n            }\r\n        });\r\n    }\r\n});\r\n\r\n/**\r\n * POST /api/v1/database/migrations/run\r\n * Mark a migration as applied (Safety Mode)\r\n * This doesn't execute SQL, just marks it as resolved\r\n */\r\ndatabase.post('/migrations/run', async (c) => {\r\n    const db = c.env.DB;\r\n    const { migration } = await c.req.json();\r\n\r\n    try {\r\n        if (!migration) {\r\n            return c.json({ success: false, message: 'Migration name is required' }, 400);\r\n        }\r\n\r\n        // Extract ID from filename\r\n        const migrationId = migration.replace('.sql', '').match(/^(\\d+)/)?.[1] || migration.replace('.sql', '');\r\n        const timestamp = Date.now();\r\n\r\n        // Check if already applied\r\n        const existing = await db.prepare('SELECT id FROM __drizzle_migrations WHERE id = ?')\r\n            .bind(migrationId)\r\n            .first();\r\n\r\n        if (existing) {\r\n            return c.json({\r\n                success: false,\r\n                message: `Migration ${migration} is already applied`\r\n            }, 400);\r\n        }\r\n\r\n        // Insert into migrations table\r\n        await db.prepare('INSERT INTO __drizzle_migrations (id, hash, created_at) VALUES (?, ?, ?)')\r\n            .bind(migrationId, 'manual_apply_' + timestamp, timestamp)\r\n            .run();\r\n\r\n        await logAudit(db, 'MIGRATION_APPLY', { migration, migrationId });\r\n\r\n        return c.json({\r\n            message: `Migration ${migration} marked as applied successfully.`,\r\n            success: true,\r\n            note: 'Remember to execute the SQL manually via Wrangler or Cloudflare Dashboard'\r\n        });\r\n    } catch (e: any) {\r\n        return c.json({ success: false, message: e.message }, 500);\r\n    }\r\n});\r\n\r\n/**\r\n * POST /api/v1/database/migrations/rollback\r\n * Unmark the latest migration as applied\r\n */\r\ndatabase.post('/migrations/rollback', async (c) => {\r\n    const db = c.env.DB;\r\n\r\n    try {\r\n        // Find latest migration\r\n        const latest = await db.prepare(\r\n            'SELECT * FROM __drizzle_migrations ORDER BY created_at DESC LIMIT 1'\r\n        ).first();\r\n\r\n        if (!latest) {\r\n            return c.json({\r\n                success: false,\r\n                message: 'No applied migrations to rollback.'\r\n            }, 400);\r\n        }\r\n\r\n        const migrationId = (latest as any).id;\r\n\r\n        // Delete from migrations table\r\n        await db.prepare('DELETE FROM __drizzle_migrations WHERE id = ?')\r\n            .bind(migrationId)\r\n            .run();\r\n\r\n        await logAudit(db, 'MIGRATION_ROLLBACK', { migrationId });\r\n\r\n        return c.json({\r\n            success: true,\r\n            message: `Rolled back migration ${migrationId}. It is now marked as pending.`,\r\n            note: 'This only unmarked the migration. You may need to manually revert schema changes.'\r\n        });\r\n\r\n    } catch (e: any) {\r\n        return c.json({\r\n            success: false,\r\n            message: 'Rollback failed: ' + e.message\r\n        }, 500);\r\n    }\r\n});\r\n\r\n\r\n/**\r\n * POST /api/v1/database/schema/sync\r\n * Sync schema changes for a table (Simple ADD COLUMN support)\r\n */\r\ndatabase.post('/schema/sync', async (c) => {\r\n    const db = c.env.DB;\r\n    const { table, action, dryRun } = await c.req.json();\r\n\r\n    // Find the drizzle table definition\r\n    let drizzleTable: any = null;\r\n    for (const [key, value] of Object.entries(schema)) {\r\n        if (isDrizzleTable(value) && getTableName(value) === table) {\r\n            drizzleTable = value;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (!drizzleTable) {\r\n        return c.json({ success: false, message: `Table ${table} definition not found in schema.` }, 404);\r\n    }\r\n\r\n    try {\r\n        const schemaColumns = getTableColumns(drizzleTable);\r\n        const remoteResult = await db.prepare(`PRAGMA table_info(${table})`).all();\r\n        const remoteColumnNames = new Set((remoteResult.results || []).map((r: any) => r.name));\r\n\r\n        const statements: string[] = [];\r\n\r\n        // Check for missing columns (Local exists, Remote missing) -> ADD COLUMN\r\n        for (const [colName, colDef] of Object.entries(schemaColumns)) {\r\n            if (!remoteColumnNames.has(colName)) {\r\n                const col: any = colDef;\r\n                const type = col.getSQLType();\r\n                const notNull = col.notNull ? 'NOT NULL' : '';\r\n                let defaultVal = '';\r\n                if (col.default !== undefined) {\r\n                    defaultVal = `DEFAULT ${typeof col.default === 'string' ? `'${col.default}'` : col.default}`;\r\n                }\r\n\r\n                statements.push(`ALTER TABLE ${table} ADD COLUMN ${colName} ${type} ${notNull} ${defaultVal};`);\r\n            }\r\n        }\r\n\r\n        if (statements.length === 0) {\r\n            return c.json({ success: true, message: 'No syncable changes found.', sql: [] });\r\n        }\r\n\r\n        if (dryRun) {\r\n            return c.json({ success: true, message: 'Dry run generated SQL.', sql: statements });\r\n        }\r\n\r\n        // Execute sequentially\r\n        for (const sql of statements) {\r\n            await db.prepare(sql.replace(/;$/, '')).run();\r\n        }\r\n\r\n        await logAudit(db, 'SCHEMA_SYNC', { table, statements: statements.length });\r\n\r\n        return c.json({\r\n            message: `Successfully synchronized ${table}. Applied ${statements.length} changes.`,\r\n            success: true,\r\n            statements\r\n        });\r\n\r\n    } catch (e: any) {\r\n        return c.json({ success: false, message: 'Sync failed: ' + e.message }, 500);\r\n    }\r\n});\r\n\r\n/**\r\n * GET /api/v1/database/audit-logs\r\n * Get recent activity logs\r\n */\r\ndatabase.get('/audit-logs', async (c) => {\r\n    const db = c.env.DB;\r\n    try {\r\n        const result = await db.prepare('SELECT * FROM audit_logs ORDER BY created_at DESC LIMIT 10').all();\r\n        const logs = (result.results || []).map((log: any) => ({\r\n            id: log.id,\r\n            action: log.event,\r\n            details: log.payload,\r\n            createdAt: typeof log.created_at === 'number' ? log.created_at * 1000 : log.created_at,\r\n            type: log.event.includes('FAIL') ? 'error' : 'success'\r\n        }));\r\n        return c.json(logs);\r\n    } catch (e) {\r\n        console.error('[Audit logs error]:', e);\r\n        return c.json([]);\r\n    }\r\n});\r\n\r\n// Helper functions\r\nfunction formatBytes(bytes: number, decimals = 2) {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const dm = decimals < 0 ? 0 : decimals;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n}\r\n\r\nfunction isDrizzleTable(val: any): val is SQLiteTable {\r\n    return val && typeof val === 'object' && Symbol.for('drizzle:IsAlias') in val === false && Symbol.for('drizzle:Name') in val;\r\n}\r\n\r\nexport default database;", "export * from './tenants';\r\nexport * from './domains';\r\nexport * from './audit';\r\nexport * from './settings';\r\n", "import { sqliteTable, text, integer } from 'drizzle-orm/sqlite-core';\r\nimport { sql } from 'drizzle-orm';\r\n\r\nexport const tenants = sqliteTable('tenants', {\r\n    id: text('id').primaryKey(),\r\n    name: text('name').notNull(),\r\n    slug: text('slug').notNull().unique(),\r\n    domain: text('domain'), // Optional primary domain cache\r\n    config: text('config').notNull(), // JSON manifest\r\n    status: text('status').notNull().default('active'),\r\n\r\n    // Lifecycle/Suspension\r\n    trialEndsAt: integer('trial_ends_at'),\r\n    suspendedAt: integer('suspended_at'),\r\n    suspendedReason: text('suspended_reason'),\r\n\r\n    // Ownership\r\n    ownerId: text('owner_id'),\r\n    ownerEmail: text('owner_email'),\r\n    billingEmail: text('billing_email'),\r\n\r\n    // Subscription\r\n    planId: text('plan_id'),\r\n    planName: text('plan_name').default('free'),\r\n    billingStatus: text('billing_status').default('current'),\r\n    nextBillingDate: integer('next_billing_date'),\r\n    mrr: integer('mrr').default(0),\r\n\r\n    // Resource Limits\r\n    maxUsers: integer('max_users').default(5),\r\n    maxStorage: integer('max_storage').default(1),\r\n    maxApiCalls: integer('max_api_calls').default(1000),\r\n\r\n    // Real-time Usage\r\n    currentUsers: integer('current_users').default(0),\r\n    storageUsed: integer('storage_used').default(0),\r\n    apiCallsThisMonth: integer('api_calls_this_month').default(0),\r\n\r\n    // Metadata\r\n    industry: text('industry'),\r\n    companySize: text('company_size'),\r\n    notes: text('notes'),\r\n    tags: text('tags'),\r\n\r\n    // Audit\r\n    lastActivityAt: integer('last_activity_at'),\r\n    createdAt: integer('created_at').notNull().default(sql`(strftime('%s', 'now'))`),\r\n    updatedAt: integer('updated_at').notNull().default(sql`(strftime('%s', 'now'))`),\r\n    createdBy: text('created_by'),\r\n    deletedAt: integer('deleted_at'),\r\n});\r\n", "import type {\n\tColumnBuilderBaseConfig,\n\tColumnBuilderRuntimeConfig,\n\tColumnDataType,\n\tGeneratedColumnConfig,\n\tGeneratedIdentityConfig,\n} from './column-builder.ts';\nimport { entityKind } from './entity.ts';\nimport type { DriverValueMapper, SQL, SQLWrapper } from './sql/sql.ts';\nimport type { Table } from './table.ts';\nimport type { Update } from './utils.ts';\n\nexport interface ColumnBaseConfig<\n\tTDataType extends ColumnDataType,\n\tTColumnType extends string,\n> extends ColumnBuilderBaseConfig<TDataType, TColumnType> {\n\ttableName: string;\n\tnotNull: boolean;\n\thasDefault: boolean;\n\tisPrimaryKey: boolean;\n\tisAutoincrement: boolean;\n\thasRuntimeDefault: boolean;\n}\n\nexport type ColumnTypeConfig<T extends ColumnBaseConfig<ColumnDataType, string>, TTypeConfig extends object> = T & {\n\tbrand: 'Column';\n\ttableName: T['tableName'];\n\tname: T['name'];\n\tdataType: T['dataType'];\n\tcolumnType: T['columnType'];\n\tdata: T['data'];\n\tdriverParam: T['driverParam'];\n\tnotNull: T['notNull'];\n\thasDefault: T['hasDefault'];\n\tisPrimaryKey: T['isPrimaryKey'];\n\tisAutoincrement: T['isAutoincrement'];\n\thasRuntimeDefault: T['hasRuntimeDefault'];\n\tenumValues: T['enumValues'];\n\tbaseColumn: T extends { baseColumn: infer U } ? U : unknown;\n\tgenerated: GeneratedColumnConfig<T['data']> | undefined;\n\tidentity: undefined | 'always' | 'byDefault';\n} & TTypeConfig;\n\nexport type ColumnRuntimeConfig<TData, TRuntimeConfig extends object> = ColumnBuilderRuntimeConfig<\n\tTData,\n\tTRuntimeConfig\n>;\n\nexport interface Column<\n\tT extends ColumnBaseConfig<ColumnDataType, string> = ColumnBaseConfig<ColumnDataType, string>,\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tTRuntimeConfig extends object = object,\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tTTypeConfig extends object = object,\n> extends DriverValueMapper<T['data'], T['driverParam']>, SQLWrapper {\n\t// SQLWrapper runtime implementation is defined in 'sql/sql.ts'\n}\n/*\n\t`Column` only accepts a full `ColumnConfig` as its generic.\n\tTo infer parts of the config, use `AnyColumn` that accepts a partial config.\n\tSee `GetColumnData` for example usage of inferring.\n*/\nexport abstract class Column<\n\tT extends ColumnBaseConfig<ColumnDataType, string> = ColumnBaseConfig<ColumnDataType, string>,\n\tTRuntimeConfig extends object = object,\n\tTTypeConfig extends object = object,\n> implements DriverValueMapper<T['data'], T['driverParam']>, SQLWrapper {\n\tstatic readonly [entityKind]: string = 'Column';\n\n\tdeclare readonly _: ColumnTypeConfig<T, TTypeConfig>;\n\n\treadonly name: string;\n\treadonly keyAsName: boolean;\n\treadonly primary: boolean;\n\treadonly notNull: boolean;\n\treadonly default: T['data'] | SQL | undefined;\n\treadonly defaultFn: (() => T['data'] | SQL) | undefined;\n\treadonly onUpdateFn: (() => T['data'] | SQL) | undefined;\n\treadonly hasDefault: boolean;\n\treadonly isUnique: boolean;\n\treadonly uniqueName: string | undefined;\n\treadonly uniqueType: string | undefined;\n\treadonly dataType: T['dataType'];\n\treadonly columnType: T['columnType'];\n\treadonly enumValues: T['enumValues'] = undefined;\n\treadonly generated: GeneratedColumnConfig<T['data']> | undefined = undefined;\n\treadonly generatedIdentity: GeneratedIdentityConfig | undefined = undefined;\n\n\tprotected config: ColumnRuntimeConfig<T['data'], TRuntimeConfig>;\n\n\tconstructor(\n\t\treadonly table: Table,\n\t\tconfig: ColumnRuntimeConfig<T['data'], TRuntimeConfig>,\n\t) {\n\t\tthis.config = config;\n\t\tthis.name = config.name;\n\t\tthis.keyAsName = config.keyAsName;\n\t\tthis.notNull = config.notNull;\n\t\tthis.default = config.default;\n\t\tthis.defaultFn = config.defaultFn;\n\t\tthis.onUpdateFn = config.onUpdateFn;\n\t\tthis.hasDefault = config.hasDefault;\n\t\tthis.primary = config.primaryKey;\n\t\tthis.isUnique = config.isUnique;\n\t\tthis.uniqueName = config.uniqueName;\n\t\tthis.uniqueType = config.uniqueType;\n\t\tthis.dataType = config.dataType as T['dataType'];\n\t\tthis.columnType = config.columnType;\n\t\tthis.generated = config.generated;\n\t\tthis.generatedIdentity = config.generatedIdentity;\n\t}\n\n\tabstract getSQLType(): string;\n\n\tmapFromDriverValue(value: unknown): unknown {\n\t\treturn value;\n\t}\n\n\tmapToDriverValue(value: unknown): unknown {\n\t\treturn value;\n\t}\n\n\t// ** @internal */\n\tshouldDisableInsert(): boolean {\n\t\treturn this.config.generated !== undefined && this.config.generated.type !== 'byDefault';\n\t}\n}\n\nexport type UpdateColConfig<\n\tT extends ColumnBaseConfig<ColumnDataType, string>,\n\tTUpdate extends Partial<ColumnBaseConfig<ColumnDataType, string>>,\n> = Update<T, TUpdate>;\n\nexport type AnyColumn<TPartial extends Partial<ColumnBaseConfig<ColumnDataType, string>> = {}> = Column<\n\tRequired<Update<ColumnBaseConfig<ColumnDataType, string>, TPartial>>\n>;\n\nexport type GetColumnData<TColumn extends Column, TInferMode extends 'query' | 'raw' = 'query'> =\n\t// dprint-ignore\n\tTInferMode extends 'raw' // Raw mode\n\t\t? TColumn['_']['data'] // Just return the underlying type\n\t\t: TColumn['_']['notNull'] extends true // Query mode\n\t\t? TColumn['_']['data'] // Query mode, not null\n\t\t: TColumn['_']['data'] | null; // Query mode, nullable\n\nexport type InferColumnsDataTypes<TColumns extends Record<string, Column>> = {\n\t[Key in keyof TColumns]: GetColumnData<TColumns[Key], 'query'>;\n};\n", "export const entityKind = Symbol.for('drizzle:entityKind');\nexport const hasOwnEntityKind = Symbol.for('drizzle:hasOwnEntityKind');\n\nexport interface DrizzleEntity {\n\t[entityKind]: string;\n}\n\nexport type DrizzleEntityClass<T> =\n\t& ((abstract new(...args: any[]) => T) | (new(...args: any[]) => T))\n\t& DrizzleEntity;\n\nexport function is<T extends DrizzleEntityClass<any>>(value: any, type: T): value is InstanceType<T> {\n\tif (!value || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\n\tif (value instanceof type) { // eslint-disable-line no-instanceof/no-instanceof\n\t\treturn true;\n\t}\n\n\tif (!Object.prototype.hasOwnProperty.call(type, entityKind)) {\n\t\tthrow new Error(\n\t\t\t`Class \"${\n\t\t\t\ttype.name ?? '<unknown>'\n\t\t\t}\" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`,\n\t\t);\n\t}\n\n\tlet cls = Object.getPrototypeOf(value).constructor;\n\tif (cls) {\n\t\t// Traverse the prototype chain to find the entityKind\n\t\twhile (cls) {\n\t\t\tif (entityKind in cls && cls[entityKind] === type[entityKind]) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tcls = Object.getPrototypeOf(cls);\n\t\t}\n\t}\n\n\treturn false;\n}\n", "import type { CasingCache } from '~/casing.ts';\nimport { entityKind, is } from '~/entity.ts';\nimport { isPgEnum } from '~/pg-core/columns/enum.ts';\nimport type { SelectResult } from '~/query-builders/select.types.ts';\nimport { Subquery } from '~/subquery.ts';\nimport { tracer } from '~/tracing.ts';\nimport type { Assume, Equal } from '~/utils.ts';\nimport { ViewBaseConfig } from '~/view-common.ts';\nimport type { AnyColumn } from '../column.ts';\nimport { Column } from '../column.ts';\nimport { IsAlias, Table } from '../table.ts';\n\n/**\n * This class is used to indicate a primitive param value that is used in `sql` tag.\n * It is only used on type level and is never instantiated at runtime.\n * If you see a value of this type in the code, its runtime value is actually the primitive param value.\n */\nexport class FakePrimitiveParam {\n\tstatic readonly [entityKind]: string = 'FakePrimitiveParam';\n}\n\nexport type Chunk =\n\t| string\n\t| Table\n\t| View\n\t| AnyColumn\n\t| Name\n\t| Param\n\t| Placeholder\n\t| SQL;\n\nexport interface BuildQueryConfig {\n\tcasing: CasingCache;\n\tescapeName(name: string): string;\n\tescapeParam(num: number, value: unknown): string;\n\tescapeString(str: string): string;\n\tprepareTyping?: (encoder: DriverValueEncoder<unknown, unknown>) => QueryTypingsValue;\n\tparamStartIndex?: { value: number };\n\tinlineParams?: boolean;\n\tinvokeSource?: 'indexes' | undefined;\n}\n\nexport type QueryTypingsValue = 'json' | 'decimal' | 'time' | 'timestamp' | 'uuid' | 'date' | 'none';\n\nexport interface Query {\n\tsql: string;\n\tparams: unknown[];\n}\n\nexport interface QueryWithTypings extends Query {\n\ttypings?: QueryTypingsValue[];\n}\n\n/**\n * Any value that implements the `getSQL` method. The implementations include:\n * - `Table`\n * - `Column`\n * - `View`\n * - `Subquery`\n * - `SQL`\n * - `SQL.Aliased`\n * - `Placeholder`\n * - `Param`\n */\nexport interface SQLWrapper {\n\tgetSQL(): SQL;\n\tshouldOmitSQLParens?(): boolean;\n}\n\nexport function isSQLWrapper(value: unknown): value is SQLWrapper {\n\treturn value !== null && value !== undefined && typeof (value as any).getSQL === 'function';\n}\n\nfunction mergeQueries(queries: QueryWithTypings[]): QueryWithTypings {\n\tconst result: QueryWithTypings = { sql: '', params: [] };\n\tfor (const query of queries) {\n\t\tresult.sql += query.sql;\n\t\tresult.params.push(...query.params);\n\t\tif (query.typings?.length) {\n\t\t\tif (!result.typings) {\n\t\t\t\tresult.typings = [];\n\t\t\t}\n\t\t\tresult.typings.push(...query.typings);\n\t\t}\n\t}\n\treturn result;\n}\n\nexport class StringChunk implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'StringChunk';\n\n\treadonly value: string[];\n\n\tconstructor(value: string | string[]) {\n\t\tthis.value = Array.isArray(value) ? value : [value];\n\t}\n\n\tgetSQL(): SQL<unknown> {\n\t\treturn new SQL([this]);\n\t}\n}\n\nexport class SQL<T = unknown> implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'SQL';\n\n\tdeclare _: {\n\t\tbrand: 'SQL';\n\t\ttype: T;\n\t};\n\n\t/** @internal */\n\tdecoder: DriverValueDecoder<T, any> = noopDecoder;\n\tprivate shouldInlineParams = false;\n\n\t/** @internal */\n\tusedTables: string[] = [];\n\n\tconstructor(readonly queryChunks: SQLChunk[]) {\n\t\tfor (const chunk of queryChunks) {\n\t\t\tif (is(chunk, Table)) {\n\t\t\t\tconst schemaName = chunk[Table.Symbol.Schema];\n\n\t\t\t\tthis.usedTables.push(\n\t\t\t\t\tschemaName === undefined\n\t\t\t\t\t\t? chunk[Table.Symbol.Name]\n\t\t\t\t\t\t: schemaName + '.' + chunk[Table.Symbol.Name],\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tappend(query: SQL): this {\n\t\tthis.queryChunks.push(...query.queryChunks);\n\t\treturn this;\n\t}\n\n\ttoQuery(config: BuildQueryConfig): QueryWithTypings {\n\t\treturn tracer.startActiveSpan('drizzle.buildSQL', (span) => {\n\t\t\tconst query = this.buildQueryFromSourceParams(this.queryChunks, config);\n\t\t\tspan?.setAttributes({\n\t\t\t\t'drizzle.query.text': query.sql,\n\t\t\t\t'drizzle.query.params': JSON.stringify(query.params),\n\t\t\t});\n\t\t\treturn query;\n\t\t});\n\t}\n\n\tbuildQueryFromSourceParams(chunks: SQLChunk[], _config: BuildQueryConfig): Query {\n\t\tconst config = Object.assign({}, _config, {\n\t\t\tinlineParams: _config.inlineParams || this.shouldInlineParams,\n\t\t\tparamStartIndex: _config.paramStartIndex || { value: 0 },\n\t\t});\n\n\t\tconst {\n\t\t\tcasing,\n\t\t\tescapeName,\n\t\t\tescapeParam,\n\t\t\tprepareTyping,\n\t\t\tinlineParams,\n\t\t\tparamStartIndex,\n\t\t} = config;\n\n\t\treturn mergeQueries(chunks.map((chunk): QueryWithTypings => {\n\t\t\tif (is(chunk, StringChunk)) {\n\t\t\t\treturn { sql: chunk.value.join(''), params: [] };\n\t\t\t}\n\n\t\t\tif (is(chunk, Name)) {\n\t\t\t\treturn { sql: escapeName(chunk.value), params: [] };\n\t\t\t}\n\n\t\t\tif (chunk === undefined) {\n\t\t\t\treturn { sql: '', params: [] };\n\t\t\t}\n\n\t\t\tif (Array.isArray(chunk)) {\n\t\t\t\tconst result: SQLChunk[] = [new StringChunk('(')];\n\t\t\t\tfor (const [i, p] of chunk.entries()) {\n\t\t\t\t\tresult.push(p);\n\t\t\t\t\tif (i < chunk.length - 1) {\n\t\t\t\t\t\tresult.push(new StringChunk(', '));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresult.push(new StringChunk(')'));\n\t\t\t\treturn this.buildQueryFromSourceParams(result, config);\n\t\t\t}\n\n\t\t\tif (is(chunk, SQL)) {\n\t\t\t\treturn this.buildQueryFromSourceParams(chunk.queryChunks, {\n\t\t\t\t\t...config,\n\t\t\t\t\tinlineParams: inlineParams || chunk.shouldInlineParams,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (is(chunk, Table)) {\n\t\t\t\tconst schemaName = chunk[Table.Symbol.Schema];\n\t\t\t\tconst tableName = chunk[Table.Symbol.Name];\n\t\t\t\treturn {\n\t\t\t\t\tsql: schemaName === undefined || chunk[IsAlias]\n\t\t\t\t\t\t? escapeName(tableName)\n\t\t\t\t\t\t: escapeName(schemaName) + '.' + escapeName(tableName),\n\t\t\t\t\tparams: [],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (is(chunk, Column)) {\n\t\t\t\tconst columnName = casing.getColumnCasing(chunk);\n\t\t\t\tif (_config.invokeSource === 'indexes') {\n\t\t\t\t\treturn { sql: escapeName(columnName), params: [] };\n\t\t\t\t}\n\n\t\t\t\tconst schemaName = chunk.table[Table.Symbol.Schema];\n\t\t\t\treturn {\n\t\t\t\t\tsql: chunk.table[IsAlias] || schemaName === undefined\n\t\t\t\t\t\t? escapeName(chunk.table[Table.Symbol.Name]) + '.' + escapeName(columnName)\n\t\t\t\t\t\t: escapeName(schemaName) + '.' + escapeName(chunk.table[Table.Symbol.Name]) + '.'\n\t\t\t\t\t\t\t+ escapeName(columnName),\n\t\t\t\t\tparams: [],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (is(chunk, View)) {\n\t\t\t\tconst schemaName = chunk[ViewBaseConfig].schema;\n\t\t\t\tconst viewName = chunk[ViewBaseConfig].name;\n\t\t\t\treturn {\n\t\t\t\t\tsql: schemaName === undefined || chunk[ViewBaseConfig].isAlias\n\t\t\t\t\t\t? escapeName(viewName)\n\t\t\t\t\t\t: escapeName(schemaName) + '.' + escapeName(viewName),\n\t\t\t\t\tparams: [],\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (is(chunk, Param)) {\n\t\t\t\tif (is(chunk.value, Placeholder)) {\n\t\t\t\t\treturn { sql: escapeParam(paramStartIndex.value++, chunk), params: [chunk], typings: ['none'] };\n\t\t\t\t}\n\n\t\t\t\tconst mappedValue = chunk.value === null ? null : chunk.encoder.mapToDriverValue(chunk.value);\n\n\t\t\t\tif (is(mappedValue, SQL)) {\n\t\t\t\t\treturn this.buildQueryFromSourceParams([mappedValue], config);\n\t\t\t\t}\n\n\t\t\t\tif (inlineParams) {\n\t\t\t\t\treturn { sql: this.mapInlineParam(mappedValue, config), params: [] };\n\t\t\t\t}\n\n\t\t\t\tlet typings: QueryTypingsValue[] = ['none'];\n\t\t\t\tif (prepareTyping) {\n\t\t\t\t\ttypings = [prepareTyping(chunk.encoder)];\n\t\t\t\t}\n\n\t\t\t\treturn { sql: escapeParam(paramStartIndex.value++, mappedValue), params: [mappedValue], typings };\n\t\t\t}\n\n\t\t\tif (is(chunk, Placeholder)) {\n\t\t\t\treturn { sql: escapeParam(paramStartIndex.value++, chunk), params: [chunk], typings: ['none'] };\n\t\t\t}\n\n\t\t\tif (is(chunk, SQL.Aliased) && chunk.fieldAlias !== undefined) {\n\t\t\t\treturn { sql: escapeName(chunk.fieldAlias), params: [] };\n\t\t\t}\n\n\t\t\tif (is(chunk, Subquery)) {\n\t\t\t\tif (chunk._.isWith) {\n\t\t\t\t\treturn { sql: escapeName(chunk._.alias), params: [] };\n\t\t\t\t}\n\t\t\t\treturn this.buildQueryFromSourceParams([\n\t\t\t\t\tnew StringChunk('('),\n\t\t\t\t\tchunk._.sql,\n\t\t\t\t\tnew StringChunk(') '),\n\t\t\t\t\tnew Name(chunk._.alias),\n\t\t\t\t], config);\n\t\t\t}\n\n\t\t\tif (isPgEnum(chunk)) {\n\t\t\t\tif (chunk.schema) {\n\t\t\t\t\treturn { sql: escapeName(chunk.schema) + '.' + escapeName(chunk.enumName), params: [] };\n\t\t\t\t}\n\t\t\t\treturn { sql: escapeName(chunk.enumName), params: [] };\n\t\t\t}\n\n\t\t\tif (isSQLWrapper(chunk)) {\n\t\t\t\tif (chunk.shouldOmitSQLParens?.()) {\n\t\t\t\t\treturn this.buildQueryFromSourceParams([chunk.getSQL()], config);\n\t\t\t\t}\n\t\t\t\treturn this.buildQueryFromSourceParams([\n\t\t\t\t\tnew StringChunk('('),\n\t\t\t\t\tchunk.getSQL(),\n\t\t\t\t\tnew StringChunk(')'),\n\t\t\t\t], config);\n\t\t\t}\n\n\t\t\tif (inlineParams) {\n\t\t\t\treturn { sql: this.mapInlineParam(chunk, config), params: [] };\n\t\t\t}\n\n\t\t\treturn { sql: escapeParam(paramStartIndex.value++, chunk), params: [chunk], typings: ['none'] };\n\t\t}));\n\t}\n\n\tprivate mapInlineParam(\n\t\tchunk: unknown,\n\t\t{ escapeString }: BuildQueryConfig,\n\t): string {\n\t\tif (chunk === null) {\n\t\t\treturn 'null';\n\t\t}\n\t\tif (typeof chunk === 'number' || typeof chunk === 'boolean') {\n\t\t\treturn chunk.toString();\n\t\t}\n\t\tif (typeof chunk === 'string') {\n\t\t\treturn escapeString(chunk);\n\t\t}\n\t\tif (typeof chunk === 'object') {\n\t\t\tconst mappedValueAsString = chunk.toString();\n\t\t\tif (mappedValueAsString === '[object Object]') {\n\t\t\t\treturn escapeString(JSON.stringify(chunk));\n\t\t\t}\n\t\t\treturn escapeString(mappedValueAsString);\n\t\t}\n\t\tthrow new Error('Unexpected param value: ' + chunk);\n\t}\n\n\tgetSQL(): SQL {\n\t\treturn this;\n\t}\n\n\tas(alias: string): SQL.Aliased<T>;\n\t/**\n\t * @deprecated\n\t * Use ``sql<DataType>`query`.as(alias)`` instead.\n\t */\n\tas<TData>(): SQL<TData>;\n\t/**\n\t * @deprecated\n\t * Use ``sql<DataType>`query`.as(alias)`` instead.\n\t */\n\tas<TData>(alias: string): SQL.Aliased<TData>;\n\tas(alias?: string): SQL<T> | SQL.Aliased<T> {\n\t\t// TODO: remove with deprecated overloads\n\t\tif (alias === undefined) {\n\t\t\treturn this;\n\t\t}\n\n\t\treturn new SQL.Aliased(this, alias);\n\t}\n\n\tmapWith<\n\t\tTDecoder extends\n\t\t\t| DriverValueDecoder<any, any>\n\t\t\t| DriverValueDecoder<any, any>['mapFromDriverValue'],\n\t>(decoder: TDecoder): SQL<GetDecoderResult<TDecoder>> {\n\t\tthis.decoder = typeof decoder === 'function' ? { mapFromDriverValue: decoder } : decoder;\n\t\treturn this as SQL<GetDecoderResult<TDecoder>>;\n\t}\n\n\tinlineParams(): this {\n\t\tthis.shouldInlineParams = true;\n\t\treturn this;\n\t}\n\n\t/**\n\t * This method is used to conditionally include a part of the query.\n\t *\n\t * @param condition - Condition to check\n\t * @returns itself if the condition is `true`, otherwise `undefined`\n\t */\n\tif(condition: any | undefined): this | undefined {\n\t\treturn condition ? this : undefined;\n\t}\n}\n\nexport type GetDecoderResult<T> = T extends Column ? T['_']['data'] : T extends\n\t| DriverValueDecoder<infer TData, any>\n\t| DriverValueDecoder<infer TData, any>['mapFromDriverValue'] ? TData\n: never;\n\n/**\n * Any DB name (table, column, index etc.)\n */\nexport class Name implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'Name';\n\n\tprotected brand!: 'Name';\n\n\tconstructor(readonly value: string) {}\n\n\tgetSQL(): SQL<unknown> {\n\t\treturn new SQL([this]);\n\t}\n}\n\n/**\n * Any DB name (table, column, index etc.)\n * @deprecated Use `sql.identifier` instead.\n */\nexport function name(value: string): Name {\n\treturn new Name(value);\n}\n\nexport interface DriverValueDecoder<TData, TDriverParam> {\n\tmapFromDriverValue(value: TDriverParam): TData;\n}\n\nexport interface DriverValueEncoder<TData, TDriverParam> {\n\tmapToDriverValue(value: TData): TDriverParam | SQL;\n}\n\nexport function isDriverValueEncoder(value: unknown): value is DriverValueEncoder<any, any> {\n\treturn typeof value === 'object' && value !== null && 'mapToDriverValue' in value\n\t\t&& typeof (value as any).mapToDriverValue === 'function';\n}\n\nexport const noopDecoder: DriverValueDecoder<any, any> = {\n\tmapFromDriverValue: (value) => value,\n};\n\nexport const noopEncoder: DriverValueEncoder<any, any> = {\n\tmapToDriverValue: (value) => value,\n};\n\nexport interface DriverValueMapper<TData, TDriverParam>\n\textends DriverValueDecoder<TData, TDriverParam>, DriverValueEncoder<TData, TDriverParam>\n{}\n\nexport const noopMapper: DriverValueMapper<any, any> = {\n\t...noopDecoder,\n\t...noopEncoder,\n};\n\n/** Parameter value that is optionally bound to an encoder (for example, a column). */\nexport class Param<TDataType = unknown, TDriverParamType = TDataType> implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'Param';\n\n\tprotected brand!: 'BoundParamValue';\n\n\t/**\n\t * @param value - Parameter value\n\t * @param encoder - Encoder to convert the value to a driver parameter\n\t */\n\tconstructor(\n\t\treadonly value: TDataType,\n\t\treadonly encoder: DriverValueEncoder<TDataType, TDriverParamType> = noopEncoder,\n\t) {}\n\n\tgetSQL(): SQL<unknown> {\n\t\treturn new SQL([this]);\n\t}\n}\n\n/** @deprecated Use `sql.param` instead. */\nexport function param<TData, TDriver>(\n\tvalue: TData,\n\tencoder?: DriverValueEncoder<TData, TDriver>,\n): Param<TData, TDriver> {\n\treturn new Param(value, encoder);\n}\n\n/**\n * Anything that can be passed to the `` sql`...` `` tagged function.\n */\nexport type SQLChunk =\n\t| StringChunk\n\t| SQLChunk[]\n\t| SQLWrapper\n\t| SQL\n\t| Table\n\t| View\n\t| Subquery\n\t| AnyColumn\n\t| Param\n\t| Name\n\t| undefined\n\t| FakePrimitiveParam\n\t| Placeholder;\n\nexport function sql<T>(strings: TemplateStringsArray, ...params: any[]): SQL<T>;\n/*\n\tThe type of `params` is specified as `SQLChunk[]`, but that's slightly incorrect -\n\tin runtime, users won't pass `FakePrimitiveParam` instances as `params` - they will pass primitive values\n\twhich will be wrapped in `Param`. That's why the overload specifies `params` as `any[]` and not as `SQLSourceParam[]`.\n\tThis type is used to make our lives easier and the type checker happy.\n*/\nexport function sql(strings: TemplateStringsArray, ...params: SQLChunk[]): SQL {\n\tconst queryChunks: SQLChunk[] = [];\n\tif (params.length > 0 || (strings.length > 0 && strings[0] !== '')) {\n\t\tqueryChunks.push(new StringChunk(strings[0]!));\n\t}\n\tfor (const [paramIndex, param] of params.entries()) {\n\t\tqueryChunks.push(param, new StringChunk(strings[paramIndex + 1]!));\n\t}\n\n\treturn new SQL(queryChunks);\n}\n\nexport namespace sql {\n\texport function empty(): SQL {\n\t\treturn new SQL([]);\n\t}\n\n\t/** @deprecated - use `sql.join()` */\n\texport function fromList(list: SQLChunk[]): SQL {\n\t\treturn new SQL(list);\n\t}\n\n\t/**\n\t * Convenience function to create an SQL query from a raw string.\n\t * @param str The raw SQL query string.\n\t */\n\texport function raw(str: string): SQL {\n\t\treturn new SQL([new StringChunk(str)]);\n\t}\n\n\t/**\n\t * Join a list of SQL chunks with a separator.\n\t * @example\n\t * ```ts\n\t * const query = sql.join([sql`a`, sql`b`, sql`c`]);\n\t * // sql`abc`\n\t * ```\n\t * @example\n\t * ```ts\n\t * const query = sql.join([sql`a`, sql`b`, sql`c`], sql`, `);\n\t * // sql`a, b, c`\n\t * ```\n\t */\n\texport function join(chunks: SQLChunk[], separator?: SQLChunk): SQL {\n\t\tconst result: SQLChunk[] = [];\n\t\tfor (const [i, chunk] of chunks.entries()) {\n\t\t\tif (i > 0 && separator !== undefined) {\n\t\t\t\tresult.push(separator);\n\t\t\t}\n\t\t\tresult.push(chunk);\n\t\t}\n\t\treturn new SQL(result);\n\t}\n\n\t/**\n\t * Create a SQL chunk that represents a DB identifier (table, column, index etc.).\n\t * When used in a query, the identifier will be escaped based on the DB engine.\n\t * For example, in PostgreSQL, identifiers are escaped with double quotes.\n\t *\n\t * **WARNING: This function does not offer any protection against SQL injections, so you must validate any user input beforehand.**\n\t *\n\t * @example ```ts\n\t * const query = sql`SELECT * FROM ${sql.identifier('my-table')}`;\n\t * // 'SELECT * FROM \"my-table\"'\n\t * ```\n\t */\n\texport function identifier(value: string): Name {\n\t\treturn new Name(value);\n\t}\n\n\texport function placeholder<TName extends string>(name: TName): Placeholder<TName> {\n\t\treturn new Placeholder(name);\n\t}\n\n\texport function param<TData, TDriver>(\n\t\tvalue: TData,\n\t\tencoder?: DriverValueEncoder<TData, TDriver>,\n\t): Param<TData, TDriver> {\n\t\treturn new Param(value, encoder);\n\t}\n}\n\nexport namespace SQL {\n\texport class Aliased<T = unknown> implements SQLWrapper {\n\t\tstatic readonly [entityKind]: string = 'SQL.Aliased';\n\n\t\tdeclare _: {\n\t\t\tbrand: 'SQL.Aliased';\n\t\t\ttype: T;\n\t\t};\n\n\t\t/** @internal */\n\t\tisSelectionField = false;\n\n\t\tconstructor(\n\t\t\treadonly sql: SQL,\n\t\t\treadonly fieldAlias: string,\n\t\t) {}\n\n\t\tgetSQL(): SQL {\n\t\t\treturn this.sql;\n\t\t}\n\n\t\t/** @internal */\n\t\tclone() {\n\t\t\treturn new Aliased(this.sql, this.fieldAlias);\n\t\t}\n\t}\n}\n\nexport class Placeholder<TName extends string = string, TValue = any> implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'Placeholder';\n\n\tdeclare protected: TValue;\n\n\tconstructor(readonly name: TName) {}\n\n\tgetSQL(): SQL {\n\t\treturn new SQL([this]);\n\t}\n}\n\n/** @deprecated Use `sql.placeholder` instead. */\nexport function placeholder<TName extends string>(name: TName): Placeholder<TName> {\n\treturn new Placeholder(name);\n}\n\nexport function fillPlaceholders(params: unknown[], values: Record<string, unknown>): unknown[] {\n\treturn params.map((p) => {\n\t\tif (is(p, Placeholder)) {\n\t\t\tif (!(p.name in values)) {\n\t\t\t\tthrow new Error(`No value for placeholder \"${p.name}\" was provided`);\n\t\t\t}\n\n\t\t\treturn values[p.name];\n\t\t}\n\n\t\tif (is(p, Param) && is(p.value, Placeholder)) {\n\t\t\tif (!(p.value.name in values)) {\n\t\t\t\tthrow new Error(`No value for placeholder \"${p.value.name}\" was provided`);\n\t\t\t}\n\n\t\t\treturn p.encoder.mapToDriverValue(values[p.value.name]);\n\t\t}\n\n\t\treturn p;\n\t});\n}\n\nexport type ColumnsSelection = Record<string, unknown>;\n\nconst IsDrizzleView = Symbol.for('drizzle:IsDrizzleView');\n\nexport abstract class View<\n\tTName extends string = string,\n\tTExisting extends boolean = boolean,\n\tTSelection extends ColumnsSelection = ColumnsSelection,\n> implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'View';\n\n\tdeclare _: {\n\t\tbrand: 'View';\n\t\tviewBrand: string;\n\t\tname: TName;\n\t\texisting: TExisting;\n\t\tselectedFields: TSelection;\n\t};\n\n\t/** @internal */\n\t[ViewBaseConfig]: {\n\t\tname: TName;\n\t\toriginalName: TName;\n\t\tschema: string | undefined;\n\t\tselectedFields: ColumnsSelection;\n\t\tisExisting: TExisting;\n\t\tquery: TExisting extends true ? undefined : SQL;\n\t\tisAlias: boolean;\n\t};\n\n\t/** @internal */\n\t[IsDrizzleView] = true;\n\n\tdeclare readonly $inferSelect: InferSelectViewModel<View<Assume<TName, string>, TExisting, TSelection>>;\n\n\tconstructor(\n\t\t{ name, schema, selectedFields, query }: {\n\t\t\tname: TName;\n\t\t\tschema: string | undefined;\n\t\t\tselectedFields: ColumnsSelection;\n\t\t\tquery: SQL | undefined;\n\t\t},\n\t) {\n\t\tthis[ViewBaseConfig] = {\n\t\t\tname,\n\t\t\toriginalName: name,\n\t\t\tschema,\n\t\t\tselectedFields,\n\t\t\tquery: query as (TExisting extends true ? undefined : SQL),\n\t\t\tisExisting: !query as TExisting,\n\t\t\tisAlias: false,\n\t\t};\n\t}\n\n\tgetSQL(): SQL<unknown> {\n\t\treturn new SQL([this]);\n\t}\n}\n\nexport function isView(view: unknown): view is View {\n\treturn typeof view === 'object' && view !== null && IsDrizzleView in view;\n}\n\nexport function getViewName<T extends View>(view: T): T['_']['name'] {\n\treturn view[ViewBaseConfig].name;\n}\n\nexport type InferSelectViewModel<TView extends View> =\n\tEqual<TView['_']['selectedFields'], { [x: string]: unknown }> extends true ? { [x: string]: unknown }\n\t\t: SelectResult<\n\t\t\tTView['_']['selectedFields'],\n\t\t\t'single',\n\t\t\tRecord<TView['_']['name'], 'not-null'>\n\t\t>;\n\n// Defined separately from the Column class to resolve circular dependency\nColumn.prototype.getSQL = function() {\n\treturn new SQL([this]);\n};\n\n// Defined separately from the Table class to resolve circular dependency\nTable.prototype.getSQL = function() {\n\treturn new SQL([this]);\n};\n\n// Defined separately from the Column class to resolve circular dependency\nSubquery.prototype.getSQL = function() {\n\treturn new SQL([this]);\n};\n", "import type { ColumnBuilderBaseConfig, ColumnBuilderRuntimeConfig, MakeColumnConfig } from '~/column-builder.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { AnyPgTable } from '~/pg-core/table.ts';\nimport type { NonArray, Writable } from '~/utils.ts';\nimport { PgColumn, PgColumnBuilder } from './common.ts';\n\n// Enum as ts enum\n\nexport type PgEnumObjectColumnBuilderInitial<TName extends string, TValues extends object> = PgEnumObjectColumnBuilder<{\n\tname: TName;\n\tdataType: 'string';\n\tcolumnType: 'PgEnumObjectColumn';\n\tdata: TValues[keyof TValues];\n\tenumValues: string[];\n\tdriverParam: string;\n}>;\n\nexport interface PgEnumObject<TValues extends object> {\n\t(): PgEnumObjectColumnBuilderInitial<'', TValues>;\n\t<TName extends string>(name: TName): PgEnumObjectColumnBuilderInitial<TName, TValues>;\n\t<TName extends string>(name?: TName): PgEnumObjectColumnBuilderInitial<TName, TValues>;\n\n\treadonly enumName: string;\n\treadonly enumValues: string[];\n\treadonly schema: string | undefined;\n\t/** @internal */\n\t[isPgEnumSym]: true;\n}\n\nexport class PgEnumObjectColumnBuilder<\n\tT extends ColumnBuilderBaseConfig<'string', 'PgEnumObjectColumn'> & { enumValues: string[] },\n> extends PgColumnBuilder<T, { enum: PgEnumObject<any> }> {\n\tstatic override readonly [entityKind]: string = 'PgEnumObjectColumnBuilder';\n\n\tconstructor(name: T['name'], enumInstance: PgEnumObject<any>) {\n\t\tsuper(name, 'string', 'PgEnumObjectColumn');\n\t\tthis.config.enum = enumInstance;\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnyPgTable<{ name: TTableName }>,\n\t): PgEnumObjectColumn<MakeColumnConfig<T, TTableName>> {\n\t\treturn new PgEnumObjectColumn<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class PgEnumObjectColumn<T extends ColumnBaseConfig<'string', 'PgEnumObjectColumn'> & { enumValues: object }>\n\textends PgColumn<T, { enum: PgEnumObject<object> }>\n{\n\tstatic override readonly [entityKind]: string = 'PgEnumObjectColumn';\n\n\treadonly enum;\n\toverride readonly enumValues = this.config.enum.enumValues;\n\n\tconstructor(\n\t\ttable: AnyPgTable<{ name: T['tableName'] }>,\n\t\tconfig: PgEnumObjectColumnBuilder<T>['config'],\n\t) {\n\t\tsuper(table, config);\n\t\tthis.enum = config.enum;\n\t}\n\n\tgetSQLType(): string {\n\t\treturn this.enum.enumName;\n\t}\n}\n\n// Enum as string union\n\nexport type PgEnumColumnBuilderInitial<TName extends string, TValues extends [string, ...string[]]> =\n\tPgEnumColumnBuilder<{\n\t\tname: TName;\n\t\tdataType: 'string';\n\t\tcolumnType: 'PgEnumColumn';\n\t\tdata: TValues[number];\n\t\tenumValues: TValues;\n\t\tdriverParam: string;\n\t}>;\n\nconst isPgEnumSym = Symbol.for('drizzle:isPgEnum');\nexport interface PgEnum<TValues extends [string, ...string[]]> {\n\t(): PgEnumColumnBuilderInitial<'', TValues>;\n\t<TName extends string>(name: TName): PgEnumColumnBuilderInitial<TName, TValues>;\n\t<TName extends string>(name?: TName): PgEnumColumnBuilderInitial<TName, TValues>;\n\n\treadonly enumName: string;\n\treadonly enumValues: TValues;\n\treadonly schema: string | undefined;\n\t/** @internal */\n\t[isPgEnumSym]: true;\n}\n\nexport function isPgEnum(obj: unknown): obj is PgEnum<[string, ...string[]]> {\n\treturn !!obj && typeof obj === 'function' && isPgEnumSym in obj && obj[isPgEnumSym] === true;\n}\n\nexport class PgEnumColumnBuilder<\n\tT extends ColumnBuilderBaseConfig<'string', 'PgEnumColumn'> & { enumValues: [string, ...string[]] },\n> extends PgColumnBuilder<T, { enum: PgEnum<T['enumValues']> }> {\n\tstatic override readonly [entityKind]: string = 'PgEnumColumnBuilder';\n\n\tconstructor(name: T['name'], enumInstance: PgEnum<T['enumValues']>) {\n\t\tsuper(name, 'string', 'PgEnumColumn');\n\t\tthis.config.enum = enumInstance;\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnyPgTable<{ name: TTableName }>,\n\t): PgEnumColumn<MakeColumnConfig<T, TTableName>> {\n\t\treturn new PgEnumColumn<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class PgEnumColumn<T extends ColumnBaseConfig<'string', 'PgEnumColumn'> & { enumValues: [string, ...string[]] }>\n\textends PgColumn<T, { enum: PgEnum<T['enumValues']> }>\n{\n\tstatic override readonly [entityKind]: string = 'PgEnumColumn';\n\n\treadonly enum = this.config.enum;\n\toverride readonly enumValues = this.config.enum.enumValues;\n\n\tconstructor(\n\t\ttable: AnyPgTable<{ name: T['tableName'] }>,\n\t\tconfig: PgEnumColumnBuilder<T>['config'],\n\t) {\n\t\tsuper(table, config);\n\t\tthis.enum = config.enum;\n\t}\n\n\tgetSQLType(): string {\n\t\treturn this.enum.enumName;\n\t}\n}\n\nexport function pgEnum<U extends string, T extends Readonly<[U, ...U[]]>>(\n\tenumName: string,\n\tvalues: T | Writable<T>,\n): PgEnum<Writable<T>>;\n\nexport function pgEnum<E extends Record<string, string>>(\n\tenumName: string,\n\tenumObj: NonArray<E>,\n): PgEnumObject<E>;\n\nexport function pgEnum(\n\tenumName: any,\n\tinput: any,\n): any {\n\treturn Array.isArray(input)\n\t\t? pgEnumWithSchema(enumName, [...input] as [string, ...string[]], undefined)\n\t\t: pgEnumObjectWithSchema(enumName, input, undefined);\n}\n\n/** @internal */\nexport function pgEnumWithSchema<U extends string, T extends Readonly<[U, ...U[]]>>(\n\tenumName: string,\n\tvalues: T | Writable<T>,\n\tschema?: string,\n): PgEnum<Writable<T>> {\n\tconst enumInstance: PgEnum<Writable<T>> = Object.assign(\n\t\t<TName extends string>(name?: TName): PgEnumColumnBuilderInitial<TName, Writable<T>> =>\n\t\t\tnew PgEnumColumnBuilder(name ?? '' as TName, enumInstance),\n\t\t{\n\t\t\tenumName,\n\t\t\tenumValues: values,\n\t\t\tschema,\n\t\t\t[isPgEnumSym]: true,\n\t\t} as const,\n\t);\n\n\treturn enumInstance;\n}\n\n/** @internal */\nexport function pgEnumObjectWithSchema<T extends object>(\n\tenumName: string,\n\tvalues: T,\n\tschema?: string,\n): PgEnumObject<T> {\n\tconst enumInstance: PgEnumObject<T> = Object.assign(\n\t\t<TName extends string>(name?: TName): PgEnumObjectColumnBuilderInitial<TName, T> =>\n\t\t\tnew PgEnumObjectColumnBuilder(name ?? '' as TName, enumInstance),\n\t\t{\n\t\t\tenumName,\n\t\t\tenumValues: Object.values(values),\n\t\t\tschema,\n\t\t\t[isPgEnumSym]: true,\n\t\t} as const,\n\t);\n\n\treturn enumInstance;\n}\n", "import type {\n\tColumnBuilderBase,\n\tColumnBuilderBaseConfig,\n\tColumnBuilderExtraConfig,\n\tColumnBuilderRuntimeConfig,\n\tColumnDataType,\n\tHasGenerated,\n\tMakeColumnConfig,\n} from '~/column-builder.ts';\nimport { ColumnBuilder } from '~/column-builder.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { Column } from '~/column.ts';\nimport { entityKind, is } from '~/entity.ts';\nimport type { Simplify, Update } from '~/utils.ts';\n\nimport type { ForeignKey, UpdateDeleteAction } from '~/pg-core/foreign-keys.ts';\nimport { ForeignKeyBuilder } from '~/pg-core/foreign-keys.ts';\nimport type { AnyPgTable, PgTable } from '~/pg-core/table.ts';\nimport type { SQL } from '~/sql/sql.ts';\nimport { iife } from '~/tracing-utils.ts';\nimport type { PgIndexOpClass } from '../indexes.ts';\nimport { uniqueKeyName } from '../unique-constraint.ts';\nimport { makePgArray, parsePgArray } from '../utils/array.ts';\n\nexport interface ReferenceConfig {\n\tref: () => PgColumn;\n\tactions: {\n\t\tonUpdate?: UpdateDeleteAction;\n\t\tonDelete?: UpdateDeleteAction;\n\t};\n}\n\nexport interface PgColumnBuilderBase<\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string> = ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTTypeConfig extends object = object,\n> extends ColumnBuilderBase<T, TTypeConfig & { dialect: 'pg' }> {}\n\nexport abstract class PgColumnBuilder<\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string> = ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTRuntimeConfig extends object = object,\n\tTTypeConfig extends object = object,\n\tTExtraConfig extends ColumnBuilderExtraConfig = ColumnBuilderExtraConfig,\n> extends ColumnBuilder<T, TRuntimeConfig, TTypeConfig & { dialect: 'pg' }, TExtraConfig>\n\timplements PgColumnBuilderBase<T, TTypeConfig>\n{\n\tprivate foreignKeyConfigs: ReferenceConfig[] = [];\n\n\tstatic override readonly [entityKind]: string = 'PgColumnBuilder';\n\n\tarray<TSize extends number | undefined = undefined>(size?: TSize): PgArrayBuilder<\n\t\t& {\n\t\t\tname: T['name'];\n\t\t\tdataType: 'array';\n\t\t\tcolumnType: 'PgArray';\n\t\t\tdata: T['data'][];\n\t\t\tdriverParam: T['driverParam'][] | string;\n\t\t\tenumValues: T['enumValues'];\n\t\t\tsize: TSize;\n\t\t\tbaseBuilder: T;\n\t\t}\n\t\t& (T extends { notNull: true } ? { notNull: true } : {})\n\t\t& (T extends { hasDefault: true } ? { hasDefault: true } : {}),\n\t\tT\n\t> {\n\t\treturn new PgArrayBuilder(this.config.name, this as PgColumnBuilder<any, any>, size as any);\n\t}\n\n\treferences(\n\t\tref: ReferenceConfig['ref'],\n\t\tactions: ReferenceConfig['actions'] = {},\n\t): this {\n\t\tthis.foreignKeyConfigs.push({ ref, actions });\n\t\treturn this;\n\t}\n\n\tunique(\n\t\tname?: string,\n\t\tconfig?: { nulls: 'distinct' | 'not distinct' },\n\t): this {\n\t\tthis.config.isUnique = true;\n\t\tthis.config.uniqueName = name;\n\t\tthis.config.uniqueType = config?.nulls;\n\t\treturn this;\n\t}\n\n\tgeneratedAlwaysAs(as: SQL | T['data'] | (() => SQL)): HasGenerated<this, {\n\t\ttype: 'always';\n\t}> {\n\t\tthis.config.generated = {\n\t\t\tas,\n\t\t\ttype: 'always',\n\t\t\tmode: 'stored',\n\t\t};\n\t\treturn this as HasGenerated<this, {\n\t\t\ttype: 'always';\n\t\t}>;\n\t}\n\n\t/** @internal */\n\tbuildForeignKeys(column: PgColumn, table: PgTable): ForeignKey[] {\n\t\treturn this.foreignKeyConfigs.map(({ ref, actions }) => {\n\t\t\treturn iife(\n\t\t\t\t(ref, actions) => {\n\t\t\t\t\tconst builder = new ForeignKeyBuilder(() => {\n\t\t\t\t\t\tconst foreignColumn = ref();\n\t\t\t\t\t\treturn { columns: [column], foreignColumns: [foreignColumn] };\n\t\t\t\t\t});\n\t\t\t\t\tif (actions.onUpdate) {\n\t\t\t\t\t\tbuilder.onUpdate(actions.onUpdate);\n\t\t\t\t\t}\n\t\t\t\t\tif (actions.onDelete) {\n\t\t\t\t\t\tbuilder.onDelete(actions.onDelete);\n\t\t\t\t\t}\n\t\t\t\t\treturn builder.build(table);\n\t\t\t\t},\n\t\t\t\tref,\n\t\t\t\tactions,\n\t\t\t);\n\t\t});\n\t}\n\n\t/** @internal */\n\tabstract build<TTableName extends string>(\n\t\ttable: AnyPgTable<{ name: TTableName }>,\n\t): PgColumn<MakeColumnConfig<T, TTableName>>;\n\n\t/** @internal */\n\tbuildExtraConfigColumn<TTableName extends string>(\n\t\ttable: AnyPgTable<{ name: TTableName }>,\n\t): ExtraConfigColumn {\n\t\treturn new ExtraConfigColumn(table, this.config);\n\t}\n}\n\n// To understand how to use `PgColumn` and `PgColumn`, see `Column` and `AnyColumn` documentation.\nexport abstract class PgColumn<\n\tT extends ColumnBaseConfig<ColumnDataType, string> = ColumnBaseConfig<ColumnDataType, string>,\n\tTRuntimeConfig extends object = {},\n\tTTypeConfig extends object = {},\n> extends Column<T, TRuntimeConfig, TTypeConfig & { dialect: 'pg' }> {\n\tstatic override readonly [entityKind]: string = 'PgColumn';\n\n\tconstructor(\n\t\toverride readonly table: PgTable,\n\t\tconfig: ColumnBuilderRuntimeConfig<T['data'], TRuntimeConfig>,\n\t) {\n\t\tif (!config.uniqueName) {\n\t\t\tconfig.uniqueName = uniqueKeyName(table, [config.name]);\n\t\t}\n\t\tsuper(table, config);\n\t}\n}\n\nexport type IndexedExtraConfigType = { order?: 'asc' | 'desc'; nulls?: 'first' | 'last'; opClass?: string };\n\nexport class ExtraConfigColumn<\n\tT extends ColumnBaseConfig<ColumnDataType, string> = ColumnBaseConfig<ColumnDataType, string>,\n> extends PgColumn<T, IndexedExtraConfigType> {\n\tstatic override readonly [entityKind]: string = 'ExtraConfigColumn';\n\n\toverride getSQLType(): string {\n\t\treturn this.getSQLType();\n\t}\n\n\tindexConfig: IndexedExtraConfigType = {\n\t\torder: this.config.order ?? 'asc',\n\t\tnulls: this.config.nulls ?? 'last',\n\t\topClass: this.config.opClass,\n\t};\n\tdefaultConfig: IndexedExtraConfigType = {\n\t\torder: 'asc',\n\t\tnulls: 'last',\n\t\topClass: undefined,\n\t};\n\n\tasc(): Omit<this, 'asc' | 'desc'> {\n\t\tthis.indexConfig.order = 'asc';\n\t\treturn this;\n\t}\n\n\tdesc(): Omit<this, 'asc' | 'desc'> {\n\t\tthis.indexConfig.order = 'desc';\n\t\treturn this;\n\t}\n\n\tnullsFirst(): Omit<this, 'nullsFirst' | 'nullsLast'> {\n\t\tthis.indexConfig.nulls = 'first';\n\t\treturn this;\n\t}\n\n\tnullsLast(): Omit<this, 'nullsFirst' | 'nullsLast'> {\n\t\tthis.indexConfig.nulls = 'last';\n\t\treturn this;\n\t}\n\n\t/**\n\t * ### PostgreSQL documentation quote\n\t *\n\t * > An operator class with optional parameters can be specified for each column of an index.\n\t * The operator class identifies the operators to be used by the index for that column.\n\t * For example, a B-tree index on four-byte integers would use the int4_ops class;\n\t * this operator class includes comparison functions for four-byte integers.\n\t * In practice the default operator class for the column's data type is usually sufficient.\n\t * The main point of having operator classes is that for some data types, there could be more than one meaningful ordering.\n\t * For example, we might want to sort a complex-number data type either by absolute value or by real part.\n\t * We could do this by defining two operator classes for the data type and then selecting the proper class when creating an index.\n\t * More information about operator classes check:\n\t *\n\t * ### Useful links\n\t * https://www.postgresql.org/docs/current/sql-createindex.html\n\t *\n\t * https://www.postgresql.org/docs/current/indexes-opclass.html\n\t *\n\t * https://www.postgresql.org/docs/current/xindex.html\n\t *\n\t * ### Additional types\n\t * If you have the `pg_vector` extension installed in your database, you can use the\n\t * `vector_l2_ops`, `vector_ip_ops`, `vector_cosine_ops`, `vector_l1_ops`, `bit_hamming_ops`, `bit_jaccard_ops`, `halfvec_l2_ops`, `sparsevec_l2_ops` options, which are predefined types.\n\t *\n\t * **You can always specify any string you want in the operator class, in case Drizzle doesn't have it natively in its types**\n\t *\n\t * @param opClass\n\t * @returns\n\t */\n\top(opClass: PgIndexOpClass): Omit<this, 'op'> {\n\t\tthis.indexConfig.opClass = opClass;\n\t\treturn this;\n\t}\n}\n\nexport class IndexedColumn {\n\tstatic readonly [entityKind]: string = 'IndexedColumn';\n\tconstructor(\n\t\tname: string | undefined,\n\t\tkeyAsName: boolean,\n\t\ttype: string,\n\t\tindexConfig: IndexedExtraConfigType,\n\t) {\n\t\tthis.name = name;\n\t\tthis.keyAsName = keyAsName;\n\t\tthis.type = type;\n\t\tthis.indexConfig = indexConfig;\n\t}\n\n\tname: string | undefined;\n\tkeyAsName: boolean;\n\ttype: string;\n\tindexConfig: IndexedExtraConfigType;\n}\n\nexport type AnyPgColumn<TPartial extends Partial<ColumnBaseConfig<ColumnDataType, string>> = {}> = PgColumn<\n\tRequired<Update<ColumnBaseConfig<ColumnDataType, string>, TPartial>>\n>;\n\nexport type PgArrayColumnBuilderBaseConfig = ColumnBuilderBaseConfig<'array', 'PgArray'> & {\n\tsize: number | undefined;\n\tbaseBuilder: ColumnBuilderBaseConfig<ColumnDataType, string>;\n};\n\nexport class PgArrayBuilder<\n\tT extends PgArrayColumnBuilderBaseConfig,\n\tTBase extends ColumnBuilderBaseConfig<ColumnDataType, string> | PgArrayColumnBuilderBaseConfig,\n> extends PgColumnBuilder<\n\tT,\n\t{\n\t\tbaseBuilder: TBase extends PgArrayColumnBuilderBaseConfig ? PgArrayBuilder<\n\t\t\t\tTBase,\n\t\t\t\tTBase extends { baseBuilder: infer TBaseBuilder extends ColumnBuilderBaseConfig<any, any> } ? TBaseBuilder\n\t\t\t\t\t: never\n\t\t\t>\n\t\t\t: PgColumnBuilder<TBase, {}, Simplify<Omit<TBase, keyof ColumnBuilderBaseConfig<any, any>>>>;\n\t\tsize: T['size'];\n\t},\n\t{\n\t\tbaseBuilder: TBase extends PgArrayColumnBuilderBaseConfig ? PgArrayBuilder<\n\t\t\t\tTBase,\n\t\t\t\tTBase extends { baseBuilder: infer TBaseBuilder extends ColumnBuilderBaseConfig<any, any> } ? TBaseBuilder\n\t\t\t\t\t: never\n\t\t\t>\n\t\t\t: PgColumnBuilder<TBase, {}, Simplify<Omit<TBase, keyof ColumnBuilderBaseConfig<any, any>>>>;\n\t\tsize: T['size'];\n\t}\n> {\n\tstatic override readonly [entityKind] = 'PgArrayBuilder';\n\n\tconstructor(\n\t\tname: string,\n\t\tbaseBuilder: PgArrayBuilder<T, TBase>['config']['baseBuilder'],\n\t\tsize: T['size'],\n\t) {\n\t\tsuper(name, 'array', 'PgArray');\n\t\tthis.config.baseBuilder = baseBuilder;\n\t\tthis.config.size = size;\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnyPgTable<{ name: TTableName }>,\n\t): PgArray<MakeColumnConfig<T, TTableName> & { size: T['size']; baseBuilder: T['baseBuilder'] }, TBase> {\n\t\tconst baseColumn = this.config.baseBuilder.build(table);\n\t\treturn new PgArray<MakeColumnConfig<T, TTableName> & { size: T['size']; baseBuilder: T['baseBuilder'] }, TBase>(\n\t\t\ttable as AnyPgTable<{ name: MakeColumnConfig<T, TTableName>['tableName'] }>,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t\tbaseColumn,\n\t\t);\n\t}\n}\n\nexport class PgArray<\n\tT extends ColumnBaseConfig<'array', 'PgArray'> & {\n\t\tsize: number | undefined;\n\t\tbaseBuilder: ColumnBuilderBaseConfig<ColumnDataType, string>;\n\t},\n\tTBase extends ColumnBuilderBaseConfig<ColumnDataType, string>,\n> extends PgColumn<T, {}, { size: T['size']; baseBuilder: T['baseBuilder'] }> {\n\treadonly size: T['size'];\n\n\tstatic override readonly [entityKind]: string = 'PgArray';\n\n\tconstructor(\n\t\ttable: AnyPgTable<{ name: T['tableName'] }>,\n\t\tconfig: PgArrayBuilder<T, TBase>['config'],\n\t\treadonly baseColumn: PgColumn,\n\t\treadonly range?: [number | undefined, number | undefined],\n\t) {\n\t\tsuper(table, config);\n\t\tthis.size = config.size;\n\t}\n\n\tgetSQLType(): string {\n\t\treturn `${this.baseColumn.getSQLType()}[${typeof this.size === 'number' ? this.size : ''}]`;\n\t}\n\n\toverride mapFromDriverValue(value: unknown[] | string): T['data'] {\n\t\tif (typeof value === 'string') {\n\t\t\t// Thank you node-postgres for not parsing enum arrays\n\t\t\tvalue = parsePgArray(value);\n\t\t}\n\t\treturn value.map((v) => this.baseColumn.mapFromDriverValue(v));\n\t}\n\n\toverride mapToDriverValue(value: unknown[], isNestedArray = false): unknown[] | string {\n\t\tconst a = value.map((v) =>\n\t\t\tv === null\n\t\t\t\t? null\n\t\t\t\t: is(this.baseColumn, PgArray)\n\t\t\t\t? this.baseColumn.mapToDriverValue(v as unknown[], true)\n\t\t\t\t: this.baseColumn.mapToDriverValue(v)\n\t\t);\n\t\tif (isNestedArray) return a;\n\t\treturn makePgArray(a);\n\t}\n}\n", "import { entityKind } from '~/entity.ts';\nimport type { Column } from './column.ts';\nimport type { GelColumn, GelExtraConfigColumn } from './gel-core/index.ts';\nimport type { MySqlColumn } from './mysql-core/index.ts';\nimport type { ExtraConfigColumn, PgColumn, PgSequenceOptions } from './pg-core/index.ts';\nimport type { SingleStoreColumn } from './singlestore-core/index.ts';\nimport type { SQL } from './sql/sql.ts';\nimport type { SQLiteColumn } from './sqlite-core/index.ts';\nimport type { Assume, Simplify } from './utils.ts';\n\nexport type ColumnDataType =\n\t| 'string'\n\t| 'number'\n\t| 'boolean'\n\t| 'array'\n\t| 'json'\n\t| 'date'\n\t| 'bigint'\n\t| 'custom'\n\t| 'buffer'\n\t| 'dateDuration'\n\t| 'duration'\n\t| 'relDuration'\n\t| 'localTime'\n\t| 'localDate'\n\t| 'localDateTime';\n\nexport type Dialect = 'pg' | 'mysql' | 'sqlite' | 'singlestore' | 'common' | 'gel';\n\nexport type GeneratedStorageMode = 'virtual' | 'stored';\n\nexport type GeneratedType = 'always' | 'byDefault';\n\nexport type GeneratedColumnConfig<TDataType> = {\n\tas: TDataType | SQL | (() => SQL);\n\ttype?: GeneratedType;\n\tmode?: GeneratedStorageMode;\n};\n\nexport type GeneratedIdentityConfig = {\n\tsequenceName?: string;\n\tsequenceOptions?: PgSequenceOptions;\n\ttype: 'always' | 'byDefault';\n};\n\nexport interface ColumnBuilderBaseConfig<TDataType extends ColumnDataType, TColumnType extends string> {\n\tname: string;\n\tdataType: TDataType;\n\tcolumnType: TColumnType;\n\tdata: unknown;\n\tdriverParam: unknown;\n\tenumValues: string[] | undefined;\n}\n\nexport type MakeColumnConfig<\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTTableName extends string,\n\tTData = T extends { $type: infer U } ? U : T['data'],\n> = {\n\tname: T['name'];\n\ttableName: TTableName;\n\tdataType: T['dataType'];\n\tcolumnType: T['columnType'];\n\tdata: TData;\n\tdriverParam: T['driverParam'];\n\tnotNull: T extends { notNull: true } ? true : false;\n\thasDefault: T extends { hasDefault: true } ? true : false;\n\tisPrimaryKey: T extends { isPrimaryKey: true } ? true : false;\n\tisAutoincrement: T extends { isAutoincrement: true } ? true : false;\n\thasRuntimeDefault: T extends { hasRuntimeDefault: true } ? true : false;\n\tenumValues: T['enumValues'];\n\tbaseColumn: T extends { baseBuilder: infer U extends ColumnBuilderBase } ? BuildColumn<TTableName, U, 'common'>\n\t\t: never;\n\tidentity: T extends { identity: 'always' } ? 'always' : T extends { identity: 'byDefault' } ? 'byDefault' : undefined;\n\tgenerated: T extends { generated: infer G } ? unknown extends G ? undefined\n\t\t: G extends undefined ? undefined\n\t\t: G\n\t\t: undefined;\n} & {};\n\nexport type ColumnBuilderTypeConfig<\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTTypeConfig extends object = object,\n> = Simplify<\n\t& {\n\t\tbrand: 'ColumnBuilder';\n\t\tname: T['name'];\n\t\tdataType: T['dataType'];\n\t\tcolumnType: T['columnType'];\n\t\tdata: T['data'];\n\t\tdriverParam: T['driverParam'];\n\t\tnotNull: T extends { notNull: infer U } ? U : boolean;\n\t\thasDefault: T extends { hasDefault: infer U } ? U : boolean;\n\t\tenumValues: T['enumValues'];\n\t\tidentity: T extends { identity: infer U } ? U : unknown;\n\t\tgenerated: T extends { generated: infer G } ? G extends undefined ? unknown : G : unknown;\n\t}\n\t& TTypeConfig\n>;\n\nexport type ColumnBuilderRuntimeConfig<TData, TRuntimeConfig extends object = object> = {\n\tname: string;\n\tkeyAsName: boolean;\n\tnotNull: boolean;\n\tdefault: TData | SQL | undefined;\n\tdefaultFn: (() => TData | SQL) | undefined;\n\tonUpdateFn: (() => TData | SQL) | undefined;\n\thasDefault: boolean;\n\tprimaryKey: boolean;\n\tisUnique: boolean;\n\tuniqueName: string | undefined;\n\tuniqueType: string | undefined;\n\tdataType: string;\n\tcolumnType: string;\n\tgenerated: GeneratedColumnConfig<TData> | undefined;\n\tgeneratedIdentity: GeneratedIdentityConfig | undefined;\n} & TRuntimeConfig;\n\nexport interface ColumnBuilderExtraConfig {\n\tprimaryKeyHasDefault?: boolean;\n}\n\nexport type NotNull<T extends ColumnBuilderBase> = T & {\n\t_: {\n\t\tnotNull: true;\n\t};\n};\n\nexport type HasDefault<T extends ColumnBuilderBase> = T & {\n\t_: {\n\t\thasDefault: true;\n\t};\n};\n\nexport type IsPrimaryKey<T extends ColumnBuilderBase> = T & {\n\t_: {\n\t\tisPrimaryKey: true;\n\t};\n};\n\nexport type IsAutoincrement<T extends ColumnBuilderBase> = T & {\n\t_: {\n\t\tisAutoincrement: true;\n\t};\n};\n\nexport type HasRuntimeDefault<T extends ColumnBuilderBase> = T & {\n\t_: {\n\t\thasRuntimeDefault: true;\n\t};\n};\n\nexport type $Type<T extends ColumnBuilderBase, TType> = T & {\n\t_: {\n\t\t$type: TType;\n\t};\n};\n\nexport type HasGenerated<T extends ColumnBuilderBase, TGenerated extends {} = {}> = T & {\n\t_: {\n\t\thasDefault: true;\n\t\tgenerated: TGenerated;\n\t};\n};\n\nexport type IsIdentity<\n\tT extends ColumnBuilderBase,\n\tTType extends 'always' | 'byDefault',\n> = T & {\n\t_: {\n\t\tnotNull: true;\n\t\thasDefault: true;\n\t\tidentity: TType;\n\t};\n};\nexport interface ColumnBuilderBase<\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string> = ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTTypeConfig extends object = object,\n> {\n\t_: ColumnBuilderTypeConfig<T, TTypeConfig>;\n}\n\n// To understand how to use `ColumnBuilder` and `AnyColumnBuilder`, see `Column` and `AnyColumn` documentation.\nexport abstract class ColumnBuilder<\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string> = ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTRuntimeConfig extends object = object,\n\tTTypeConfig extends object = object,\n\tTExtraConfig extends ColumnBuilderExtraConfig = ColumnBuilderExtraConfig,\n> implements ColumnBuilderBase<T, TTypeConfig> {\n\tstatic readonly [entityKind]: string = 'ColumnBuilder';\n\n\tdeclare _: ColumnBuilderTypeConfig<T, TTypeConfig>;\n\n\tprotected config: ColumnBuilderRuntimeConfig<T['data'], TRuntimeConfig>;\n\n\tconstructor(name: T['name'], dataType: T['dataType'], columnType: T['columnType']) {\n\t\tthis.config = {\n\t\t\tname,\n\t\t\tkeyAsName: name === '',\n\t\t\tnotNull: false,\n\t\t\tdefault: undefined,\n\t\t\thasDefault: false,\n\t\t\tprimaryKey: false,\n\t\t\tisUnique: false,\n\t\t\tuniqueName: undefined,\n\t\t\tuniqueType: undefined,\n\t\t\tdataType,\n\t\t\tcolumnType,\n\t\t\tgenerated: undefined,\n\t\t} as ColumnBuilderRuntimeConfig<T['data'], TRuntimeConfig>;\n\t}\n\n\t/**\n\t * Changes the data type of the column. Commonly used with `json` columns. Also, useful for branded types.\n\t *\n\t * @example\n\t * ```ts\n\t * const users = pgTable('users', {\n\t * \tid: integer('id').$type<UserId>().primaryKey(),\n\t * \tdetails: json('details').$type<UserDetails>().notNull(),\n\t * });\n\t * ```\n\t */\n\t$type<TType>(): $Type<this, TType> {\n\t\treturn this as $Type<this, TType>;\n\t}\n\n\t/**\n\t * Adds a `not null` clause to the column definition.\n\t *\n\t * Affects the `select` model of the table - columns *without* `not null` will be nullable on select.\n\t */\n\tnotNull(): NotNull<this> {\n\t\tthis.config.notNull = true;\n\t\treturn this as NotNull<this>;\n\t}\n\n\t/**\n\t * Adds a `default <value>` clause to the column definition.\n\t *\n\t * Affects the `insert` model of the table - columns *with* `default` are optional on insert.\n\t *\n\t * If you need to set a dynamic default value, use {@link $defaultFn} instead.\n\t */\n\tdefault(value: (this['_'] extends { $type: infer U } ? U : this['_']['data']) | SQL): HasDefault<this> {\n\t\tthis.config.default = value;\n\t\tthis.config.hasDefault = true;\n\t\treturn this as HasDefault<this>;\n\t}\n\n\t/**\n\t * Adds a dynamic default value to the column.\n\t * The function will be called when the row is inserted, and the returned value will be used as the column value.\n\t *\n\t * **Note:** This value does not affect the `drizzle-kit` behavior, it is only used at runtime in `drizzle-orm`.\n\t */\n\t$defaultFn(\n\t\tfn: () => (this['_'] extends { $type: infer U } ? U : this['_']['data']) | SQL,\n\t): HasRuntimeDefault<HasDefault<this>> {\n\t\tthis.config.defaultFn = fn;\n\t\tthis.config.hasDefault = true;\n\t\treturn this as HasRuntimeDefault<HasDefault<this>>;\n\t}\n\n\t/**\n\t * Alias for {@link $defaultFn}.\n\t */\n\t$default = this.$defaultFn;\n\n\t/**\n\t * Adds a dynamic update value to the column.\n\t * The function will be called when the row is updated, and the returned value will be used as the column value if none is provided.\n\t * If no `default` (or `$defaultFn`) value is provided, the function will be called when the row is inserted as well, and the returned value will be used as the column value.\n\t *\n\t * **Note:** This value does not affect the `drizzle-kit` behavior, it is only used at runtime in `drizzle-orm`.\n\t */\n\t$onUpdateFn(\n\t\tfn: () => (this['_'] extends { $type: infer U } ? U : this['_']['data']) | SQL,\n\t): HasDefault<this> {\n\t\tthis.config.onUpdateFn = fn;\n\t\tthis.config.hasDefault = true;\n\t\treturn this as HasDefault<this>;\n\t}\n\n\t/**\n\t * Alias for {@link $onUpdateFn}.\n\t */\n\t$onUpdate = this.$onUpdateFn;\n\n\t/**\n\t * Adds a `primary key` clause to the column definition. This implicitly makes the column `not null`.\n\t *\n\t * In SQLite, `integer primary key` implicitly makes the column auto-incrementing.\n\t */\n\tprimaryKey(): TExtraConfig['primaryKeyHasDefault'] extends true ? IsPrimaryKey<HasDefault<NotNull<this>>>\n\t\t: IsPrimaryKey<NotNull<this>>\n\t{\n\t\tthis.config.primaryKey = true;\n\t\tthis.config.notNull = true;\n\t\treturn this as TExtraConfig['primaryKeyHasDefault'] extends true ? IsPrimaryKey<HasDefault<NotNull<this>>>\n\t\t\t: IsPrimaryKey<NotNull<this>>;\n\t}\n\n\tabstract generatedAlwaysAs(\n\t\tas: SQL | T['data'] | (() => SQL),\n\t\tconfig?: Partial<GeneratedColumnConfig<unknown>>,\n\t): HasGenerated<this, {\n\t\ttype: 'always';\n\t}>;\n\n\t/** @internal Sets the name of the column to the key within the table definition if a name was not given. */\n\tsetName(name: string) {\n\t\tif (this.config.name !== '') return;\n\t\tthis.config.name = name;\n\t}\n}\n\nexport type BuildColumn<\n\tTTableName extends string,\n\tTBuilder extends ColumnBuilderBase,\n\tTDialect extends Dialect,\n> = TDialect extends 'pg' ? PgColumn<\n\t\tMakeColumnConfig<TBuilder['_'], TTableName>,\n\t\t{},\n\t\tSimplify<Omit<TBuilder['_'], keyof MakeColumnConfig<TBuilder['_'], TTableName> | 'brand' | 'dialect'>>\n\t>\n\t: TDialect extends 'mysql' ? MySqlColumn<\n\t\t\tMakeColumnConfig<TBuilder['_'], TTableName>,\n\t\t\t{},\n\t\t\tSimplify<\n\t\t\t\tOmit<\n\t\t\t\t\tTBuilder['_'],\n\t\t\t\t\t| keyof MakeColumnConfig<TBuilder['_'], TTableName>\n\t\t\t\t\t| 'brand'\n\t\t\t\t\t| 'dialect'\n\t\t\t\t\t| 'primaryKeyHasDefault'\n\t\t\t\t\t| 'mysqlColumnBuilderBrand'\n\t\t\t\t>\n\t\t\t>\n\t\t>\n\t: TDialect extends 'sqlite' ? SQLiteColumn<\n\t\t\tMakeColumnConfig<TBuilder['_'], TTableName>,\n\t\t\t{},\n\t\t\tSimplify<Omit<TBuilder['_'], keyof MakeColumnConfig<TBuilder['_'], TTableName> | 'brand' | 'dialect'>>\n\t\t>\n\t: TDialect extends 'common' ? Column<\n\t\t\tMakeColumnConfig<TBuilder['_'], TTableName>,\n\t\t\t{},\n\t\t\tSimplify<Omit<TBuilder['_'], keyof MakeColumnConfig<TBuilder['_'], TTableName> | 'brand' | 'dialect'>>\n\t\t>\n\t: TDialect extends 'singlestore' ? SingleStoreColumn<\n\t\t\tMakeColumnConfig<TBuilder['_'], TTableName>,\n\t\t\t{},\n\t\t\tSimplify<\n\t\t\t\tOmit<\n\t\t\t\t\tTBuilder['_'],\n\t\t\t\t\t| keyof MakeColumnConfig<TBuilder['_'], TTableName>\n\t\t\t\t\t| 'brand'\n\t\t\t\t\t| 'dialect'\n\t\t\t\t\t| 'primaryKeyHasDefault'\n\t\t\t\t\t| 'singlestoreColumnBuilderBrand'\n\t\t\t\t>\n\t\t\t>\n\t\t>\n\t: TDialect extends 'gel' ? GelColumn<\n\t\t\tMakeColumnConfig<TBuilder['_'], TTableName>,\n\t\t\t{},\n\t\t\tSimplify<Omit<TBuilder['_'], keyof MakeColumnConfig<TBuilder['_'], TTableName> | 'brand' | 'dialect'>>\n\t\t>\n\t: never;\n\nexport type BuildIndexColumn<\n\tTDialect extends Dialect,\n> = TDialect extends 'pg' ? ExtraConfigColumn\n\t: TDialect extends 'gel' ? GelExtraConfigColumn\n\t: never;\n\n// TODO\n// try to make sql as well + indexRaw\n\n// optional after everything will be working as expected\n// also try to leave only needed methods for extraConfig\n// make an error if I pass .asc() to fk and so on\n\nexport type BuildColumns<\n\tTTableName extends string,\n\tTConfigMap extends Record<string, ColumnBuilderBase>,\n\tTDialect extends Dialect,\n> =\n\t& {\n\t\t[Key in keyof TConfigMap]: BuildColumn<TTableName, {\n\t\t\t_:\n\t\t\t\t& Omit<TConfigMap[Key]['_'], 'name'>\n\t\t\t\t& { name: TConfigMap[Key]['_']['name'] extends '' ? Assume<Key, string> : TConfigMap[Key]['_']['name'] };\n\t\t}, TDialect>;\n\t}\n\t& {};\n\nexport type BuildExtraConfigColumns<\n\t_TTableName extends string,\n\tTConfigMap extends Record<string, ColumnBuilderBase>,\n\tTDialect extends Dialect,\n> =\n\t& {\n\t\t[Key in keyof TConfigMap]: BuildIndexColumn<TDialect>;\n\t}\n\t& {};\n\nexport type ChangeColumnTableName<TColumn extends Column, TAlias extends string, TDialect extends Dialect> =\n\tTDialect extends 'pg' ? PgColumn<MakeColumnConfig<TColumn['_'], TAlias>>\n\t\t: TDialect extends 'mysql' ? MySqlColumn<MakeColumnConfig<TColumn['_'], TAlias>>\n\t\t: TDialect extends 'singlestore' ? SingleStoreColumn<MakeColumnConfig<TColumn['_'], TAlias>>\n\t\t: TDialect extends 'sqlite' ? SQLiteColumn<MakeColumnConfig<TColumn['_'], TAlias>>\n\t\t: TDialect extends 'gel' ? GelColumn<MakeColumnConfig<TColumn['_'], TAlias>>\n\t\t: never;\n", "import { entityKind } from '~/entity.ts';\nimport { TableName } from '~/table.utils.ts';\nimport type { AnyPgColumn, PgColumn } from './columns/index.ts';\nimport type { PgTable } from './table.ts';\n\nexport type UpdateDeleteAction = 'cascade' | 'restrict' | 'no action' | 'set null' | 'set default';\n\nexport type Reference = () => {\n\treadonly name?: string;\n\treadonly columns: PgColumn[];\n\treadonly foreignTable: PgTable;\n\treadonly foreignColumns: PgColumn[];\n};\n\nexport class ForeignKeyBuilder {\n\tstatic readonly [entityKind]: string = 'PgForeignKeyBuilder';\n\n\t/** @internal */\n\treference: Reference;\n\n\t/** @internal */\n\t_onUpdate: UpdateDeleteAction | undefined = 'no action';\n\n\t/** @internal */\n\t_onDelete: UpdateDeleteAction | undefined = 'no action';\n\n\tconstructor(\n\t\tconfig: () => {\n\t\t\tname?: string;\n\t\t\tcolumns: PgColumn[];\n\t\t\tforeignColumns: PgColumn[];\n\t\t},\n\t\tactions?: {\n\t\t\tonUpdate?: UpdateDeleteAction;\n\t\t\tonDelete?: UpdateDeleteAction;\n\t\t} | undefined,\n\t) {\n\t\tthis.reference = () => {\n\t\t\tconst { name, columns, foreignColumns } = config();\n\t\t\treturn { name, columns, foreignTable: foreignColumns[0]!.table as PgTable, foreignColumns };\n\t\t};\n\t\tif (actions) {\n\t\t\tthis._onUpdate = actions.onUpdate;\n\t\t\tthis._onDelete = actions.onDelete;\n\t\t}\n\t}\n\n\tonUpdate(action: UpdateDeleteAction): this {\n\t\tthis._onUpdate = action === undefined ? 'no action' : action;\n\t\treturn this;\n\t}\n\n\tonDelete(action: UpdateDeleteAction): this {\n\t\tthis._onDelete = action === undefined ? 'no action' : action;\n\t\treturn this;\n\t}\n\n\t/** @internal */\n\tbuild(table: PgTable): ForeignKey {\n\t\treturn new ForeignKey(table, this);\n\t}\n}\n\nexport type AnyForeignKeyBuilder = ForeignKeyBuilder;\n\nexport class ForeignKey {\n\tstatic readonly [entityKind]: string = 'PgForeignKey';\n\n\treadonly reference: Reference;\n\treadonly onUpdate: UpdateDeleteAction | undefined;\n\treadonly onDelete: UpdateDeleteAction | undefined;\n\n\tconstructor(readonly table: PgTable, builder: ForeignKeyBuilder) {\n\t\tthis.reference = builder.reference;\n\t\tthis.onUpdate = builder._onUpdate;\n\t\tthis.onDelete = builder._onDelete;\n\t}\n\n\tgetName(): string {\n\t\tconst { name, columns, foreignColumns } = this.reference();\n\t\tconst columnNames = columns.map((column) => column.name);\n\t\tconst foreignColumnNames = foreignColumns.map((column) => column.name);\n\t\tconst chunks = [\n\t\t\tthis.table[TableName],\n\t\t\t...columnNames,\n\t\t\tforeignColumns[0]!.table[TableName],\n\t\t\t...foreignColumnNames,\n\t\t];\n\t\treturn name ?? `${chunks.join('_')}_fk`;\n\t}\n}\n\ntype ColumnsWithTable<\n\tTTableName extends string,\n\tTColumns extends PgColumn[],\n> = { [Key in keyof TColumns]: AnyPgColumn<{ tableName: TTableName }> };\n\nexport function foreignKey<\n\tTTableName extends string,\n\tTForeignTableName extends string,\n\tTColumns extends [AnyPgColumn<{ tableName: TTableName }>, ...AnyPgColumn<{ tableName: TTableName }>[]],\n>(\n\tconfig: {\n\t\tname?: string;\n\t\tcolumns: TColumns;\n\t\tforeignColumns: ColumnsWithTable<TForeignTableName, TColumns>;\n\t},\n): ForeignKeyBuilder {\n\tfunction mappedConfig() {\n\t\tconst { name, columns, foreignColumns } = config;\n\t\treturn {\n\t\t\tname,\n\t\t\tcolumns,\n\t\t\tforeignColumns,\n\t\t};\n\t}\n\n\treturn new ForeignKeyBuilder(mappedConfig);\n}\n", "/** @internal */\nexport const TableName = Symbol.for('drizzle:Name');\n", "export function iife<T extends unknown[], U>(fn: (...args: T) => U, ...args: T): U {\n\treturn fn(...args);\n}\n", "import { entityKind } from '~/entity.ts';\nimport { TableName } from '~/table.utils.ts';\nimport type { PgColumn } from './columns/index.ts';\nimport type { PgTable } from './table.ts';\n\nexport function unique(name?: string): UniqueOnConstraintBuilder {\n\treturn new UniqueOnConstraintBuilder(name);\n}\n\nexport function uniqueKeyName(table: PgTable, columns: string[]) {\n\treturn `${table[TableName]}_${columns.join('_')}_unique`;\n}\n\nexport class UniqueConstraintBuilder {\n\tstatic readonly [entityKind]: string = 'PgUniqueConstraintBuilder';\n\n\t/** @internal */\n\tcolumns: PgColumn[];\n\t/** @internal */\n\tnullsNotDistinctConfig = false;\n\n\tconstructor(\n\t\tcolumns: PgColumn[],\n\t\tprivate name?: string,\n\t) {\n\t\tthis.columns = columns;\n\t}\n\n\tnullsNotDistinct() {\n\t\tthis.nullsNotDistinctConfig = true;\n\t\treturn this;\n\t}\n\n\t/** @internal */\n\tbuild(table: PgTable): UniqueConstraint {\n\t\treturn new UniqueConstraint(table, this.columns, this.nullsNotDistinctConfig, this.name);\n\t}\n}\n\nexport class UniqueOnConstraintBuilder {\n\tstatic readonly [entityKind]: string = 'PgUniqueOnConstraintBuilder';\n\n\t/** @internal */\n\tname?: string;\n\n\tconstructor(\n\t\tname?: string,\n\t) {\n\t\tthis.name = name;\n\t}\n\n\ton(...columns: [PgColumn, ...PgColumn[]]) {\n\t\treturn new UniqueConstraintBuilder(columns, this.name);\n\t}\n}\n\nexport class UniqueConstraint {\n\tstatic readonly [entityKind]: string = 'PgUniqueConstraint';\n\n\treadonly columns: PgColumn[];\n\treadonly name?: string;\n\treadonly nullsNotDistinct: boolean = false;\n\n\tconstructor(readonly table: PgTable, columns: PgColumn[], nullsNotDistinct: boolean, name?: string) {\n\t\tthis.columns = columns;\n\t\tthis.name = name ?? uniqueKeyName(this.table, this.columns.map((column) => column.name));\n\t\tthis.nullsNotDistinct = nullsNotDistinct;\n\t}\n\n\tgetName() {\n\t\treturn this.name;\n\t}\n}\n", "function parsePgArrayValue(arrayString: string, startFrom: number, inQuotes: boolean): [string, number] {\n\tfor (let i = startFrom; i < arrayString.length; i++) {\n\t\tconst char = arrayString[i];\n\n\t\tif (char === '\\\\') {\n\t\t\ti++;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (char === '\"') {\n\t\t\treturn [arrayString.slice(startFrom, i).replace(/\\\\/g, ''), i + 1];\n\t\t}\n\n\t\tif (inQuotes) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (char === ',' || char === '}') {\n\t\t\treturn [arrayString.slice(startFrom, i).replace(/\\\\/g, ''), i];\n\t\t}\n\t}\n\n\treturn [arrayString.slice(startFrom).replace(/\\\\/g, ''), arrayString.length];\n}\n\nexport function parsePgNestedArray(arrayString: string, startFrom = 0): [any[], number] {\n\tconst result: any[] = [];\n\tlet i = startFrom;\n\tlet lastCharIsComma = false;\n\n\twhile (i < arrayString.length) {\n\t\tconst char = arrayString[i];\n\n\t\tif (char === ',') {\n\t\t\tif (lastCharIsComma || i === startFrom) {\n\t\t\t\tresult.push('');\n\t\t\t}\n\t\t\tlastCharIsComma = true;\n\t\t\ti++;\n\t\t\tcontinue;\n\t\t}\n\n\t\tlastCharIsComma = false;\n\n\t\tif (char === '\\\\') {\n\t\t\ti += 2;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (char === '\"') {\n\t\t\tconst [value, startFrom] = parsePgArrayValue(arrayString, i + 1, true);\n\t\t\tresult.push(value);\n\t\t\ti = startFrom;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (char === '}') {\n\t\t\treturn [result, i + 1];\n\t\t}\n\n\t\tif (char === '{') {\n\t\t\tconst [value, startFrom] = parsePgNestedArray(arrayString, i + 1);\n\t\t\tresult.push(value);\n\t\t\ti = startFrom;\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [value, newStartFrom] = parsePgArrayValue(arrayString, i, false);\n\t\tresult.push(value);\n\t\ti = newStartFrom;\n\t}\n\n\treturn [result, i];\n}\n\nexport function parsePgArray(arrayString: string): any[] {\n\tconst [result] = parsePgNestedArray(arrayString, 1);\n\treturn result;\n}\n\nexport function makePgArray(array: any[]): string {\n\treturn `{${\n\t\tarray.map((item) => {\n\t\t\tif (Array.isArray(item)) {\n\t\t\t\treturn makePgArray(item);\n\t\t\t}\n\n\t\t\tif (typeof item === 'string') {\n\t\t\t\treturn `\"${item.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"')}\"`;\n\t\t\t}\n\n\t\t\treturn `${item}`;\n\t\t}).join(',')\n\t}}`;\n}\n", "import { entityKind } from './entity.ts';\nimport type { SQL, SQLWrapper } from './sql/sql.ts';\n\nexport interface Subquery<\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tTAlias extends string = string,\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tTSelectedFields extends Record<string, unknown> = Record<string, unknown>,\n> extends SQLWrapper {\n\t// SQLWrapper runtime implementation is defined in 'sql/sql.ts'\n}\nexport class Subquery<\n\tTAlias extends string = string,\n\tTSelectedFields extends Record<string, unknown> = Record<string, unknown>,\n> implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'Subquery';\n\n\tdeclare _: {\n\t\tbrand: 'Subquery';\n\t\tsql: SQL;\n\t\tselectedFields: TSelectedFields;\n\t\talias: TAlias;\n\t\tisWith: boolean;\n\t\tusedTables?: string[];\n\t};\n\n\tconstructor(sql: SQL, fields: TSelectedFields, alias: string, isWith = false, usedTables: string[] = []) {\n\t\tthis._ = {\n\t\t\tbrand: 'Subquery',\n\t\t\tsql,\n\t\t\tselectedFields: fields as TSelectedFields,\n\t\t\talias: alias as TAlias,\n\t\t\tisWith,\n\t\t\tusedTables,\n\t\t};\n\t}\n\n\t// getSQL(): SQL<unknown> {\n\t// \treturn new SQL([this]);\n\t// }\n}\n\nexport class WithSubquery<\n\tTAlias extends string = string,\n\tTSelection extends Record<string, unknown> = Record<string, unknown>,\n> extends Subquery<TAlias, TSelection> {\n\tstatic override readonly [entityKind]: string = 'WithSubquery';\n}\n\nexport type WithSubqueryWithoutSelection<TAlias extends string> = WithSubquery<TAlias, {}>;\n", "import type { Span, Tracer } from '@opentelemetry/api';\nimport { iife } from '~/tracing-utils.ts';\nimport { npmVersion } from '~/version.ts';\n\nlet otel: typeof import('@opentelemetry/api') | undefined;\nlet rawTracer: Tracer | undefined;\n// try {\n// \totel = await import('@opentelemetry/api');\n// } catch (err: any) {\n// \tif (err.code !== 'MODULE_NOT_FOUND' && err.code !== 'ERR_MODULE_NOT_FOUND') {\n// \t\tthrow err;\n// \t}\n// }\n\ntype SpanName =\n\t| 'drizzle.operation'\n\t| 'drizzle.prepareQuery'\n\t| 'drizzle.buildSQL'\n\t| 'drizzle.execute'\n\t| 'drizzle.driver.execute'\n\t| 'drizzle.mapResponse';\n\n/** @internal */\nexport const tracer = {\n\tstartActiveSpan<F extends (span?: Span) => unknown>(name: SpanName, fn: F): ReturnType<F> {\n\t\tif (!otel) {\n\t\t\treturn fn() as ReturnType<F>;\n\t\t}\n\n\t\tif (!rawTracer) {\n\t\t\trawTracer = otel.trace.getTracer('drizzle-orm', npmVersion);\n\t\t}\n\n\t\treturn iife(\n\t\t\t(otel, rawTracer) =>\n\t\t\t\trawTracer.startActiveSpan(\n\t\t\t\t\tname,\n\t\t\t\t\t((span: Span) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn fn(span);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tspan.setStatus({\n\t\t\t\t\t\t\t\tcode: otel.SpanStatusCode.ERROR,\n\t\t\t\t\t\t\t\tmessage: e instanceof Error ? e.message : 'Unknown error', // eslint-disable-line no-instanceof/no-instanceof\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tspan.end();\n\t\t\t\t\t\t}\n\t\t\t\t\t}) as F,\n\t\t\t\t),\n\t\t\totel,\n\t\t\trawTracer,\n\t\t);\n\t},\n};\n", "// package.json\nvar version = \"0.45.1\";\n\n// src/version.ts\nvar compatibilityVersion = 10;\nexport {\n  compatibilityVersion,\n  version as npmVersion\n};\n", "export const ViewBaseConfig = Symbol.for('drizzle:ViewBaseConfig');\n", "import type { Column, GetColumnData } from './column.ts';\nimport { entityKind } from './entity.ts';\nimport type { OptionalKeyOnly, RequiredKeyOnly } from './operations.ts';\nimport type { SQLWrapper } from './sql/sql.ts';\nimport { TableName } from './table.utils.ts';\nimport type { Simplify, Update } from './utils.ts';\n\nexport interface TableConfig<TColumn extends Column = Column<any>> {\n\tname: string;\n\tschema: string | undefined;\n\tcolumns: Record<string, TColumn>;\n\tdialect: string;\n}\n\nexport type UpdateTableConfig<T extends TableConfig, TUpdate extends Partial<TableConfig>> = Required<\n\tUpdate<T, TUpdate>\n>;\n\n/** @internal */\nexport const Schema = Symbol.for('drizzle:Schema');\n\n/** @internal */\nexport const Columns = Symbol.for('drizzle:Columns');\n\n/** @internal */\nexport const ExtraConfigColumns = Symbol.for('drizzle:ExtraConfigColumns');\n\n/** @internal */\nexport const OriginalName = Symbol.for('drizzle:OriginalName');\n\n/** @internal */\nexport const BaseName = Symbol.for('drizzle:BaseName');\n\n/** @internal */\nexport const IsAlias = Symbol.for('drizzle:IsAlias');\n\n/** @internal */\nexport const ExtraConfigBuilder = Symbol.for('drizzle:ExtraConfigBuilder');\n\nconst IsDrizzleTable = Symbol.for('drizzle:IsDrizzleTable');\n\nexport interface Table<\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tT extends TableConfig = TableConfig,\n> extends SQLWrapper {\n\t// SQLWrapper runtime implementation is defined in 'sql/sql.ts'\n}\n\nexport class Table<T extends TableConfig = TableConfig> implements SQLWrapper {\n\tstatic readonly [entityKind]: string = 'Table';\n\n\tdeclare readonly _: {\n\t\treadonly brand: 'Table';\n\t\treadonly config: T;\n\t\treadonly name: T['name'];\n\t\treadonly schema: T['schema'];\n\t\treadonly columns: T['columns'];\n\t\treadonly inferSelect: InferSelectModel<Table<T>>;\n\t\treadonly inferInsert: InferInsertModel<Table<T>>;\n\t};\n\n\tdeclare readonly $inferSelect: InferSelectModel<Table<T>>;\n\tdeclare readonly $inferInsert: InferInsertModel<Table<T>>;\n\n\t/** @internal */\n\tstatic readonly Symbol = {\n\t\tName: TableName as typeof TableName,\n\t\tSchema: Schema as typeof Schema,\n\t\tOriginalName: OriginalName as typeof OriginalName,\n\t\tColumns: Columns as typeof Columns,\n\t\tExtraConfigColumns: ExtraConfigColumns as typeof ExtraConfigColumns,\n\t\tBaseName: BaseName as typeof BaseName,\n\t\tIsAlias: IsAlias as typeof IsAlias,\n\t\tExtraConfigBuilder: ExtraConfigBuilder as typeof ExtraConfigBuilder,\n\t};\n\n\t/**\n\t * @internal\n\t * Can be changed if the table is aliased.\n\t */\n\t[TableName]: string;\n\n\t/**\n\t * @internal\n\t * Used to store the original name of the table, before any aliasing.\n\t */\n\t[OriginalName]: string;\n\n\t/** @internal */\n\t[Schema]: string | undefined;\n\n\t/** @internal */\n\t[Columns]!: T['columns'];\n\n\t/** @internal */\n\t[ExtraConfigColumns]!: Record<string, unknown>;\n\n\t/**\n\t *  @internal\n\t * Used to store the table name before the transformation via the `tableCreator` functions.\n\t */\n\t[BaseName]: string;\n\n\t/** @internal */\n\t[IsAlias] = false;\n\n\t/** @internal */\n\t[IsDrizzleTable] = true;\n\n\t/** @internal */\n\t[ExtraConfigBuilder]: ((self: any) => Record<string, unknown> | unknown[]) | undefined = undefined;\n\n\tconstructor(name: string, schema: string | undefined, baseName: string) {\n\t\tthis[TableName] = this[OriginalName] = name;\n\t\tthis[Schema] = schema;\n\t\tthis[BaseName] = baseName;\n\t}\n}\n\nexport function isTable(table: unknown): table is Table {\n\treturn typeof table === 'object' && table !== null && IsDrizzleTable in table;\n}\n\n/**\n * Any table with a specified boundary.\n *\n * @example\n\t```ts\n\t// Any table with a specific name\n\ttype AnyUsersTable = AnyTable<{ name: 'users' }>;\n\t```\n *\n * To describe any table with any config, simply use `Table` without any type arguments, like this:\n *\n\t```ts\n\tfunction needsTable(table: Table) {\n\t\t...\n\t}\n\t```\n */\nexport type AnyTable<TPartial extends Partial<TableConfig>> = Table<UpdateTableConfig<TableConfig, TPartial>>;\n\nexport function getTableName<T extends Table>(table: T): T['_']['name'] {\n\treturn table[TableName];\n}\n\nexport function getTableUniqueName<T extends Table>(table: T): `${T['_']['schema']}.${T['_']['name']}` {\n\treturn `${table[Schema] ?? 'public'}.${table[TableName]}`;\n}\n\nexport type MapColumnName<TName extends string, TColumn extends Column, TDBColumNames extends boolean> =\n\tTDBColumNames extends true ? TColumn['_']['name']\n\t\t: TName;\n\nexport type InferModelFromColumns<\n\tTColumns extends Record<string, Column>,\n\tTInferMode extends 'select' | 'insert' = 'select',\n\tTConfig extends { dbColumnNames: boolean; override?: boolean } = { dbColumnNames: false; override: false },\n> = Simplify<\n\tTInferMode extends 'insert' ?\n\t\t\t& {\n\t\t\t\t[\n\t\t\t\t\tKey in keyof TColumns & string as RequiredKeyOnly<\n\t\t\t\t\t\tMapColumnName<Key, TColumns[Key], TConfig['dbColumnNames']>,\n\t\t\t\t\t\tTColumns[Key]\n\t\t\t\t\t>\n\t\t\t\t]: GetColumnData<TColumns[Key], 'query'>;\n\t\t\t}\n\t\t\t& {\n\t\t\t\t[\n\t\t\t\t\tKey in keyof TColumns & string as OptionalKeyOnly<\n\t\t\t\t\t\tMapColumnName<Key, TColumns[Key], TConfig['dbColumnNames']>,\n\t\t\t\t\t\tTColumns[Key],\n\t\t\t\t\t\tTConfig['override']\n\t\t\t\t\t>\n\t\t\t\t]?: GetColumnData<TColumns[Key], 'query'> | undefined;\n\t\t\t}\n\t\t: {\n\t\t\t[\n\t\t\t\tKey in keyof TColumns & string as MapColumnName<\n\t\t\t\t\tKey,\n\t\t\t\t\tTColumns[Key],\n\t\t\t\t\tTConfig['dbColumnNames']\n\t\t\t\t>\n\t\t\t]: GetColumnData<TColumns[Key], 'query'>;\n\t\t}\n>;\n\n/** @deprecated Use one of the alternatives: {@link InferSelectModel} / {@link InferInsertModel}, or `table.$inferSelect` / `table.$inferInsert`\n */\nexport type InferModel<\n\tTTable extends Table,\n\tTInferMode extends 'select' | 'insert' = 'select',\n\tTConfig extends { dbColumnNames: boolean } = { dbColumnNames: false },\n> = InferModelFromColumns<TTable['_']['columns'], TInferMode, TConfig>;\n\nexport type InferSelectModel<\n\tTTable extends Table,\n\tTConfig extends { dbColumnNames: boolean } = { dbColumnNames: false },\n> = InferModelFromColumns<TTable['_']['columns'], 'select', TConfig>;\n\nexport type InferInsertModel<\n\tTTable extends Table,\n\tTConfig extends { dbColumnNames: boolean; override?: boolean } = { dbColumnNames: false; override: false },\n> = InferModelFromColumns<TTable['_']['columns'], 'insert', TConfig>;\n\nexport type InferEnum<T> = T extends { enumValues: readonly (infer U)[] } ? U\n\t: never;\n", "import type { ColumnBuilderBaseConfig, ColumnBuilderRuntimeConfig, MakeColumnConfig } from '~/column-builder.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { AnySQLiteTable } from '~/sqlite-core/table.ts';\nimport { type Equal, getColumnNameAndConfig, textDecoder } from '~/utils.ts';\nimport { SQLiteColumn, SQLiteColumnBuilder } from './common.ts';\n\ntype BlobMode = 'buffer' | 'json' | 'bigint';\n\nexport type SQLiteBigIntBuilderInitial<TName extends string> = SQLiteBigIntBuilder<{\n\tname: TName;\n\tdataType: 'bigint';\n\tcolumnType: 'SQLiteBigInt';\n\tdata: bigint;\n\tdriverParam: Buffer;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteBigIntBuilder<T extends ColumnBuilderBaseConfig<'bigint', 'SQLiteBigInt'>>\n\textends SQLiteColumnBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteBigIntBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'bigint', 'SQLiteBigInt');\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteBigInt<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteBigInt<MakeColumnConfig<T, TTableName>>(table, this.config as ColumnBuilderRuntimeConfig<any>);\n\t}\n}\n\nexport class SQLiteBigInt<T extends ColumnBaseConfig<'bigint', 'SQLiteBigInt'>> extends SQLiteColumn<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteBigInt';\n\n\tgetSQLType(): string {\n\t\treturn 'blob';\n\t}\n\n\toverride mapFromDriverValue(value: Buffer | Uint8Array | ArrayBuffer): bigint {\n\t\tif (typeof Buffer !== 'undefined' && Buffer.from) {\n\t\t\tconst buf = Buffer.isBuffer(value)\n\t\t\t\t? value\n\t\t\t\t// eslint-disable-next-line no-instanceof/no-instanceof\n\t\t\t\t: value instanceof ArrayBuffer\n\t\t\t\t? Buffer.from(value)\n\t\t\t\t: value.buffer\n\t\t\t\t? Buffer.from(value.buffer, value.byteOffset, value.byteLength)\n\t\t\t\t: Buffer.from(value);\n\t\t\treturn BigInt(buf.toString('utf8'));\n\t\t}\n\n\t\treturn BigInt(textDecoder!.decode(value));\n\t}\n\n\toverride mapToDriverValue(value: bigint): Buffer {\n\t\treturn Buffer.from(value.toString());\n\t}\n}\n\nexport type SQLiteBlobJsonBuilderInitial<TName extends string> = SQLiteBlobJsonBuilder<{\n\tname: TName;\n\tdataType: 'json';\n\tcolumnType: 'SQLiteBlobJson';\n\tdata: unknown;\n\tdriverParam: Buffer;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteBlobJsonBuilder<T extends ColumnBuilderBaseConfig<'json', 'SQLiteBlobJson'>>\n\textends SQLiteColumnBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteBlobJsonBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'json', 'SQLiteBlobJson');\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteBlobJson<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteBlobJson<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteBlobJson<T extends ColumnBaseConfig<'json', 'SQLiteBlobJson'>> extends SQLiteColumn<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteBlobJson';\n\n\tgetSQLType(): string {\n\t\treturn 'blob';\n\t}\n\n\toverride mapFromDriverValue(value: Buffer | Uint8Array | ArrayBuffer): T['data'] {\n\t\tif (typeof Buffer !== 'undefined' && Buffer.from) {\n\t\t\tconst buf = Buffer.isBuffer(value)\n\t\t\t\t? value\n\t\t\t\t// eslint-disable-next-line no-instanceof/no-instanceof\n\t\t\t\t: value instanceof ArrayBuffer\n\t\t\t\t? Buffer.from(value)\n\t\t\t\t: value.buffer\n\t\t\t\t? Buffer.from(value.buffer, value.byteOffset, value.byteLength)\n\t\t\t\t: Buffer.from(value);\n\t\t\treturn JSON.parse(buf.toString('utf8'));\n\t\t}\n\n\t\treturn JSON.parse(textDecoder!.decode(value));\n\t}\n\n\toverride mapToDriverValue(value: T['data']): Buffer {\n\t\treturn Buffer.from(JSON.stringify(value));\n\t}\n}\n\nexport type SQLiteBlobBufferBuilderInitial<TName extends string> = SQLiteBlobBufferBuilder<{\n\tname: TName;\n\tdataType: 'buffer';\n\tcolumnType: 'SQLiteBlobBuffer';\n\tdata: Buffer;\n\tdriverParam: Buffer;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteBlobBufferBuilder<T extends ColumnBuilderBaseConfig<'buffer', 'SQLiteBlobBuffer'>>\n\textends SQLiteColumnBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteBlobBufferBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'buffer', 'SQLiteBlobBuffer');\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteBlobBuffer<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteBlobBuffer<MakeColumnConfig<T, TTableName>>(table, this.config as ColumnBuilderRuntimeConfig<any>);\n\t}\n}\n\nexport class SQLiteBlobBuffer<T extends ColumnBaseConfig<'buffer', 'SQLiteBlobBuffer'>> extends SQLiteColumn<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteBlobBuffer';\n\n\toverride mapFromDriverValue(value: Buffer | Uint8Array | ArrayBuffer): T['data'] {\n\t\tif (Buffer.isBuffer(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn Buffer.from(value as Uint8Array);\n\t}\n\n\tgetSQLType(): string {\n\t\treturn 'blob';\n\t}\n}\n\nexport interface BlobConfig<TMode extends BlobMode = BlobMode> {\n\tmode: TMode;\n}\n\n/**\n *  It's recommended to use `text('...', { mode: 'json' })` instead of `blob` in JSON mode, because it supports JSON functions:\n * >All JSON functions currently throw an error if any of their arguments are BLOBs because BLOBs are reserved for a future enhancement in which BLOBs will store the binary encoding for JSON.\n *\n * https://www.sqlite.org/json1.html\n */\nexport function blob(): SQLiteBlobJsonBuilderInitial<''>;\nexport function blob<TMode extends BlobMode = BlobMode>(\n\tconfig?: BlobConfig<TMode>,\n): Equal<TMode, 'bigint'> extends true ? SQLiteBigIntBuilderInitial<''>\n\t: Equal<TMode, 'buffer'> extends true ? SQLiteBlobBufferBuilderInitial<''>\n\t: SQLiteBlobJsonBuilderInitial<''>;\nexport function blob<TName extends string, TMode extends BlobMode = BlobMode>(\n\tname: TName,\n\tconfig?: BlobConfig<TMode>,\n): Equal<TMode, 'bigint'> extends true ? SQLiteBigIntBuilderInitial<TName>\n\t: Equal<TMode, 'buffer'> extends true ? SQLiteBlobBufferBuilderInitial<TName>\n\t: SQLiteBlobJsonBuilderInitial<TName>;\nexport function blob(a?: string | BlobConfig, b?: BlobConfig) {\n\tconst { name, config } = getColumnNameAndConfig<BlobConfig | undefined>(a, b);\n\tif (config?.mode === 'json') {\n\t\treturn new SQLiteBlobJsonBuilder(name);\n\t}\n\tif (config?.mode === 'bigint') {\n\t\treturn new SQLiteBigIntBuilder(name);\n\t}\n\treturn new SQLiteBlobBufferBuilder(name);\n}\n", "import type { Cache } from './cache/core/cache.ts';\nimport type { AnyColumn } from './column.ts';\nimport { Column } from './column.ts';\nimport { is } from './entity.ts';\nimport type { Logger } from './logger.ts';\nimport type { SelectedFieldsOrdered } from './operations.ts';\nimport type { TableLike } from './query-builders/select.types.ts';\nimport { Param, SQL, View } from './sql/sql.ts';\nimport type { DriverValueDecoder } from './sql/sql.ts';\nimport { Subquery } from './subquery.ts';\nimport { getTableName, Table } from './table.ts';\nimport { ViewBaseConfig } from './view-common.ts';\n\n/** @internal */\nexport function mapResultRow<TResult>(\n\tcolumns: SelectedFieldsOrdered<AnyColumn>,\n\trow: unknown[],\n\tjoinsNotNullableMap: Record<string, boolean> | undefined,\n): TResult {\n\t// Key -> nested object key, value -> table name if all fields in the nested object are from the same table, false otherwise\n\tconst nullifyMap: Record<string, string | false> = {};\n\n\tconst result = columns.reduce<Record<string, any>>(\n\t\t(result, { path, field }, columnIndex) => {\n\t\t\tlet decoder: DriverValueDecoder<unknown, unknown>;\n\t\t\tif (is(field, Column)) {\n\t\t\t\tdecoder = field;\n\t\t\t} else if (is(field, SQL)) {\n\t\t\t\tdecoder = field.decoder;\n\t\t\t} else if (is(field, Subquery)) {\n\t\t\t\tdecoder = field._.sql.decoder;\n\t\t\t} else {\n\t\t\t\tdecoder = field.sql.decoder;\n\t\t\t}\n\t\t\tlet node = result;\n\t\t\tfor (const [pathChunkIndex, pathChunk] of path.entries()) {\n\t\t\t\tif (pathChunkIndex < path.length - 1) {\n\t\t\t\t\tif (!(pathChunk in node)) {\n\t\t\t\t\t\tnode[pathChunk] = {};\n\t\t\t\t\t}\n\t\t\t\t\tnode = node[pathChunk];\n\t\t\t\t} else {\n\t\t\t\t\tconst rawValue = row[columnIndex]!;\n\t\t\t\t\tconst value = node[pathChunk] = rawValue === null ? null : decoder.mapFromDriverValue(rawValue);\n\n\t\t\t\t\tif (joinsNotNullableMap && is(field, Column) && path.length === 2) {\n\t\t\t\t\t\tconst objectName = path[0]!;\n\t\t\t\t\t\tif (!(objectName in nullifyMap)) {\n\t\t\t\t\t\t\tnullifyMap[objectName] = value === null ? getTableName(field.table) : false;\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\ttypeof nullifyMap[objectName] === 'string' && nullifyMap[objectName] !== getTableName(field.table)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tnullifyMap[objectName] = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t{},\n\t);\n\n\t// Nullify all nested objects from nullifyMap that are nullable\n\tif (joinsNotNullableMap && Object.keys(nullifyMap).length > 0) {\n\t\tfor (const [objectName, tableName] of Object.entries(nullifyMap)) {\n\t\t\tif (typeof tableName === 'string' && !joinsNotNullableMap[tableName]) {\n\t\t\t\tresult[objectName] = null;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result as TResult;\n}\n\n/** @internal */\nexport function orderSelectedFields<TColumn extends AnyColumn>(\n\tfields: Record<string, unknown>,\n\tpathPrefix?: string[],\n): SelectedFieldsOrdered<TColumn> {\n\treturn Object.entries(fields).reduce<SelectedFieldsOrdered<AnyColumn>>((result, [name, field]) => {\n\t\tif (typeof name !== 'string') {\n\t\t\treturn result;\n\t\t}\n\n\t\tconst newPath = pathPrefix ? [...pathPrefix, name] : [name];\n\t\tif (is(field, Column) || is(field, SQL) || is(field, SQL.Aliased) || is(field, Subquery)) {\n\t\t\tresult.push({ path: newPath, field });\n\t\t} else if (is(field, Table)) {\n\t\t\tresult.push(...orderSelectedFields(field[Table.Symbol.Columns], newPath));\n\t\t} else {\n\t\t\tresult.push(...orderSelectedFields(field as Record<string, unknown>, newPath));\n\t\t}\n\t\treturn result;\n\t}, []) as SelectedFieldsOrdered<TColumn>;\n}\n\nexport function haveSameKeys(left: Record<string, unknown>, right: Record<string, unknown>) {\n\tconst leftKeys = Object.keys(left);\n\tconst rightKeys = Object.keys(right);\n\n\tif (leftKeys.length !== rightKeys.length) {\n\t\treturn false;\n\t}\n\n\tfor (const [index, key] of leftKeys.entries()) {\n\t\tif (key !== rightKeys[index]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/** @internal */\nexport function mapUpdateSet(table: Table, values: Record<string, unknown>): UpdateSet {\n\tconst entries: [string, UpdateSet[string]][] = Object.entries(values)\n\t\t.filter(([, value]) => value !== undefined)\n\t\t.map(([key, value]) => {\n\t\t\t// eslint-disable-next-line unicorn/prefer-ternary\n\t\t\tif (is(value, SQL) || is(value, Column)) {\n\t\t\t\treturn [key, value];\n\t\t\t} else {\n\t\t\t\treturn [key, new Param(value, table[Table.Symbol.Columns][key])];\n\t\t\t}\n\t\t});\n\n\tif (entries.length === 0) {\n\t\tthrow new Error('No values to set');\n\t}\n\n\treturn Object.fromEntries(entries);\n}\n\nexport type UpdateSet = Record<string, SQL | Param | AnyColumn | null | undefined>;\n\nexport type OneOrMany<T> = T | T[];\n\nexport type Update<T, TUpdate> =\n\t& {\n\t\t[K in Exclude<keyof T, keyof TUpdate>]: T[K];\n\t}\n\t& TUpdate;\n\nexport type Simplify<T> =\n\t& {\n\t\t// @ts-ignore - \"Type parameter 'K' has a circular constraint\", not sure why\n\t\t[K in keyof T]: T[K];\n\t}\n\t& {};\n\nexport type Not<T extends boolean> = T extends true ? false : true;\n\nexport type IsNever<T> = [T] extends [never] ? true : false;\n\nexport type IsUnion<T, U extends T = T> = (T extends any ? (U extends T ? false : true) : never) extends false ? false\n\t: true;\n\nexport type SingleKeyObject<T, TError extends string, K = keyof T> = IsNever<K> extends true ? never\n\t: IsUnion<K> extends true ? DrizzleTypeError<TError>\n\t: T;\n\nexport type FromSingleKeyObject<T, Result, TError extends string, K = keyof T> = IsNever<K> extends true ? never\n\t: IsUnion<K> extends true ? DrizzleTypeError<TError>\n\t: Result;\n\nexport type SimplifyMappedType<T> = [T] extends [unknown] ? T : never;\n\nexport type ShallowRecord<K extends keyof any, T> = SimplifyMappedType<{ [P in K]: T }>;\n\nexport type Assume<T, U> = T extends U ? T : U;\n\nexport type Equal<X, Y> = (<T>() => T extends X ? 1 : 2) extends (<T>() => T extends Y ? 1 : 2) ? true : false;\n\nexport interface DrizzleTypeError<T extends string> {\n\t$drizzleTypeError: T;\n}\n\nexport type ValueOrArray<T> = T | T[];\n\n/** @internal */\nexport function applyMixins(baseClass: any, extendedClasses: any[]) {\n\tfor (const extendedClass of extendedClasses) {\n\t\tfor (const name of Object.getOwnPropertyNames(extendedClass.prototype)) {\n\t\t\tif (name === 'constructor') continue;\n\n\t\t\tObject.defineProperty(\n\t\t\t\tbaseClass.prototype,\n\t\t\t\tname,\n\t\t\t\tObject.getOwnPropertyDescriptor(extendedClass.prototype, name) || Object.create(null),\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport type Or<T1, T2> = T1 extends true ? true : T2 extends true ? true : false;\n\nexport type IfThenElse<If, Then, Else> = If extends true ? Then : Else;\n\nexport type PromiseOf<T> = T extends Promise<infer U> ? U : T;\n\nexport type Writable<T> = {\n\t-readonly [P in keyof T]: T[P];\n};\n\nexport type NonArray<T> = T extends any[] ? never : T;\n\nexport function getTableColumns<T extends Table>(table: T): T['_']['columns'] {\n\treturn table[Table.Symbol.Columns];\n}\n\nexport function getViewSelectedFields<T extends View>(view: T): T['_']['selectedFields'] {\n\treturn view[ViewBaseConfig].selectedFields;\n}\n\n/** @internal */\nexport function getTableLikeName(table: TableLike): string | undefined {\n\treturn is(table, Subquery)\n\t\t? table._.alias\n\t\t: is(table, View)\n\t\t? table[ViewBaseConfig].name\n\t\t: is(table, SQL)\n\t\t? undefined\n\t\t: table[Table.Symbol.IsAlias]\n\t\t? table[Table.Symbol.Name]\n\t\t: table[Table.Symbol.BaseName];\n}\n\nexport type ColumnsWithTable<\n\tTTableName extends string,\n\tTForeignTableName extends string,\n\tTColumns extends AnyColumn<{ tableName: TTableName }>[],\n> = { [Key in keyof TColumns]: AnyColumn<{ tableName: TForeignTableName }> };\n\nexport type Casing = 'snake_case' | 'camelCase';\n\nexport interface DrizzleConfig<TSchema extends Record<string, unknown> = Record<string, never>> {\n\tlogger?: boolean | Logger;\n\tschema?: TSchema;\n\tcasing?: Casing;\n\tcache?: Cache;\n}\nexport type ValidateShape<T, ValidShape, TResult = T> = T extends ValidShape\n\t? Exclude<keyof T, keyof ValidShape> extends never ? TResult\n\t: DrizzleTypeError<\n\t\t`Invalid key(s): ${Exclude<(keyof T) & (string | number | bigint | boolean | null | undefined), keyof ValidShape>}`\n\t>\n\t: never;\n\nexport type KnownKeysOnly<T, U> = {\n\t[K in keyof T]: K extends keyof U ? T[K] : never;\n};\n\nexport type IsAny<T> = 0 extends (1 & T) ? true : false;\n\n/** @internal */\nexport function getColumnNameAndConfig<\n\tTConfig extends Record<string, any> | undefined,\n>(a: string | TConfig | undefined, b: TConfig | undefined) {\n\treturn {\n\t\tname: typeof a === 'string' && a.length > 0 ? a : '' as string,\n\t\tconfig: typeof a === 'object' ? a : b as TConfig,\n\t};\n}\n\nexport type IfNotImported<T, Y, N> = unknown extends T ? Y : N;\n\nexport type ImportTypeError<TPackageName extends string> =\n\t`Please install \\`${TPackageName}\\` to allow Drizzle ORM to connect to the database`;\n\nexport type RequireAtLeastOne<T, Keys extends keyof T = keyof T> = Keys extends any\n\t? Required<Pick<T, Keys>> & Partial<Omit<T, Keys>>\n\t: never;\n\ntype ExpectedConfigShape = {\n\tlogger?: boolean | {\n\t\tlogQuery(query: string, params: unknown[]): void;\n\t};\n\tschema?: Record<string, never>;\n\tcasing?: 'snake_case' | 'camelCase';\n};\n\n// If this errors, you must update config shape checker function with new config specs\nconst _: DrizzleConfig = {} as ExpectedConfigShape;\nconst __: ExpectedConfigShape = {} as DrizzleConfig;\n\nexport function isConfig(data: any): boolean {\n\tif (typeof data !== 'object' || data === null) return false;\n\n\tif (data.constructor.name !== 'Object') return false;\n\n\tif ('logger' in data) {\n\t\tconst type = typeof data['logger'];\n\t\tif (\n\t\t\ttype !== 'boolean' && (type !== 'object' || typeof data['logger']['logQuery'] !== 'function')\n\t\t\t&& type !== 'undefined'\n\t\t) return false;\n\n\t\treturn true;\n\t}\n\n\tif ('schema' in data) {\n\t\tconst type = typeof data['schema'];\n\t\tif (type !== 'object' && type !== 'undefined') return false;\n\n\t\treturn true;\n\t}\n\n\tif ('casing' in data) {\n\t\tconst type = typeof data['casing'];\n\t\tif (type !== 'string' && type !== 'undefined') return false;\n\n\t\treturn true;\n\t}\n\n\tif ('mode' in data) {\n\t\tif (data['mode'] !== 'default' || data['mode'] !== 'planetscale' || data['mode'] !== undefined) return false;\n\n\t\treturn true;\n\t}\n\n\tif ('connection' in data) {\n\t\tconst type = typeof data['connection'];\n\t\tif (type !== 'string' && type !== 'object' && type !== 'undefined') return false;\n\n\t\treturn true;\n\t}\n\n\tif ('client' in data) {\n\t\tconst type = typeof data['client'];\n\t\tif (type !== 'object' && type !== 'function' && type !== 'undefined') return false;\n\n\t\treturn true;\n\t}\n\n\tif (Object.keys(data).length === 0) return true;\n\n\treturn false;\n}\n\nexport type NeonAuthToken = string | (() => string | Promise<string>);\n\nexport const textDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder();\n", "import type {\n\tColumnBuilderBase,\n\tColumnBuilderBaseConfig,\n\tColumnBuilderExtraConfig,\n\tColumnBuilderRuntimeConfig,\n\tColumnDataType,\n\tHasGenerated,\n\tMakeColumnConfig,\n} from '~/column-builder.ts';\nimport { ColumnBuilder } from '~/column-builder.ts';\nimport { Column } from '~/column.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { SQL } from '~/sql/sql.ts';\nimport type { ForeignKey, UpdateDeleteAction } from '~/sqlite-core/foreign-keys.ts';\nimport { ForeignKeyBuilder } from '~/sqlite-core/foreign-keys.ts';\nimport type { AnySQLiteTable, SQLiteTable } from '~/sqlite-core/table.ts';\nimport type { Update } from '~/utils.ts';\nimport { uniqueKeyName } from '../unique-constraint.ts';\n\nexport interface ReferenceConfig {\n\tref: () => SQLiteColumn;\n\tactions: {\n\t\tonUpdate?: UpdateDeleteAction;\n\t\tonDelete?: UpdateDeleteAction;\n\t};\n}\n\nexport interface SQLiteColumnBuilderBase<\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string> = ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTTypeConfig extends object = object,\n> extends ColumnBuilderBase<T, TTypeConfig & { dialect: 'sqlite' }> {}\n\nexport interface SQLiteGeneratedColumnConfig {\n\tmode?: 'virtual' | 'stored';\n}\n\nexport abstract class SQLiteColumnBuilder<\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string> = ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTRuntimeConfig extends object = object,\n\tTTypeConfig extends object = object,\n\tTExtraConfig extends ColumnBuilderExtraConfig = object,\n> extends ColumnBuilder<T, TRuntimeConfig, TTypeConfig & { dialect: 'sqlite' }, TExtraConfig>\n\timplements SQLiteColumnBuilderBase<T, TTypeConfig>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteColumnBuilder';\n\n\tprivate foreignKeyConfigs: ReferenceConfig[] = [];\n\n\treferences(\n\t\tref: ReferenceConfig['ref'],\n\t\tactions: ReferenceConfig['actions'] = {},\n\t): this {\n\t\tthis.foreignKeyConfigs.push({ ref, actions });\n\t\treturn this;\n\t}\n\n\tunique(\n\t\tname?: string,\n\t): this {\n\t\tthis.config.isUnique = true;\n\t\tthis.config.uniqueName = name;\n\t\treturn this;\n\t}\n\n\tgeneratedAlwaysAs(as: SQL | T['data'] | (() => SQL), config?: SQLiteGeneratedColumnConfig): HasGenerated<this, {\n\t\ttype: 'always';\n\t}> {\n\t\tthis.config.generated = {\n\t\t\tas,\n\t\t\ttype: 'always',\n\t\t\tmode: config?.mode ?? 'virtual',\n\t\t};\n\t\treturn this as any;\n\t}\n\n\t/** @internal */\n\tbuildForeignKeys(column: SQLiteColumn, table: SQLiteTable): ForeignKey[] {\n\t\treturn this.foreignKeyConfigs.map(({ ref, actions }) => {\n\t\t\treturn ((ref, actions) => {\n\t\t\t\tconst builder = new ForeignKeyBuilder(() => {\n\t\t\t\t\tconst foreignColumn = ref();\n\t\t\t\t\treturn { columns: [column], foreignColumns: [foreignColumn] };\n\t\t\t\t});\n\t\t\t\tif (actions.onUpdate) {\n\t\t\t\t\tbuilder.onUpdate(actions.onUpdate);\n\t\t\t\t}\n\t\t\t\tif (actions.onDelete) {\n\t\t\t\t\tbuilder.onDelete(actions.onDelete);\n\t\t\t\t}\n\t\t\t\treturn builder.build(table);\n\t\t\t})(ref, actions);\n\t\t});\n\t}\n\n\t/** @internal */\n\tabstract build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteColumn<MakeColumnConfig<T, TTableName>>;\n}\n\n// To understand how to use `SQLiteColumn` and `AnySQLiteColumn`, see `Column` and `AnyColumn` documentation.\nexport abstract class SQLiteColumn<\n\tT extends ColumnBaseConfig<ColumnDataType, string> = ColumnBaseConfig<ColumnDataType, string>,\n\tTRuntimeConfig extends object = {},\n\tTTypeConfig extends object = {},\n> extends Column<T, TRuntimeConfig, TTypeConfig & { dialect: 'sqlite' }> {\n\tstatic override readonly [entityKind]: string = 'SQLiteColumn';\n\n\tconstructor(\n\t\toverride readonly table: SQLiteTable,\n\t\tconfig: ColumnBuilderRuntimeConfig<T['data'], TRuntimeConfig>,\n\t) {\n\t\tif (!config.uniqueName) {\n\t\t\tconfig.uniqueName = uniqueKeyName(table, [config.name]);\n\t\t}\n\t\tsuper(table, config);\n\t}\n}\n\nexport type AnySQLiteColumn<TPartial extends Partial<ColumnBaseConfig<ColumnDataType, string>> = {}> = SQLiteColumn<\n\tRequired<Update<ColumnBaseConfig<ColumnDataType, string>, TPartial>>\n>;\n", "import { entityKind } from '~/entity.ts';\nimport { TableName } from '~/table.utils.ts';\nimport type { AnySQLiteColumn, SQLiteColumn } from './columns/index.ts';\nimport type { SQLiteTable } from './table.ts';\n\nexport type UpdateDeleteAction = 'cascade' | 'restrict' | 'no action' | 'set null' | 'set default';\n\nexport type Reference = () => {\n\treadonly name?: string;\n\treadonly columns: SQLiteColumn[];\n\treadonly foreignTable: SQLiteTable;\n\treadonly foreignColumns: SQLiteColumn[];\n};\n\nexport class ForeignKeyBuilder {\n\tstatic readonly [entityKind]: string = 'SQLiteForeignKeyBuilder';\n\n\tdeclare _: {\n\t\tbrand: 'SQLiteForeignKeyBuilder';\n\t\tforeignTableName: 'TForeignTableName';\n\t};\n\n\t/** @internal */\n\treference: Reference;\n\n\t/** @internal */\n\t_onUpdate: UpdateDeleteAction | undefined;\n\n\t/** @internal */\n\t_onDelete: UpdateDeleteAction | undefined;\n\n\tconstructor(\n\t\tconfig: () => {\n\t\t\tname?: string;\n\t\t\tcolumns: SQLiteColumn[];\n\t\t\tforeignColumns: SQLiteColumn[];\n\t\t},\n\t\tactions?: {\n\t\t\tonUpdate?: UpdateDeleteAction;\n\t\t\tonDelete?: UpdateDeleteAction;\n\t\t} | undefined,\n\t) {\n\t\tthis.reference = () => {\n\t\t\tconst { name, columns, foreignColumns } = config();\n\t\t\treturn { name, columns, foreignTable: foreignColumns[0]!.table as SQLiteTable, foreignColumns };\n\t\t};\n\t\tif (actions) {\n\t\t\tthis._onUpdate = actions.onUpdate;\n\t\t\tthis._onDelete = actions.onDelete;\n\t\t}\n\t}\n\n\tonUpdate(action: UpdateDeleteAction): this {\n\t\tthis._onUpdate = action;\n\t\treturn this;\n\t}\n\n\tonDelete(action: UpdateDeleteAction): this {\n\t\tthis._onDelete = action;\n\t\treturn this;\n\t}\n\n\t/** @internal */\n\tbuild(table: SQLiteTable): ForeignKey {\n\t\treturn new ForeignKey(table, this);\n\t}\n}\n\nexport class ForeignKey {\n\tstatic readonly [entityKind]: string = 'SQLiteForeignKey';\n\n\treadonly reference: Reference;\n\treadonly onUpdate: UpdateDeleteAction | undefined;\n\treadonly onDelete: UpdateDeleteAction | undefined;\n\n\tconstructor(readonly table: SQLiteTable, builder: ForeignKeyBuilder) {\n\t\tthis.reference = builder.reference;\n\t\tthis.onUpdate = builder._onUpdate;\n\t\tthis.onDelete = builder._onDelete;\n\t}\n\n\tgetName(): string {\n\t\tconst { name, columns, foreignColumns } = this.reference();\n\t\tconst columnNames = columns.map((column) => column.name);\n\t\tconst foreignColumnNames = foreignColumns.map((column) => column.name);\n\t\tconst chunks = [\n\t\t\tthis.table[TableName],\n\t\t\t...columnNames,\n\t\t\tforeignColumns[0]!.table[TableName],\n\t\t\t...foreignColumnNames,\n\t\t];\n\t\treturn name ?? `${chunks.join('_')}_fk`;\n\t}\n}\n\ntype ColumnsWithTable<\n\tTTableName extends string,\n\tTColumns extends SQLiteColumn[],\n> = { [Key in keyof TColumns]: AnySQLiteColumn<{ tableName: TTableName }> };\n\n/**\n * @deprecated please use `foreignKey({ columns: [], foreignColumns: [] })` syntax without callback\n * @param config\n * @returns\n */\nexport function foreignKey<\n\tTTableName extends string,\n\tTForeignTableName extends string,\n\tTColumns extends [AnySQLiteColumn<{ tableName: TTableName }>, ...AnySQLiteColumn<{ tableName: TTableName }>[]],\n>(\n\tconfig: () => {\n\t\tname?: string;\n\t\tcolumns: TColumns;\n\t\tforeignColumns: ColumnsWithTable<TForeignTableName, TColumns>;\n\t},\n): ForeignKeyBuilder;\nexport function foreignKey<\n\tTTableName extends string,\n\tTForeignTableName extends string,\n\tTColumns extends [AnySQLiteColumn<{ tableName: TTableName }>, ...AnySQLiteColumn<{ tableName: TTableName }>[]],\n>(\n\tconfig: {\n\t\tname?: string;\n\t\tcolumns: TColumns;\n\t\tforeignColumns: ColumnsWithTable<TForeignTableName, TColumns>;\n\t},\n): ForeignKeyBuilder;\nexport function foreignKey(\n\tconfig: any,\n): ForeignKeyBuilder {\n\tfunction mappedConfig() {\n\t\tif (typeof config === 'function') {\n\t\t\tconst { name, columns, foreignColumns } = config();\n\t\t\treturn {\n\t\t\t\tname,\n\t\t\t\tcolumns,\n\t\t\t\tforeignColumns,\n\t\t\t};\n\t\t}\n\t\treturn config;\n\t}\n\n\treturn new ForeignKeyBuilder(mappedConfig);\n}\n", "import { entityKind } from '~/entity.ts';\nimport { TableName } from '~/table.utils.ts';\nimport type { SQLiteColumn } from './columns/common.ts';\nimport type { SQLiteTable } from './table.ts';\n\nexport function uniqueKeyName(table: SQLiteTable, columns: string[]) {\n\treturn `${table[TableName]}_${columns.join('_')}_unique`;\n}\n\nexport function unique(name?: string): UniqueOnConstraintBuilder {\n\treturn new UniqueOnConstraintBuilder(name);\n}\n\nexport class UniqueConstraintBuilder {\n\tstatic readonly [entityKind]: string = 'SQLiteUniqueConstraintBuilder';\n\n\t/** @internal */\n\tcolumns: SQLiteColumn[];\n\n\tconstructor(\n\t\tcolumns: SQLiteColumn[],\n\t\tprivate name?: string,\n\t) {\n\t\tthis.columns = columns;\n\t}\n\n\t/** @internal */\n\tbuild(table: SQLiteTable): UniqueConstraint {\n\t\treturn new UniqueConstraint(table, this.columns, this.name);\n\t}\n}\n\nexport class UniqueOnConstraintBuilder {\n\tstatic readonly [entityKind]: string = 'SQLiteUniqueOnConstraintBuilder';\n\n\t/** @internal */\n\tname?: string;\n\n\tconstructor(\n\t\tname?: string,\n\t) {\n\t\tthis.name = name;\n\t}\n\n\ton(...columns: [SQLiteColumn, ...SQLiteColumn[]]) {\n\t\treturn new UniqueConstraintBuilder(columns, this.name);\n\t}\n}\n\nexport class UniqueConstraint {\n\tstatic readonly [entityKind]: string = 'SQLiteUniqueConstraint';\n\n\treadonly columns: SQLiteColumn[];\n\treadonly name?: string;\n\n\tconstructor(readonly table: SQLiteTable, columns: SQLiteColumn[], name?: string) {\n\t\tthis.columns = columns;\n\t\tthis.name = name ?? uniqueKeyName(this.table, this.columns.map((column) => column.name));\n\t}\n\n\tgetName() {\n\t\treturn this.name;\n\t}\n}\n", "import type { ColumnBuilderBaseConfig, ColumnBuilderRuntimeConfig, MakeColumnConfig } from '~/column-builder.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { SQL } from '~/sql/sql.ts';\nimport type { AnySQLiteTable } from '~/sqlite-core/table.ts';\nimport { type Equal, getColumnNameAndConfig } from '~/utils.ts';\nimport { SQLiteColumn, SQLiteColumnBuilder } from './common.ts';\n\nexport type ConvertCustomConfig<TName extends string, T extends Partial<CustomTypeValues>> =\n\t& {\n\t\tname: TName;\n\t\tdataType: 'custom';\n\t\tcolumnType: 'SQLiteCustomColumn';\n\t\tdata: T['data'];\n\t\tdriverParam: T['driverData'];\n\t\tenumValues: undefined;\n\t}\n\t& (T['notNull'] extends true ? { notNull: true } : {})\n\t& (T['default'] extends true ? { hasDefault: true } : {});\n\nexport interface SQLiteCustomColumnInnerConfig {\n\tcustomTypeValues: CustomTypeValues;\n}\n\nexport class SQLiteCustomColumnBuilder<T extends ColumnBuilderBaseConfig<'custom', 'SQLiteCustomColumn'>>\n\textends SQLiteColumnBuilder<\n\t\tT,\n\t\t{\n\t\t\tfieldConfig: CustomTypeValues['config'];\n\t\t\tcustomTypeParams: CustomTypeParams<any>;\n\t\t},\n\t\t{\n\t\t\tsqliteColumnBuilderBrand: 'SQLiteCustomColumnBuilderBrand';\n\t\t}\n\t>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteCustomColumnBuilder';\n\n\tconstructor(\n\t\tname: T['name'],\n\t\tfieldConfig: CustomTypeValues['config'],\n\t\tcustomTypeParams: CustomTypeParams<any>,\n\t) {\n\t\tsuper(name, 'custom', 'SQLiteCustomColumn');\n\t\tthis.config.fieldConfig = fieldConfig;\n\t\tthis.config.customTypeParams = customTypeParams;\n\t}\n\n\t/** @internal */\n\tbuild<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteCustomColumn<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteCustomColumn<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteCustomColumn<T extends ColumnBaseConfig<'custom', 'SQLiteCustomColumn'>> extends SQLiteColumn<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteCustomColumn';\n\n\tprivate sqlName: string;\n\tprivate mapTo?: (value: T['data']) => T['driverParam'];\n\tprivate mapFrom?: (value: T['driverParam']) => T['data'];\n\n\tconstructor(\n\t\ttable: AnySQLiteTable<{ name: T['tableName'] }>,\n\t\tconfig: SQLiteCustomColumnBuilder<T>['config'],\n\t) {\n\t\tsuper(table, config);\n\t\tthis.sqlName = config.customTypeParams.dataType(config.fieldConfig);\n\t\tthis.mapTo = config.customTypeParams.toDriver;\n\t\tthis.mapFrom = config.customTypeParams.fromDriver;\n\t}\n\n\tgetSQLType(): string {\n\t\treturn this.sqlName;\n\t}\n\n\toverride mapFromDriverValue(value: T['driverParam']): T['data'] {\n\t\treturn typeof this.mapFrom === 'function' ? this.mapFrom(value) : value as T['data'];\n\t}\n\n\toverride mapToDriverValue(value: T['data']): T['driverParam'] {\n\t\treturn typeof this.mapTo === 'function' ? this.mapTo(value) : value as T['data'];\n\t}\n}\n\nexport type CustomTypeValues = {\n\t/**\n\t * Required type for custom column, that will infer proper type model\n\t *\n\t * Examples:\n\t *\n\t * If you want your column to be `string` type after selecting/or on inserting - use `data: string`. Like `text`, `varchar`\n\t *\n\t * If you want your column to be `number` type after selecting/or on inserting - use `data: number`. Like `integer`\n\t */\n\tdata: unknown;\n\n\t/**\n\t * Type helper, that represents what type database driver is accepting for specific database data type\n\t */\n\tdriverData?: unknown;\n\n\t/**\n\t * What config type should be used for {@link CustomTypeParams} `dataType` generation\n\t */\n\tconfig?: Record<string, any>;\n\n\t/**\n\t * Whether the config argument should be required or not\n\t * @default false\n\t */\n\tconfigRequired?: boolean;\n\n\t/**\n\t * If your custom data type should be notNull by default you can use `notNull: true`\n\t *\n\t * @example\n\t * const customSerial = customType<{ data: number, notNull: true, default: true }>({\n\t * \t  dataType() {\n\t * \t    return 'serial';\n\t *    },\n\t * });\n\t */\n\tnotNull?: boolean;\n\n\t/**\n\t * If your custom data type has default you can use `default: true`\n\t *\n\t * @example\n\t * const customSerial = customType<{ data: number, notNull: true, default: true }>({\n\t * \t  dataType() {\n\t * \t    return 'serial';\n\t *    },\n\t * });\n\t */\n\tdefault?: boolean;\n};\n\nexport interface CustomTypeParams<T extends CustomTypeValues> {\n\t/**\n\t * Database data type string representation, that is used for migrations\n\t * @example\n\t * ```\n\t * `jsonb`, `text`\n\t * ```\n\t *\n\t * If database data type needs additional params you can use them from `config` param\n\t * @example\n\t * ```\n\t * `varchar(256)`, `numeric(2,3)`\n\t * ```\n\t *\n\t * To make `config` be of specific type please use config generic in {@link CustomTypeValues}\n\t *\n\t * @example\n\t * Usage example\n\t * ```\n\t *   dataType() {\n\t *     return 'boolean';\n\t *   },\n\t * ```\n\t * Or\n\t * ```\n\t *   dataType(config) {\n\t * \t   return typeof config.length !== 'undefined' ? `varchar(${config.length})` : `varchar`;\n\t * \t }\n\t * ```\n\t */\n\tdataType: (config: T['config'] | (Equal<T['configRequired'], true> extends true ? never : undefined)) => string;\n\n\t/**\n\t * Optional mapping function, between user input and driver\n\t * @example\n\t * For example, when using jsonb we need to map JS/TS object to string before writing to database\n\t * ```\n\t * toDriver(value: TData): string {\n\t * \t return JSON.stringify(value);\n\t * }\n\t * ```\n\t */\n\ttoDriver?: (value: T['data']) => T['driverData'] | SQL;\n\n\t/**\n\t * Optional mapping function, that is responsible for data mapping from database to JS/TS code\n\t * @example\n\t * For example, when using timestamp we need to map string Date representation to JS Date\n\t * ```\n\t * fromDriver(value: string): Date {\n\t * \treturn new Date(value);\n\t * },\n\t * ```\n\t */\n\tfromDriver?: (value: T['driverData']) => T['data'];\n}\n\n/**\n * Custom sqlite database data type generator\n */\nexport function customType<T extends CustomTypeValues = CustomTypeValues>(\n\tcustomTypeParams: CustomTypeParams<T>,\n): Equal<T['configRequired'], true> extends true ? {\n\t\t<TConfig extends Record<string, any> & T['config']>(\n\t\t\tfieldConfig: TConfig,\n\t\t): SQLiteCustomColumnBuilder<ConvertCustomConfig<'', T>>;\n\t\t<TName extends string>(\n\t\t\tdbName: TName,\n\t\t\tfieldConfig: T['config'],\n\t\t): SQLiteCustomColumnBuilder<ConvertCustomConfig<TName, T>>;\n\t}\n\t: {\n\t\t(): SQLiteCustomColumnBuilder<ConvertCustomConfig<'', T>>;\n\t\t<TConfig extends Record<string, any> & T['config']>(\n\t\t\tfieldConfig?: TConfig,\n\t\t): SQLiteCustomColumnBuilder<ConvertCustomConfig<'', T>>;\n\t\t<TName extends string>(\n\t\t\tdbName: TName,\n\t\t\tfieldConfig?: T['config'],\n\t\t): SQLiteCustomColumnBuilder<ConvertCustomConfig<TName, T>>;\n\t}\n{\n\treturn <TName extends string>(\n\t\ta?: TName | T['config'],\n\t\tb?: T['config'],\n\t): SQLiteCustomColumnBuilder<ConvertCustomConfig<TName, T>> => {\n\t\tconst { name, config } = getColumnNameAndConfig<T['config']>(a, b);\n\t\treturn new SQLiteCustomColumnBuilder(\n\t\t\tname as ConvertCustomConfig<TName, T>['name'],\n\t\t\tconfig,\n\t\t\tcustomTypeParams,\n\t\t);\n\t};\n}\n", "import type {\n\tColumnBuilderBaseConfig,\n\tColumnBuilderRuntimeConfig,\n\tColumnDataType,\n\tHasDefault,\n\tIsPrimaryKey,\n\tMakeColumnConfig,\n\tNotNull,\n} from '~/column-builder.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport { sql } from '~/sql/sql.ts';\nimport type { OnConflict } from '~/sqlite-core/utils.ts';\nimport { type Equal, getColumnNameAndConfig, type Or } from '~/utils.ts';\nimport type { AnySQLiteTable } from '../table.ts';\nimport { SQLiteColumn, SQLiteColumnBuilder } from './common.ts';\n\nexport interface PrimaryKeyConfig {\n\tautoIncrement?: boolean;\n\tonConflict?: OnConflict;\n}\n\nexport abstract class SQLiteBaseIntegerBuilder<\n\tT extends ColumnBuilderBaseConfig<ColumnDataType, string>,\n\tTRuntimeConfig extends object = object,\n> extends SQLiteColumnBuilder<\n\tT,\n\tTRuntimeConfig & { autoIncrement: boolean },\n\t{},\n\t{ primaryKeyHasDefault: true }\n> {\n\tstatic override readonly [entityKind]: string = 'SQLiteBaseIntegerBuilder';\n\n\tconstructor(name: T['name'], dataType: T['dataType'], columnType: T['columnType']) {\n\t\tsuper(name, dataType, columnType);\n\t\tthis.config.autoIncrement = false;\n\t}\n\n\toverride primaryKey(config?: PrimaryKeyConfig): IsPrimaryKey<HasDefault<NotNull<this>>> {\n\t\tif (config?.autoIncrement) {\n\t\t\tthis.config.autoIncrement = true;\n\t\t}\n\t\tthis.config.hasDefault = true;\n\t\treturn super.primaryKey() as IsPrimaryKey<HasDefault<NotNull<this>>>;\n\t}\n\n\t/** @internal */\n\tabstract override build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteBaseInteger<MakeColumnConfig<T, TTableName>>;\n}\n\nexport abstract class SQLiteBaseInteger<\n\tT extends ColumnBaseConfig<ColumnDataType, string>,\n\tTRuntimeConfig extends object = object,\n> extends SQLiteColumn<T, TRuntimeConfig & { autoIncrement: boolean }> {\n\tstatic override readonly [entityKind]: string = 'SQLiteBaseInteger';\n\n\treadonly autoIncrement: boolean = this.config.autoIncrement;\n\n\tgetSQLType(): string {\n\t\treturn 'integer';\n\t}\n}\n\nexport type SQLiteIntegerBuilderInitial<TName extends string> = SQLiteIntegerBuilder<{\n\tname: TName;\n\tdataType: 'number';\n\tcolumnType: 'SQLiteInteger';\n\tdata: number;\n\tdriverParam: number;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteIntegerBuilder<T extends ColumnBuilderBaseConfig<'number', 'SQLiteInteger'>>\n\textends SQLiteBaseIntegerBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteIntegerBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'number', 'SQLiteInteger');\n\t}\n\n\tbuild<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteInteger<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteInteger<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteInteger<T extends ColumnBaseConfig<'number', 'SQLiteInteger'>> extends SQLiteBaseInteger<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteInteger';\n}\n\nexport type SQLiteTimestampBuilderInitial<TName extends string> = SQLiteTimestampBuilder<{\n\tname: TName;\n\tdataType: 'date';\n\tcolumnType: 'SQLiteTimestamp';\n\tdata: Date;\n\tdriverParam: number;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteTimestampBuilder<T extends ColumnBuilderBaseConfig<'date', 'SQLiteTimestamp'>>\n\textends SQLiteBaseIntegerBuilder<T, { mode: 'timestamp' | 'timestamp_ms' }>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteTimestampBuilder';\n\n\tconstructor(name: T['name'], mode: 'timestamp' | 'timestamp_ms') {\n\t\tsuper(name, 'date', 'SQLiteTimestamp');\n\t\tthis.config.mode = mode;\n\t}\n\n\t/**\n\t * @deprecated Use `default()` with your own expression instead.\n\t *\n\t * Adds `DEFAULT (cast((julianday('now') - 2440587.5)*86400000 as integer))` to the column, which is the current epoch timestamp in milliseconds.\n\t */\n\tdefaultNow(): HasDefault<this> {\n\t\treturn this.default(sql`(cast((julianday('now') - 2440587.5)*86400000 as integer))`) as any;\n\t}\n\n\tbuild<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteTimestamp<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteTimestamp<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteTimestamp<T extends ColumnBaseConfig<'date', 'SQLiteTimestamp'>>\n\textends SQLiteBaseInteger<T, { mode: 'timestamp' | 'timestamp_ms' }>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteTimestamp';\n\n\treadonly mode: 'timestamp' | 'timestamp_ms' = this.config.mode;\n\n\toverride mapFromDriverValue(value: number): Date {\n\t\tif (this.config.mode === 'timestamp') {\n\t\t\treturn new Date(value * 1000);\n\t\t}\n\t\treturn new Date(value);\n\t}\n\n\toverride mapToDriverValue(value: Date): number {\n\t\tconst unix = value.getTime();\n\t\tif (this.config.mode === 'timestamp') {\n\t\t\treturn Math.floor(unix / 1000);\n\t\t}\n\t\treturn unix;\n\t}\n}\n\nexport type SQLiteBooleanBuilderInitial<TName extends string> = SQLiteBooleanBuilder<{\n\tname: TName;\n\tdataType: 'boolean';\n\tcolumnType: 'SQLiteBoolean';\n\tdata: boolean;\n\tdriverParam: number;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteBooleanBuilder<T extends ColumnBuilderBaseConfig<'boolean', 'SQLiteBoolean'>>\n\textends SQLiteBaseIntegerBuilder<T, { mode: 'boolean' }>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteBooleanBuilder';\n\n\tconstructor(name: T['name'], mode: 'boolean') {\n\t\tsuper(name, 'boolean', 'SQLiteBoolean');\n\t\tthis.config.mode = mode;\n\t}\n\n\tbuild<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteBoolean<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteBoolean<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteBoolean<T extends ColumnBaseConfig<'boolean', 'SQLiteBoolean'>>\n\textends SQLiteBaseInteger<T, { mode: 'boolean' }>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteBoolean';\n\n\treadonly mode: 'boolean' = this.config.mode;\n\n\toverride mapFromDriverValue(value: number): boolean {\n\t\treturn Number(value) === 1;\n\t}\n\n\toverride mapToDriverValue(value: boolean): number {\n\t\treturn value ? 1 : 0;\n\t}\n}\n\nexport interface IntegerConfig<\n\tTMode extends 'number' | 'timestamp' | 'timestamp_ms' | 'boolean' =\n\t\t| 'number'\n\t\t| 'timestamp'\n\t\t| 'timestamp_ms'\n\t\t| 'boolean',\n> {\n\tmode: TMode;\n}\n\nexport function integer(): SQLiteIntegerBuilderInitial<''>;\nexport function integer<TMode extends IntegerConfig['mode']>(\n\tconfig?: IntegerConfig<TMode>,\n): Or<Equal<TMode, 'timestamp'>, Equal<TMode, 'timestamp_ms'>> extends true ? SQLiteTimestampBuilderInitial<''>\n\t: Equal<TMode, 'boolean'> extends true ? SQLiteBooleanBuilderInitial<''>\n\t: SQLiteIntegerBuilderInitial<''>;\nexport function integer<TName extends string, TMode extends IntegerConfig['mode']>(\n\tname: TName,\n\tconfig?: IntegerConfig<TMode>,\n): Or<Equal<TMode, 'timestamp'>, Equal<TMode, 'timestamp_ms'>> extends true ? SQLiteTimestampBuilderInitial<TName>\n\t: Equal<TMode, 'boolean'> extends true ? SQLiteBooleanBuilderInitial<TName>\n\t: SQLiteIntegerBuilderInitial<TName>;\nexport function integer(a?: string | IntegerConfig, b?: IntegerConfig) {\n\tconst { name, config } = getColumnNameAndConfig<IntegerConfig | undefined>(a, b);\n\tif (config?.mode === 'timestamp' || config?.mode === 'timestamp_ms') {\n\t\treturn new SQLiteTimestampBuilder(name, config.mode);\n\t}\n\tif (config?.mode === 'boolean') {\n\t\treturn new SQLiteBooleanBuilder(name, config.mode);\n\t}\n\treturn new SQLiteIntegerBuilder(name);\n}\n\nexport const int = integer;\n", "import type { ColumnBuilderBaseConfig, ColumnBuilderRuntimeConfig, MakeColumnConfig } from '~/column-builder.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { AnySQLiteTable } from '~/sqlite-core/table.ts';\nimport { type Equal, getColumnNameAndConfig } from '~/utils.ts';\nimport { SQLiteColumn, SQLiteColumnBuilder } from './common.ts';\n\nexport type SQLiteNumericBuilderInitial<TName extends string> = SQLiteNumericBuilder<{\n\tname: TName;\n\tdataType: 'string';\n\tcolumnType: 'SQLiteNumeric';\n\tdata: string;\n\tdriverParam: string;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteNumericBuilder<T extends ColumnBuilderBaseConfig<'string', 'SQLiteNumeric'>>\n\textends SQLiteColumnBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteNumericBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'string', 'SQLiteNumeric');\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteNumeric<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteNumeric<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteNumeric<T extends ColumnBaseConfig<'string', 'SQLiteNumeric'>> extends SQLiteColumn<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteNumeric';\n\n\toverride mapFromDriverValue(value: unknown): string {\n\t\tif (typeof value === 'string') return value;\n\n\t\treturn String(value);\n\t}\n\n\tgetSQLType(): string {\n\t\treturn 'numeric';\n\t}\n}\n\nexport type SQLiteNumericNumberBuilderInitial<TName extends string> = SQLiteNumericNumberBuilder<{\n\tname: TName;\n\tdataType: 'number';\n\tcolumnType: 'SQLiteNumericNumber';\n\tdata: number;\n\tdriverParam: string;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteNumericNumberBuilder<T extends ColumnBuilderBaseConfig<'number', 'SQLiteNumericNumber'>>\n\textends SQLiteColumnBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteNumericNumberBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'number', 'SQLiteNumericNumber');\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteNumericNumber<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteNumericNumber<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteNumericNumber<T extends ColumnBaseConfig<'number', 'SQLiteNumericNumber'>> extends SQLiteColumn<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteNumericNumber';\n\n\toverride mapFromDriverValue(value: unknown): number {\n\t\tif (typeof value === 'number') return value;\n\n\t\treturn Number(value);\n\t}\n\n\toverride mapToDriverValue = String;\n\n\tgetSQLType(): string {\n\t\treturn 'numeric';\n\t}\n}\n\nexport type SQLiteNumericBigIntBuilderInitial<TName extends string> = SQLiteNumericBigIntBuilder<{\n\tname: TName;\n\tdataType: 'bigint';\n\tcolumnType: 'SQLiteNumericBigInt';\n\tdata: bigint;\n\tdriverParam: string;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteNumericBigIntBuilder<T extends ColumnBuilderBaseConfig<'bigint', 'SQLiteNumericBigInt'>>\n\textends SQLiteColumnBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteNumericBigIntBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'bigint', 'SQLiteNumericBigInt');\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteNumericBigInt<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteNumericBigInt<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteNumericBigInt<T extends ColumnBaseConfig<'bigint', 'SQLiteNumericBigInt'>> extends SQLiteColumn<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteNumericBigInt';\n\n\toverride mapFromDriverValue = BigInt;\n\n\toverride mapToDriverValue = String;\n\n\tgetSQLType(): string {\n\t\treturn 'numeric';\n\t}\n}\n\nexport type SQLiteNumericConfig<T extends 'string' | 'number' | 'bigint' = 'string' | 'number' | 'bigint'> = {\n\tmode: T;\n};\n\nexport function numeric<TMode extends SQLiteNumericConfig['mode']>(\n\tconfig?: SQLiteNumericConfig<TMode>,\n): Equal<TMode, 'number'> extends true ? SQLiteNumericNumberBuilderInitial<''>\n\t: Equal<TMode, 'bigint'> extends true ? SQLiteNumericBigIntBuilderInitial<''>\n\t: SQLiteNumericBuilderInitial<''>;\nexport function numeric<TName extends string, TMode extends SQLiteNumericConfig['mode']>(\n\tname: TName,\n\tconfig?: SQLiteNumericConfig<TMode>,\n): Equal<TMode, 'number'> extends true ? SQLiteNumericNumberBuilderInitial<TName>\n\t: Equal<TMode, 'bigint'> extends true ? SQLiteNumericBigIntBuilderInitial<TName>\n\t: SQLiteNumericBuilderInitial<TName>;\nexport function numeric(a?: string | SQLiteNumericConfig, b?: SQLiteNumericConfig) {\n\tconst { name, config } = getColumnNameAndConfig<SQLiteNumericConfig>(a, b);\n\tconst mode = config?.mode;\n\treturn mode === 'number'\n\t\t? new SQLiteNumericNumberBuilder(name)\n\t\t: mode === 'bigint'\n\t\t? new SQLiteNumericBigIntBuilder(name)\n\t\t: new SQLiteNumericBuilder(name);\n}\n", "import type { ColumnBuilderBaseConfig, ColumnBuilderRuntimeConfig, MakeColumnConfig } from '~/column-builder.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { AnySQLiteTable } from '../table.ts';\nimport { SQLiteColumn, SQLiteColumnBuilder } from './common.ts';\n\nexport type SQLiteRealBuilderInitial<TName extends string> = SQLiteRealBuilder<{\n\tname: TName;\n\tdataType: 'number';\n\tcolumnType: 'SQLiteReal';\n\tdata: number;\n\tdriverParam: number;\n\tenumValues: undefined;\n}>;\n\nexport class SQLiteRealBuilder<T extends ColumnBuilderBaseConfig<'number', 'SQLiteReal'>>\n\textends SQLiteColumnBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteRealBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'number', 'SQLiteReal');\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteReal<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteReal<MakeColumnConfig<T, TTableName>>(table, this.config as ColumnBuilderRuntimeConfig<any, any>);\n\t}\n}\n\nexport class SQLiteReal<T extends ColumnBaseConfig<'number', 'SQLiteReal'>> extends SQLiteColumn<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteReal';\n\n\tgetSQLType(): string {\n\t\treturn 'real';\n\t}\n}\n\nexport function real(): SQLiteRealBuilderInitial<''>;\nexport function real<TName extends string>(name: TName): SQLiteRealBuilderInitial<TName>;\nexport function real(name?: string) {\n\treturn new SQLiteRealBuilder(name ?? '');\n}\n", "import type { ColumnBuilderBaseConfig, ColumnBuilderRuntimeConfig, MakeColumnConfig } from '~/column-builder.ts';\nimport type { ColumnBaseConfig } from '~/column.ts';\nimport { entityKind } from '~/entity.ts';\nimport type { AnySQLiteTable } from '~/sqlite-core/table.ts';\nimport { type Equal, getColumnNameAndConfig, type Writable } from '~/utils.ts';\nimport { SQLiteColumn, SQLiteColumnBuilder } from './common.ts';\n\nexport type SQLiteTextBuilderInitial<\n\tTName extends string,\n\tTEnum extends [string, ...string[]],\n\tTLength extends number | undefined,\n> = SQLiteTextBuilder<{\n\tname: TName;\n\tdataType: 'string';\n\tcolumnType: 'SQLiteText';\n\tdata: TEnum[number];\n\tdriverParam: string;\n\tenumValues: TEnum;\n\tlength: TLength;\n}>;\n\nexport class SQLiteTextBuilder<\n\tT extends ColumnBuilderBaseConfig<'string', 'SQLiteText'> & { length?: number | undefined },\n> extends SQLiteColumnBuilder<\n\tT,\n\t{ length: T['length']; enumValues: T['enumValues'] },\n\t{ length: T['length'] }\n> {\n\tstatic override readonly [entityKind]: string = 'SQLiteTextBuilder';\n\n\tconstructor(name: T['name'], config: SQLiteTextConfig<'text', T['enumValues'], T['length']>) {\n\t\tsuper(name, 'string', 'SQLiteText');\n\t\tthis.config.enumValues = config.enum;\n\t\tthis.config.length = config.length;\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteText<MakeColumnConfig<T, TTableName> & { length: T['length'] }> {\n\t\treturn new SQLiteText<MakeColumnConfig<T, TTableName> & { length: T['length'] }>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteText<T extends ColumnBaseConfig<'string', 'SQLiteText'> & { length?: number | undefined }>\n\textends SQLiteColumn<T, { length: T['length']; enumValues: T['enumValues'] }>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteText';\n\n\toverride readonly enumValues = this.config.enumValues;\n\n\treadonly length: T['length'] = this.config.length;\n\n\tconstructor(\n\t\ttable: AnySQLiteTable<{ name: T['tableName'] }>,\n\t\tconfig: SQLiteTextBuilder<T>['config'],\n\t) {\n\t\tsuper(table, config);\n\t}\n\n\tgetSQLType(): string {\n\t\treturn `text${this.config.length ? `(${this.config.length})` : ''}`;\n\t}\n}\n\nexport type SQLiteTextJsonBuilderInitial<TName extends string> = SQLiteTextJsonBuilder<{\n\tname: TName;\n\tdataType: 'json';\n\tcolumnType: 'SQLiteTextJson';\n\tdata: unknown;\n\tdriverParam: string;\n\tenumValues: undefined;\n\tgenerated: undefined;\n}>;\n\nexport class SQLiteTextJsonBuilder<T extends ColumnBuilderBaseConfig<'json', 'SQLiteTextJson'>>\n\textends SQLiteColumnBuilder<T>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteTextJsonBuilder';\n\n\tconstructor(name: T['name']) {\n\t\tsuper(name, 'json', 'SQLiteTextJson');\n\t}\n\n\t/** @internal */\n\toverride build<TTableName extends string>(\n\t\ttable: AnySQLiteTable<{ name: TTableName }>,\n\t): SQLiteTextJson<MakeColumnConfig<T, TTableName>> {\n\t\treturn new SQLiteTextJson<MakeColumnConfig<T, TTableName>>(\n\t\t\ttable,\n\t\t\tthis.config as ColumnBuilderRuntimeConfig<any, any>,\n\t\t);\n\t}\n}\n\nexport class SQLiteTextJson<T extends ColumnBaseConfig<'json', 'SQLiteTextJson'>>\n\textends SQLiteColumn<T, { length: number | undefined; enumValues: T['enumValues'] }>\n{\n\tstatic override readonly [entityKind]: string = 'SQLiteTextJson';\n\n\tgetSQLType(): string {\n\t\treturn 'text';\n\t}\n\n\toverride mapFromDriverValue(value: string): T['data'] {\n\t\treturn JSON.parse(value);\n\t}\n\n\toverride mapToDriverValue(value: T['data']): string {\n\t\treturn JSON.stringify(value);\n\t}\n}\n\nexport type SQLiteTextConfig<\n\tTMode extends 'text' | 'json' = 'text' | 'json',\n\tTEnum extends readonly string[] | string[] | undefined = readonly string[] | string[] | undefined,\n\tTLength extends number | undefined = number | undefined,\n> = TMode extends 'text' ? {\n\t\tmode?: TMode;\n\t\tlength?: TLength;\n\t\tenum?: TEnum;\n\t}\n\t: {\n\t\tmode?: TMode;\n\t};\n\nexport function text(): SQLiteTextBuilderInitial<'', [string, ...string[]], undefined>;\nexport function text<\n\tU extends string,\n\tT extends Readonly<[U, ...U[]]>,\n\tL extends number | undefined,\n\tTMode extends 'text' | 'json' = 'text' | 'json',\n>(\n\tconfig?: SQLiteTextConfig<TMode, T | Writable<T>, L>,\n): Equal<TMode, 'json'> extends true ? SQLiteTextJsonBuilderInitial<''>\n\t: SQLiteTextBuilderInitial<'', Writable<T>, L>;\nexport function text<\n\tTName extends string,\n\tU extends string,\n\tT extends Readonly<[U, ...U[]]>,\n\tL extends number | undefined,\n\tTMode extends 'text' | 'json' = 'text' | 'json',\n>(\n\tname: TName,\n\tconfig?: SQLiteTextConfig<TMode, T | Writable<T>, L>,\n): Equal<TMode, 'json'> extends true ? SQLiteTextJsonBuilderInitial<TName>\n\t: SQLiteTextBuilderInitial<TName, Writable<T>, L>;\nexport function text(a?: string | SQLiteTextConfig, b: SQLiteTextConfig = {}): any {\n\tconst { name, config } = getColumnNameAndConfig<SQLiteTextConfig>(a, b);\n\tif (config.mode === 'json') {\n\t\treturn new SQLiteTextJsonBuilder(name);\n\t}\n\treturn new SQLiteTextBuilder(name, config as any);\n}\n", "import type { BuildColumns, BuildExtraConfigColumns } from '~/column-builder.ts';\nimport { entityKind } from '~/entity.ts';\nimport { Table, type TableConfig as TableConfigBase, type UpdateTableConfig } from '~/table.ts';\nimport type { CheckBuilder } from './checks.ts';\nimport { getSQLiteColumnBuilders, type SQLiteColumnBuilders } from './columns/all.ts';\nimport type { SQLiteColumn, SQLiteColumnBuilder, SQLiteColumnBuilderBase } from './columns/common.ts';\nimport type { ForeignKey, ForeignKeyBuilder } from './foreign-keys.ts';\nimport type { IndexBuilder } from './indexes.ts';\nimport type { PrimaryKeyBuilder } from './primary-keys.ts';\nimport type { UniqueConstraintBuilder } from './unique-constraint.ts';\n\nexport type SQLiteTableExtraConfigValue =\n\t| IndexBuilder\n\t| CheckBuilder\n\t| ForeignKeyBuilder\n\t| PrimaryKeyBuilder\n\t| UniqueConstraintBuilder;\n\nexport type SQLiteTableExtraConfig = Record<\n\tstring,\n\tSQLiteTableExtraConfigValue\n>;\n\nexport type TableConfig = TableConfigBase<SQLiteColumn<any>>;\n\n/** @internal */\nexport const InlineForeignKeys = Symbol.for('drizzle:SQLiteInlineForeignKeys');\n\nexport class SQLiteTable<T extends TableConfig = TableConfig> extends Table<T> {\n\tstatic override readonly [entityKind]: string = 'SQLiteTable';\n\n\t/** @internal */\n\tstatic override readonly Symbol = Object.assign({}, Table.Symbol, {\n\t\tInlineForeignKeys: InlineForeignKeys as typeof InlineForeignKeys,\n\t});\n\n\t/** @internal */\n\toverride [Table.Symbol.Columns]!: NonNullable<T['columns']>;\n\n\t/** @internal */\n\t[InlineForeignKeys]: ForeignKey[] = [];\n\n\t/** @internal */\n\toverride [Table.Symbol.ExtraConfigBuilder]:\n\t\t| ((self: Record<string, SQLiteColumn>) => SQLiteTableExtraConfig)\n\t\t| undefined = undefined;\n}\n\nexport type AnySQLiteTable<TPartial extends Partial<TableConfig> = {}> = SQLiteTable<\n\tUpdateTableConfig<TableConfig, TPartial>\n>;\n\nexport type SQLiteTableWithColumns<T extends TableConfig> =\n\t& SQLiteTable<T>\n\t& {\n\t\t[Key in keyof T['columns']]: T['columns'][Key];\n\t};\n\nexport interface SQLiteTableFn<TSchema extends string | undefined = undefined> {\n\t<\n\t\tTTableName extends string,\n\t\tTColumnsMap extends Record<string, SQLiteColumnBuilderBase>,\n\t>(\n\t\tname: TTableName,\n\t\tcolumns: TColumnsMap,\n\t\textraConfig?: (\n\t\t\tself: BuildColumns<TTableName, TColumnsMap, 'sqlite'>,\n\t\t) => SQLiteTableExtraConfigValue[],\n\t): SQLiteTableWithColumns<{\n\t\tname: TTableName;\n\t\tschema: TSchema;\n\t\tcolumns: BuildColumns<TTableName, TColumnsMap, 'sqlite'>;\n\t\tdialect: 'sqlite';\n\t}>;\n\n\t<\n\t\tTTableName extends string,\n\t\tTColumnsMap extends Record<string, SQLiteColumnBuilderBase>,\n\t>(\n\t\tname: TTableName,\n\t\tcolumns: (columnTypes: SQLiteColumnBuilders) => TColumnsMap,\n\t\textraConfig?: (self: BuildColumns<TTableName, TColumnsMap, 'sqlite'>) => SQLiteTableExtraConfigValue[],\n\t): SQLiteTableWithColumns<{\n\t\tname: TTableName;\n\t\tschema: TSchema;\n\t\tcolumns: BuildColumns<TTableName, TColumnsMap, 'sqlite'>;\n\t\tdialect: 'sqlite';\n\t}>;\n\t/**\n\t * @deprecated The third parameter of sqliteTable is changing and will only accept an array instead of an object\n\t *\n\t * @example\n\t * Deprecated version:\n\t * ```ts\n\t * export const users = sqliteTable(\"users\", {\n\t * \tid: int(),\n\t * }, (t) => ({\n\t * \tidx: index('custom_name').on(t.id)\n\t * }));\n\t * ```\n\t *\n\t * New API:\n\t * ```ts\n\t * export const users = sqliteTable(\"users\", {\n\t * \tid: int(),\n\t * }, (t) => [\n\t * \tindex('custom_name').on(t.id)\n\t * ]);\n\t * ```\n\t */\n\t<\n\t\tTTableName extends string,\n\t\tTColumnsMap extends Record<string, SQLiteColumnBuilderBase>,\n\t>(\n\t\tname: TTableName,\n\t\tcolumns: TColumnsMap,\n\t\textraConfig?: (self: BuildColumns<TTableName, TColumnsMap, 'sqlite'>) => SQLiteTableExtraConfig,\n\t): SQLiteTableWithColumns<{\n\t\tname: TTableName;\n\t\tschema: TSchema;\n\t\tcolumns: BuildColumns<TTableName, TColumnsMap, 'sqlite'>;\n\t\tdialect: 'sqlite';\n\t}>;\n\n\t/**\n\t * @deprecated The third parameter of sqliteTable is changing and will only accept an array instead of an object\n\t *\n\t * @example\n\t * Deprecated version:\n\t * ```ts\n\t * export const users = sqliteTable(\"users\", {\n\t * \tid: int(),\n\t * }, (t) => ({\n\t * \tidx: index('custom_name').on(t.id)\n\t * }));\n\t * ```\n\t *\n\t * New API:\n\t * ```ts\n\t * export const users = sqliteTable(\"users\", {\n\t * \tid: int(),\n\t * }, (t) => [\n\t * \tindex('custom_name').on(t.id)\n\t * ]);\n\t * ```\n\t */\n\t<\n\t\tTTableName extends string,\n\t\tTColumnsMap extends Record<string, SQLiteColumnBuilderBase>,\n\t>(\n\t\tname: TTableName,\n\t\tcolumns: (columnTypes: SQLiteColumnBuilders) => TColumnsMap,\n\t\textraConfig?: (self: BuildColumns<TTableName, TColumnsMap, 'sqlite'>) => SQLiteTableExtraConfig,\n\t): SQLiteTableWithColumns<{\n\t\tname: TTableName;\n\t\tschema: TSchema;\n\t\tcolumns: BuildColumns<TTableName, TColumnsMap, 'sqlite'>;\n\t\tdialect: 'sqlite';\n\t}>;\n}\n\nfunction sqliteTableBase<\n\tTTableName extends string,\n\tTColumnsMap extends Record<string, SQLiteColumnBuilderBase>,\n\tTSchema extends string | undefined,\n>(\n\tname: TTableName,\n\tcolumns: TColumnsMap | ((columnTypes: SQLiteColumnBuilders) => TColumnsMap),\n\textraConfig:\n\t\t| ((\n\t\t\tself: BuildColumns<TTableName, TColumnsMap, 'sqlite'>,\n\t\t) => SQLiteTableExtraConfig | SQLiteTableExtraConfigValue[])\n\t\t| undefined,\n\tschema?: TSchema,\n\tbaseName = name,\n): SQLiteTableWithColumns<{\n\tname: TTableName;\n\tschema: TSchema;\n\tcolumns: BuildColumns<TTableName, TColumnsMap, 'sqlite'>;\n\tdialect: 'sqlite';\n}> {\n\tconst rawTable = new SQLiteTable<{\n\t\tname: TTableName;\n\t\tschema: TSchema;\n\t\tcolumns: BuildColumns<TTableName, TColumnsMap, 'sqlite'>;\n\t\tdialect: 'sqlite';\n\t}>(name, schema, baseName);\n\n\tconst parsedColumns: TColumnsMap = typeof columns === 'function' ? columns(getSQLiteColumnBuilders()) : columns;\n\n\tconst builtColumns = Object.fromEntries(\n\t\tObject.entries(parsedColumns).map(([name, colBuilderBase]) => {\n\t\t\tconst colBuilder = colBuilderBase as SQLiteColumnBuilder;\n\t\t\tcolBuilder.setName(name);\n\t\t\tconst column = colBuilder.build(rawTable);\n\t\t\trawTable[InlineForeignKeys].push(...colBuilder.buildForeignKeys(column, rawTable));\n\t\t\treturn [name, column];\n\t\t}),\n\t) as unknown as BuildColumns<TTableName, TColumnsMap, 'sqlite'>;\n\n\tconst table = Object.assign(rawTable, builtColumns);\n\n\ttable[Table.Symbol.Columns] = builtColumns;\n\ttable[Table.Symbol.ExtraConfigColumns] = builtColumns as unknown as BuildExtraConfigColumns<\n\t\tTTableName,\n\t\tTColumnsMap,\n\t\t'sqlite'\n\t>;\n\n\tif (extraConfig) {\n\t\ttable[SQLiteTable.Symbol.ExtraConfigBuilder] = extraConfig as (\n\t\t\tself: Record<string, SQLiteColumn>,\n\t\t) => SQLiteTableExtraConfig;\n\t}\n\n\treturn table;\n}\n\nexport const sqliteTable: SQLiteTableFn = (name, columns, extraConfig) => {\n\treturn sqliteTableBase(name, columns, extraConfig);\n};\n\nexport function sqliteTableCreator(customizeTableName: (name: string) => string): SQLiteTableFn {\n\treturn (name, columns, extraConfig) => {\n\t\treturn sqliteTableBase(customizeTableName(name) as typeof name, columns, extraConfig, undefined, name);\n\t};\n}\n", "import { blob } from './blob.ts';\nimport { customType } from './custom.ts';\nimport { integer } from './integer.ts';\nimport { numeric } from './numeric.ts';\nimport { real } from './real.ts';\nimport { text } from './text.ts';\n\nexport function getSQLiteColumnBuilders() {\n\treturn {\n\t\tblob,\n\t\tcustomType,\n\t\tinteger,\n\t\tnumeric,\n\t\treal,\n\t\ttext,\n\t};\n}\n\nexport type SQLiteColumnBuilders = ReturnType<typeof getSQLiteColumnBuilders>;\n", "import { entityKind } from '~/entity.ts';\nimport type { SQL } from '~/sql/sql.ts';\nimport type { SQLiteColumn } from './columns/index.ts';\nimport type { SQLiteTable } from './table.ts';\n\nexport interface IndexConfig {\n\tname: string;\n\tcolumns: IndexColumn[];\n\tunique: boolean;\n\twhere: SQL | undefined;\n}\n\nexport type IndexColumn = SQLiteColumn | SQL;\n\nexport class IndexBuilderOn {\n\tstatic readonly [entityKind]: string = 'SQLiteIndexBuilderOn';\n\n\tconstructor(private name: string, private unique: boolean) {}\n\n\ton(...columns: [IndexColumn, ...IndexColumn[]]): IndexBuilder {\n\t\treturn new IndexBuilder(this.name, columns, this.unique);\n\t}\n}\n\nexport class IndexBuilder {\n\tstatic readonly [entityKind]: string = 'SQLiteIndexBuilder';\n\n\tdeclare _: {\n\t\tbrand: 'SQLiteIndexBuilder';\n\t};\n\n\t/** @internal */\n\tconfig: IndexConfig;\n\n\tconstructor(name: string, columns: IndexColumn[], unique: boolean) {\n\t\tthis.config = {\n\t\t\tname,\n\t\t\tcolumns,\n\t\t\tunique,\n\t\t\twhere: undefined,\n\t\t};\n\t}\n\n\t/**\n\t * Condition for partial index.\n\t */\n\twhere(condition: SQL): this {\n\t\tthis.config.where = condition;\n\t\treturn this;\n\t}\n\n\t/** @internal */\n\tbuild(table: SQLiteTable): Index {\n\t\treturn new Index(this.config, table);\n\t}\n}\n\nexport class Index {\n\tstatic readonly [entityKind]: string = 'SQLiteIndex';\n\n\tdeclare _: {\n\t\tbrand: 'SQLiteIndex';\n\t};\n\n\treadonly config: IndexConfig & { table: SQLiteTable };\n\n\tconstructor(config: IndexConfig, table: SQLiteTable) {\n\t\tthis.config = { ...config, table };\n\t}\n}\n\nexport function index(name: string): IndexBuilderOn {\n\treturn new IndexBuilderOn(name, false);\n}\n\nexport function uniqueIndex(name: string): IndexBuilderOn {\n\treturn new IndexBuilderOn(name, true);\n}\n", "import { sqliteTable, text, integer } from 'drizzle-orm/sqlite-core';\r\nimport { sql } from 'drizzle-orm';\r\nimport { tenants } from './tenants';\r\n\r\nexport const tenantDomains = sqliteTable('tenant_domains', {\r\n    id: text('id').primaryKey(),\r\n    tenantId: text('tenant_id').notNull().references(() => tenants.id, { onDelete: 'cascade' }),\r\n    domain: text('domain').notNull().unique(),\r\n    isPrimary: integer('is_primary').notNull().default(0),\r\n    createdAt: integer('created_at').notNull().default(sql`(strftime('%s', 'now'))`),\r\n});\r\n", "import { sqliteTable, text, integer } from 'drizzle-orm/sqlite-core';\r\nimport { sql } from 'drizzle-orm';\r\n\r\nexport const auditLogs = sqliteTable('audit_logs', {\r\n    id: text('id').primaryKey(),\r\n    tenantId: text('tenant_id'),\r\n    event: text('event').notNull(),\r\n    payload: text('payload'), // JSON\r\n    createdAt: integer('created_at').notNull().default(sql`(strftime('%s', 'now'))`),\r\n});\r\n", "import { sqliteTable, text, integer, uniqueIndex } from 'drizzle-orm/sqlite-core';\r\nimport { sql } from 'drizzle-orm';\r\n\r\nexport const settings = sqliteTable('settings', {\r\n    id: text('id').primaryKey(),\r\n    tenantId: text('tenant_id').notNull(),\r\n    moduleId: text('module_id').notNull(),\r\n    key: text('key').notNull(),\r\n    value: text('value'), // Will store JSON stringified value\r\n    updatedAt: integer('updated_at').notNull().default(sql`(strftime('%s', 'now'))`),\r\n}, (table) => ({\r\n    tenantModuleKeyIdx: uniqueIndex('tenant_module_key_idx').on(table.tenantId, table.moduleId, table.key),\r\n}));\r\n", "interface Migration {\r\n    id: string;\r\n    name: string;\r\n    sql?: string;\r\n}\r\n\r\ninterface MigrationManifest {\r\n    migrations: string[];\r\n    generated?: string;\r\n}\r\n\r\nexport class MigrationLoader {\r\n    private isProduction: boolean;\r\n    private manifest: MigrationManifest | null = null;\r\n\r\n    constructor() {\r\n        // Try to load mirrored manifest (bundled during build)\r\n        try {\r\n            // @ts-ignore - This file is generated dynamically or bundled\r\n            // In ESM/Workers, we might need a different strategy, but if bundler handles require or import:\r\n            // For now, let's try to retain the logic but maybe avoid require if it fails in browser\r\n            // implementation details depend on the bundler.\r\n            // Provided code used require, assuming it works or throws.\r\n            // Leaving as is, but wrapping in safe block if needed.\r\n            // Note: In pure ESM workers, require is not defined. \r\n            // We'll skip this change for now as the error was specifically node:fs.\r\n            // @ts-ignore\r\n            this.manifest = require('./migrations-manifest.json');\r\n            console.log(`[MigrationLoader] Loaded manifest with ${this.manifest?.migrations.length} files`);\r\n        } catch (e) {\r\n            console.warn('[MigrationLoader] Internal manifest NOT found. Did you run \"npm run db:manifest\"?');\r\n            this.manifest = { migrations: [] };\r\n        }\r\n\r\n        // We only use FS in local dev as a fallback\r\n        this.isProduction = typeof process === 'undefined' || !process.cwd;\r\n    }\r\n\r\n    /**\r\n     * Get list of migration files\r\n     */\r\n    async listMigrations(): Promise<Migration[]> {\r\n        // Always prefer the manifest if it exists (reliable in all environments)\r\n        if (this.manifest && this.manifest.migrations.length > 0) {\r\n            return this.manifest.migrations.map(name => ({\r\n                id: this.extractId(name),\r\n                name: name\r\n            }));\r\n        }\r\n\r\n        // Fallback to FS only if not in production and manifest is empty\r\n        if (!this.isProduction) {\r\n            return await this.listFromFilesystem();\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    /**\r\n     * Read migration SQL content (local only)\r\n     */\r\n    async readMigration(filename: string): Promise<string | null> {\r\n        if (this.isProduction) {\r\n            return null; // Can't read files in production\r\n        }\r\n\r\n        try {\r\n            const fs = await import('node:fs');\r\n            const path = await import('node:path');\r\n\r\n            const possiblePaths = [\r\n                path.join(process.cwd(), 'db', 'migrations', filename),\r\n                path.join(process.cwd(), '..', 'db', 'migrations', filename),\r\n                path.join(process.cwd(), 'backend', 'db', 'migrations', filename),\r\n            ];\r\n\r\n            for (const p of possiblePaths) {\r\n                if (fs.existsSync(p)) {\r\n                    return fs.readFileSync(p, 'utf-8');\r\n                }\r\n            }\r\n\r\n            console.error(`Migration file not found: ${filename}`);\r\n            return null;\r\n        } catch (e) {\r\n            console.error(`Failed to read migration ${filename}:`, e);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * List migrations from filesystem (local development)\r\n     */\r\n    private async listFromFilesystem(): Promise<Migration[]> {\r\n        try {\r\n            const fs = await import('node:fs');\r\n            const path = await import('node:path');\r\n\r\n            const possiblePaths = [\r\n                path.join(process.cwd(), 'db', 'migrations'),\r\n                path.join(process.cwd(), '..', 'db', 'migrations'),\r\n                path.join(process.cwd(), 'backend', 'db', 'migrations'),\r\n            ];\r\n\r\n            for (const migrationsPath of possiblePaths) {\r\n                if (fs.existsSync(migrationsPath)) {\r\n                    console.log(`[MigrationLoader] Found migrations at: ${migrationsPath}`);\r\n\r\n                    const files = fs.readdirSync(migrationsPath)\r\n                        .filter(f => f.endsWith('.sql'))\r\n                        .sort();\r\n\r\n                    return files.map(name => ({\r\n                        id: this.extractId(name),\r\n                        name: name\r\n                    }));\r\n                }\r\n            }\r\n\r\n            console.warn(`[MigrationLoader] No migrations directory found. Checked: ${possiblePaths.join(', ')}`);\r\n            return [];\r\n        } catch (e) {\r\n            console.error('Failed to list migrations from filesystem:', e);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Extract migration ID from filename\r\n     * Examples:\r\n     * - \"0001_initial_schema.sql\" -> \"0001\"\r\n     * - \"20240115_add_users.sql\" -> \"20240115\"\r\n     */\r\n    private extractId(filename: string): string {\r\n        // Remove .sql extension\r\n        const nameWithoutExt = filename.replace('.sql', '');\r\n\r\n        // Try to extract numeric prefix\r\n        const match = nameWithoutExt.match(/^(\\d+)/);\r\n        if (match) {\r\n            return match[1];\r\n        }\r\n\r\n        // Fallback to full name without extension\r\n        return nameWithoutExt;\r\n    }\r\n\r\n    /**\r\n     * Generate manifest file (for build scripts)\r\n     */\r\n    static async generateManifest(outputPath: string): Promise<void> {\r\n        const fs = await import('node:fs');\r\n        const path = await import('node:path');\r\n\r\n        const migrationsDir = path.join(process.cwd(), 'db', 'migrations');\r\n\r\n        if (!fs.existsSync(migrationsDir)) {\r\n            console.error(`Migrations directory not found: ${migrationsDir}`);\r\n            process.exit(1);\r\n        }\r\n\r\n        const files = fs.readdirSync(migrationsDir)\r\n            .filter(f => f.endsWith('.sql'))\r\n            .sort();\r\n\r\n        const manifest: MigrationManifest = {\r\n            migrations: files,\r\n            generated: new Date().toISOString()\r\n        };\r\n\r\n        fs.writeFileSync(outputPath, JSON.stringify(manifest, null, 2));\r\n        console.log(`\u2705 Generated manifest with ${files.length} migrations`);\r\n        console.log(files);\r\n    }\r\n}\r\n", "import { Hono } from 'hono';\nimport { moduleRegistry } from '@reactpress/core-registry';\n\n/**\n * Register module management API routes\n * \n * Provides REST API for querying and managing modules:\n * - List modules with stats\n * - Get individual module details\n * - Enable/disable modules platform-wide or per-tenant\n * - Get sidebar menu items based on context\n * - Track module usage across tenants\n * \n * Routes mounted at /api/v1/modules:\n * - GET    / - List all modules with stats\n * - GET    /stats - Statistics summary\n * - GET    /menu - Sidebar menu for current user/tenant\n * - GET    /status - Module enablement status\n * - GET    /:id - Get single module details\n * - POST   /:id/enable - Enable module platform-wide\n * - POST   /:id/disable - Disable module platform-wide\n * - GET    /:id/tenants - Get all tenants with module status\n * \n * @param {Hono<any>} app - Hono app instance to mount routes on\n * \n * @note This is CORE infrastructure, not a module itself\n * @note All data comes from moduleRegistry (dynamic) and database (stats)\n */\nexport function registerModulesRoutes(app: Hono<any>): void {\n    const modules = new Hono<{ Bindings: any; Variables: any }>();\n\n    // Dynamic module list from registry (filter out infrastructure)\n    const getModules = () => moduleRegistry.getAll().filter(m => !m.isInfrastructure);\n\n    /**\n     * GET /api/v1/modules\n     * List all modules with stats\n     */\n    modules.get('/', async (c) => {\n        const db = c.env.DB;\n\n        try {\n            // Get enabled counts per module\n            const stats = await db.prepare(`\n        SELECT module_id, COUNT(*) as tenant_count \n        FROM module_status \n        WHERE enabled = 1 \n        GROUP BY module_id\n      `).all();\n\n            const statsByModule: Record<string, number> = {};\n            for (const row of stats.results || []) {\n                statsByModule[(row as any).module_id] = (row as any).tenant_count;\n            }\n\n            // Get total tenant count (simple query without deleted_at)\n            const tenantCount = await db.prepare('SELECT COUNT(*) as count FROM tenants').first();\n\n            const modulesWithStats = getModules().map(mod => ({\n                ...mod,\n                tenantsEnabled: statsByModule[mod.id] || 0,\n                totalTenants: (tenantCount as any)?.count || 0,\n                platformEnabled: mod.isCore || (statsByModule[mod.id] || 0) > 0,\n                status: mod.isCore ? 'enabled' : (statsByModule[mod.id] > 0 ? 'enabled' : 'available'),\n            }));\n\n            return c.json(modulesWithStats);\n        } catch (error: any) {\n            console.error('Failed to get modules:', error);\n            return c.json(getModules().map(m => ({ ...m, tenantsEnabled: 0, platformEnabled: m.isCore })));\n        }\n    });\n\n    /**\n     * GET /api/v1/modules/stats\n     * Get module statistics summary\n     */\n    modules.get('/stats', async (c) => {\n        const db = c.env.DB;\n\n        try {\n            const enabledCount = await db.prepare(`\n        SELECT COUNT(DISTINCT module_id) as count \n        FROM module_status \n        WHERE enabled = 1\n      `).first();\n\n            return c.json({\n                total: getModules().length,\n                core: getModules().filter(m => m.isCore).length,\n                enabled: (enabledCount as any)?.count || 0,\n                available: getModules().filter(m => !m.isCore).length,\n            });\n        } catch (error: any) {\n            return c.json({ total: getModules().length, core: 3, enabled: 0, available: 4 });\n        }\n    });\n\n    /**\n     * GET /api/v1/modules/menu\n     * Get sidebar menu items for current user\n     */\n    modules.get('/menu', async (c) => {\n        const db = c.env.DB;\n        const tenantId = c.req.query('tenantId');\n\n        const user = c.get('user');\n        const isAdmin = c.get('isAdmin');\n\n        // For local dev: treat any authenticated admin as super admin\n        // This ensures menu items are visible during development\n        const isSuperAdmin = isAdmin === true;\n        const tenantPlan = 'pro';\n\n        console.log('[Menu] isAdmin:', isAdmin, 'user:', user?.role, 'isSuperAdmin:', isSuperAdmin);\n\n        try {\n            let enabledModules: string[] = [];\n\n            if (tenantId && tenantId !== 'default') {\n                const results = await db.prepare(`\n                    SELECT module_id FROM module_status \n                    WHERE tenant_id = ? AND enabled = 1\n                `).bind(tenantId).all();\n\n                enabledModules = (results.results || []).map((r: any) => r.module_id);\n            }\n\n            // Get dynamic menu from registry\n            const menuItems = await moduleRegistry.getSidebarMenu({\n                isSuperAdmin,\n                tenantPlan,\n                enabledModules\n            });\n\n            return c.json(menuItems);\n        } catch (error: any) {\n            console.error('Failed to get module menu:', error);\n            // Minimal fallback\n            return c.json([\n                { label: 'Dashboard', icon: 'LayoutDashboard', href: '/hpanel', order: 0 },\n                { label: 'Modules', icon: 'Package', href: '/hpanel/modules', order: 5 },\n            ]);\n        }\n    });\n\n    /**\n     * GET /api/v1/modules/status\n     * Get all module statuses for a tenant\n     */\n    modules.get('/status', async (c) => {\n        const db = c.env.DB;\n        const tenantId = c.req.query('tenantId');\n        const moduleId = c.req.query('moduleId');\n\n        try {\n            let query = 'SELECT module_id, tenant_id, enabled, enabled_at, enabled_by FROM module_status';\n            const params: string[] = [];\n\n            if (tenantId) {\n                query += ' WHERE tenant_id = ?';\n                params.push(tenantId);\n            } else if (moduleId) {\n                query += ' WHERE module_id = ?';\n                params.push(moduleId);\n            }\n\n            const statuses = await db.prepare(query).bind(...params).all();\n            return c.json(statuses.results);\n        } catch (error: any) {\n            return c.json([]);\n        }\n    });\n\n    /**\n     * GET /api/v1/modules/:id\n     * Get single module details\n     */\n    modules.get('/:id', async (c) => {\n        const db = c.env.DB;\n        const moduleId = c.req.param('id');\n\n        const module = getModules().find(m => m.id === moduleId);\n        if (!module) {\n            return c.json({ error: 'Module not found' }, 404);\n        }\n\n        try {\n            // Get tenant count for this module\n            const stats = await db.prepare(`\n        SELECT COUNT(*) as enabled_count \n        FROM module_status \n        WHERE module_id = ? AND enabled = 1\n      `).bind(moduleId).first();\n\n            // Get all tenants with their status for this module\n            const tenantStatuses = await db.prepare(`\n        SELECT t.id, t.name, t.slug, ms.enabled, ms.enabled_at, ms.enabled_by\n        FROM tenants t\n        LEFT JOIN module_status ms ON t.id = ms.tenant_id AND ms.module_id = ?\n      `).bind(moduleId).all();\n\n            return c.json({\n                ...module,\n                tenantsEnabled: (stats as any)?.enabled_count || 0,\n                tenants: tenantStatuses.results,\n            });\n        } catch (error: any) {\n            return c.json({ ...module, tenantsEnabled: 0, tenants: [] });\n        }\n    });\n\n    /**\n     * POST /api/v1/modules/:id/enable\n     * Enable module platform-wide\n     */\n    modules.post('/:id/enable', async (c) => {\n        const db = c.env.DB;\n        const moduleId = c.req.param('id');\n        const { enabledBy } = await c.req.json();\n\n        try {\n            // Get all tenants\n            const tenants = await db.prepare('SELECT id FROM tenants').all();\n\n            // Enable for all tenants\n            for (const tenant of tenants.results || []) {\n                await db.prepare(`\n          INSERT INTO module_status (id, module_id, tenant_id, enabled, enabled_at, enabled_by, created_at)\n          VALUES (?, ?, ?, 1, ?, ?, ?)\n          ON CONFLICT(module_id, tenant_id) DO UPDATE SET enabled = 1, enabled_at = ?, enabled_by = ?\n        `).bind(\n                    crypto.randomUUID(),\n                    moduleId,\n                    (tenant as any).id,\n                    Math.floor(Date.now() / 1000),\n                    enabledBy || 'admin',\n                    Math.floor(Date.now() / 1000),\n                    Math.floor(Date.now() / 1000),\n                    enabledBy || 'admin'\n                ).run();\n            }\n\n            return c.json({ success: true, tenantsEnabled: tenants.results?.length || 0 });\n        } catch (error: any) {\n            return c.json({ error: 'Failed to enable module', message: error.message }, 500);\n        }\n    });\n\n    /**\n     * POST /api/v1/modules/:id/disable\n     * Disable module platform-wide\n     */\n    modules.post('/:id/disable', async (c) => {\n        const db = c.env.DB;\n        const moduleId = c.req.param('id');\n\n        try {\n            await db.prepare(`\n        UPDATE module_status SET enabled = 0, updated_at = ?\n        WHERE module_id = ?\n      `).bind(Math.floor(Date.now() / 1000), moduleId).run();\n\n            return c.json({ success: true });\n        } catch (error: any) {\n            return c.json({ error: 'Failed to disable module', message: error.message }, 500);\n        }\n    });\n\n    /**\n     * GET /api/v1/modules/:id/tenants\n     * Get all tenants with their status for a module\n     */\n    modules.get('/:id/tenants', async (c) => {\n        const db = c.env.DB;\n        const moduleId = c.req.param('id');\n\n        try {\n            const tenants = await db.prepare(`\n        SELECT t.id, t.name, t.slug, t.status,\n               ms.enabled, ms.enabled_at, ms.enabled_by\n        FROM tenants t\n        LEFT JOIN module_status ms ON t.id = ms.tenant_id AND ms.module_id = ?\n        ORDER BY t.name\n      `).bind(moduleId).all();\n\n            return c.json(tenants.results);\n        } catch (error: any) {\n            return c.json([]);\n        }\n    });\n\n    // Mount routes\n    app.route('/api/v1/modules', modules);\n}\n", "import { moduleRegistry } from '@reactpress/core-registry';\r\n\r\n/**\r\n * Bootstrap the backend modular system.\r\n * This function imports all the foundation modules, which triggers their \r\n * self-registration with the moduleRegistry.\r\n */\r\nexport async function bootstrapBackend() {\r\n    console.log('\\n\uD83D\uDE80 Bootstrapping Modular Platform...');\r\n\r\n    // 1. Import all foundation modules to trigger registration\r\n    const { registerCoreModules } = await import('@reactpress/modules-core');\r\n    registerCoreModules();\r\n\r\n    // Core modules (Foundation)\r\n    await import('@reactpress/modules-auth');\r\n    await import('@reactpress/modules-users');\r\n    await import('@reactpress/modules-tenants');\r\n\r\n    // Optional Features\r\n    await import('@reactpress/modules-cms');\r\n    await import('@reactpress/modules-crm');\r\n    await import('@reactpress/modules-seo');\r\n\r\n    // 2. Log registered modules\r\n    const modules = moduleRegistry.getAll();\r\n    console.log(`\uD83D\uDCE6 Registered ${modules.length} foundation modules:`);\r\n    modules.forEach(m => console.log(`  - ${m.name} (${m.id}) v${m.version}`));\r\n\r\n    // 3. Verify dependencies\r\n    const modulesInOrder = moduleRegistry.getInLoadOrder();\r\n    console.log(`\u2705 System ready. Load order: ${modulesInOrder.map(m => m.id).join(' -> ')}\\n`);\r\n\r\n    return true;\r\n}\r\n", "import type { Hono } from 'hono';\nimport { moduleRegistry } from '@reactpress/core-registry';\n\n/**\n * ModuleLoader - Loads and registers all module routes\n * \n * Import order matters for dependency resolution:\n * 1. Core modules first (auth)\n * 2. Foundation modules (users)\n * 3. Platform modules (tenants)\n * 4. Optional modules (cms, crm, seo) - can be lazy loaded\n */\n\n// Foundation modules - always loaded\nimport '@reactpress/modules-auth';\nimport '@reactpress/modules-users';\nimport '@reactpress/modules-tenants';\n\n/**\n * Load all registered module routes into the Hono app\n * \n * Iterates through modules in dependency order and mounts their routes.\n * Handles errors gracefully - if one module fails, others continue loading.\n * \n * @param {Hono<any>} app - Hono app instance to mount routes on\n * @throws Does not throw; logs errors and continues with next module\n * \n * @example\n * import { Hono } from 'hono';\n * import { loadModuleRoutes } from '@/lib/ModuleLoader';\n * \n * const app = new Hono();\n * loadModuleRoutes(app);\n * // Prints: Loading 5 modules... \u2713 Auth routes mounted \u2713 Users routes mounted...\n */\nexport function loadModuleRoutes(app: Hono<any>): void {\n    const modules = moduleRegistry.getInLoadOrder();\n\n    console.log(`\\n\uD83D\uDCE6 Loading ${modules.length} modules...`);\n\n    for (const module of modules) {\n        try {\n            module.routes(app);\n            console.log(`  \u2713 ${module.name} routes mounted`);\n        } catch (error) {\n            console.error(`  \u2717 Failed to load ${module.name}:`, error);\n        }\n    }\n\n    console.log(`\\n\u2705 All modules loaded\\n`);\n}\n\n/**\n * Get sidebar menu items filtered by user context\n * \n * Fetches menu items from moduleRegistry based on admin status, tenant plan, and enabled modules.\n * Used by API endpoint to build dynamic admin sidebar.\n * \n * @param {Object} context - Filter context\n * @param {boolean} context.isSuperAdmin - Is user a super admin (sees all items)\n * @param {string} [context.tenantPlan] - Tenant plan level ('free', 'starter', 'pro', 'enterprise')\n * @param {string[]} [context.enabledModules] - List of module IDs enabled for tenant\n * @returns {Promise<ModuleMenuItem[]>} Menu items filtered for this context\n * \n * @example\n * const menu = await getModuleMenu({\n *   isSuperAdmin: user.role === 'admin',\n *   tenantPlan: tenant.plan,\n *   enabledModules: ['auth', 'users', 'cms']\n * });\n */\nexport async function getModuleMenu(context: {\n    isSuperAdmin: boolean;\n    tenantPlan?: string;\n    enabledModules?: string[];\n}) {\n    return moduleRegistry.getSidebarMenu(context);\n}\n\n/**\n * Lazy load optional module by ID\n * \n * Dynamically imports optional modules (cms, crm, seo) that are not in the foundation set.\n * Foundation modules (auth, users, tenants) are pre-imported and should not use this function.\n * \n * @param {string} moduleId - Module ID to load ('cms', 'crm', 'seo', etc.)\n * @returns {Promise<boolean>} True if loaded successfully, false if not found or error\n * \n * @example\n * const loaded = await lazyLoadModule('cms');\n * if (loaded) {\n *   console.log('CMS module loaded');\n * } else {\n *   console.log('CMS module not available');\n * }\n * \n * @note Add new optional modules by uncommenting cases and importing them\n */\nexport async function lazyLoadModule(moduleId: string): Promise<boolean> {\n    try {\n        switch (moduleId) {\n            // Optional modules - uncomment as they are created\n            // case 'cms':\n            //   await import('@reactpress/modules-cms');\n            //   return true;\n            // case 'crm':\n            //   await import('@reactpress/modules-crm');\n            //   return true;\n            // case 'seo':\n            //   await import('@reactpress/modules-seo');\n            //   return true;\n            default:\n                console.warn(`Optional module not found: ${moduleId}`);\n                return false;\n        }\n    } catch (error) {\n        console.error(`Failed to load optional module ${moduleId}:`, error);\n        return false;\n    }\n}\n\n/**\n * Load modules enabled for a specific tenant\n * \n * Mounts routes for optional modules that have been enabled for a specific tenant.\n * Foundation modules are skipped since they're already loaded globally.\n * \n * @param {Hono<any>} app - Hono app instance to mount routes on\n * @param {string[]} enabledModuleIds - List of module IDs enabled for this tenant\n * @returns {Promise<void>}\n * \n * @example\n * const tenant = await getTenantoById('acme-corp');\n * const enabledIds = tenant.enabledModules || [];\n * await loadTenantModules(app, enabledIds);\n * // Routes for enabled optional modules are now mounted\n * \n * @note Foundation modules (auth, users, tenants) are always available\n */\nexport async function loadTenantModules(\n    app: Hono<any>,\n    enabledModuleIds: string[]\n): Promise<void> {\n    for (const moduleId of enabledModuleIds) {\n        const module = moduleRegistry.get(moduleId);\n\n        // Skip if already loaded (foundation modules)\n        if (module) {\n            continue;\n        }\n\n        // Lazy load optional modules\n        await lazyLoadModule(moduleId);\n\n        const loadedModule = moduleRegistry.get(moduleId);\n        if (loadedModule) {\n            loadedModule.routes(app);\n            console.log(`  \u2713 ${loadedModule.name} loaded for tenant`);\n        }\n    }\n}\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA,SAAS,0BAA0B,OAAO,MAAM;AAC/C,QAAM,UAAU,IAAI,QAAQ,OAAO,IAAI;AACvC,UAAQ,QAAQ,OAAO,kBAAkB;AACzC,SAAO;AACR;AAJA;AAAA;AAAA;AAAS;AAMT,eAAW,QAAQ,IAAI,MAAM,WAAW,OAAO;AAAA,MAC9C,MAAM,QAAQ,SAAS,UAAU;AAChC,eAAO,QAAQ,MAAM,QAAQ,SAAS;AAAA,UACrC,0BAA0B,MAAM,MAAM,QAAQ;AAAA,QAC/C,CAAC;AAAA,MACF;AAAA,IACD,CAAC;AAAA;AAAA;;;ACQ+B,SAAS,0BAA0B,MAAM;AACxE,SAAO,IAAI,MAAM,WAAW,8BAA8B;AAC3D;AACgC,SAAS,eAAe,MAAM;AAC7D,QAAM,KAAK,6BAAM;AAChB,UAAM,0BAA0B,IAAI;AAAA,EACrC,GAFW;AAGX,SAAO,OAAO,OAAO,IAAI,EAAE,WAAW,KAAK,CAAC;AAC7C;AACgC,SAAS,oBAAoB,MAAM;AAClE,QAAM,KAAK,eAAe,IAAI;AAC9B,KAAG,gBAAgB,MAAM,eAAe,OAAO,gBAAgB;AAC/D,KAAG,SAAS;AACZ,SAAO;AACR;AACgC,SAAS,oBAAoB,MAAM;AAClE,SAAO,MAAM;AAAA,IACZ,YAAY;AAAA,IACZ,cAAc;AACb,YAAM,IAAI,MAAM,WAAW,8BAA8B;AAAA,IAC1D;AAAA,EACD;AACD;AA1CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAA;AAoByC;AAGA;AAMA;AAMA;AAAA;AAAA;;;ACnCzC,IACM,aACA,iBACA,YAsBO,kBAwBA,iBASA,oBAGA,2BAwBA,8BAYA,aAsFA,qBAgCA;AAvNb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AAAA;AACA,IAAM,cAAc,WAAW,aAAa,cAAc,KAAK,IAAI;AACnE,IAAM,kBAAkB,WAAW,aAAa,MAAM,WAAW,YAAY,IAAI,KAAK,WAAW,WAAW,IAAI,MAAM,KAAK,IAAI,IAAI;AACnI,IAAM,aAAa;AAAA,MAClB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,WAAW;AAAA,MACX,UAAU;AAAA,MACV,WAAW;AAAA,MACX,SAAS;AAAA,MACT,mBAAmB;AAAA,MACnB,aAAa;AAAA,MACb,WAAW;AAAA,MACX,UAAU;AAAA,MACV,UAAU;AAAA,MACV,eAAe;AAAA,QACd,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,eAAe;AAAA,MAChB;AAAA,MACA,QAAQ;AAAA,MACR,SAAS;AACR,eAAO;AAAA,MACR;AAAA,IACD;AACO,IAAM,mBAAN,MAAuB;AAAA,MAC7B,YAAY;AAAA,MACZ;AAAA,MACA,YAAY;AAAA,MACZ;AAAA,MACA;AAAA,MACA,YAAY,MAAM,SAAS;AAC1B,aAAK,OAAO;AACZ,aAAK,YAAY,SAAS,aAAa,gBAAgB;AACvD,aAAK,SAAS,SAAS;AAAA,MACxB;AAAA,MACA,IAAI,WAAW;AACd,eAAO,gBAAgB,IAAI,KAAK;AAAA,MACjC;AAAA,MACA,SAAS;AACR,eAAO;AAAA,UACN,MAAM,KAAK;AAAA,UACX,WAAW,KAAK;AAAA,UAChB,WAAW,KAAK;AAAA,UAChB,UAAU,KAAK;AAAA,UACf,QAAQ,KAAK;AAAA,QACd;AAAA,MACD;AAAA,IACD;AAvBa;AAwBN,IAAM,kBAAkB,6BAAMC,yBAAwB,iBAAiB;AAAA,MAC7E,YAAY;AAAA,MACZ,cAAc;AACb,cAAM,GAAG,SAAS;AAAA,MACnB;AAAA,MACA,IAAI,WAAW;AACd,eAAO;AAAA,MACR;AAAA,IACD,GAR+B;AASxB,IAAM,qBAAN,cAAiC,iBAAiB;AAAA,MACxD,YAAY;AAAA,IACb;AAFa;AAGN,IAAM,4BAAN,cAAwC,iBAAiB;AAAA,MAC/D,YAAY;AAAA,MACZ,eAAe,CAAC;AAAA,MAChB,aAAa;AAAA,MACb,eAAe;AAAA,MACf,kBAAkB;AAAA,MAClB,kBAAkB;AAAA,MAClB,oBAAoB;AAAA,MACpB,kBAAkB;AAAA,MAClB,aAAa;AAAA,MACb,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,kBAAkB;AAAA,MAClB,cAAc;AAAA,MACd,gBAAgB;AAAA,MAChB,eAAe;AAAA,MACf,cAAc;AAAA,MACd,gBAAgB;AAAA,MAChB,wBAAwB;AAAA,MACxB,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,cAAc;AAAA,MACd,iBAAiB;AAAA,IAClB;AAvBa;AAwBN,IAAM,+BAAN,MAAmC;AAAA,MACzC,YAAY;AAAA,MACZ,aAAa;AACZ,eAAO,CAAC;AAAA,MACT;AAAA,MACA,iBAAiB,OAAO,OAAO;AAC9B,eAAO,CAAC;AAAA,MACT;AAAA,MACA,iBAAiB,MAAM;AACtB,eAAO,CAAC;AAAA,MACT;AAAA,IACD;AAXa;AAYN,IAAM,cAAN,MAAkB;AAAA,MACxB,YAAY;AAAA,MACZ,aAAa;AAAA,MACb,cAAc,oBAAI,IAAI;AAAA,MACtB,WAAW,CAAC;AAAA,MACZ,4BAA4B;AAAA,MAC5B,aAAa;AAAA,MACb,SAAS;AAAA,MACT,SAAS,KAAK,UAAU;AACvB,cAAM,0BAA0B,sBAAsB;AAAA,MACvD;AAAA,MACA,IAAI,aAAa;AAChB,eAAO;AAAA,MACR;AAAA,MACA,uBAAuB;AACtB,eAAO,CAAC;AAAA,MACT;AAAA,MACA,qBAAqB;AACpB,eAAO,IAAI,0BAA0B,EAAE;AAAA,MACxC;AAAA,MACA,6BAA6B;AAAA,MAC7B,MAAM;AACL,YAAI,KAAK,eAAe,aAAa;AACpC,iBAAO,gBAAgB;AAAA,QACxB;AACA,eAAO,KAAK,IAAI,IAAI,KAAK;AAAA,MAC1B;AAAA,MACA,WAAW,UAAU;AACpB,aAAK,WAAW,WAAW,KAAK,SAAS,OAAO,CAAC,MAAM,EAAE,SAAS,QAAQ,IAAI,KAAK,SAAS,OAAO,CAAC,MAAM,EAAE,cAAc,MAAM;AAAA,MACjI;AAAA,MACA,cAAc,aAAa;AAC1B,aAAK,WAAW,cAAc,KAAK,SAAS,OAAO,CAAC,MAAM,EAAE,SAAS,WAAW,IAAI,KAAK,SAAS,OAAO,CAAC,MAAM,EAAE,cAAc,SAAS;AAAA,MAC1I;AAAA,MACA,uBAAuB;AACtB,aAAK,WAAW,KAAK,SAAS,OAAO,CAAC,MAAM,EAAE,cAAc,cAAc,EAAE,cAAc,YAAY;AAAA,MACvG;AAAA,MACA,aAAa;AACZ,eAAO,KAAK;AAAA,MACb;AAAA,MACA,iBAAiB,MAAM,MAAM;AAC5B,eAAO,KAAK,SAAS,OAAO,CAAC,MAAM,EAAE,SAAS,SAAS,CAAC,QAAQ,EAAE,cAAc,KAAK;AAAA,MACtF;AAAA,MACA,iBAAiB,MAAM;AACtB,eAAO,KAAK,SAAS,OAAO,CAAC,MAAM,EAAE,cAAc,IAAI;AAAA,MACxD;AAAA,MACA,KAAK,MAAM,SAAS;AACnB,cAAM,QAAQ,IAAI,gBAAgB,MAAM,OAAO;AAC/C,aAAK,SAAS,KAAK,KAAK;AACxB,eAAO;AAAA,MACR;AAAA,MACA,QAAQ,aAAa,uBAAuB,SAAS;AACpD,YAAI;AACJ,YAAI;AACJ,YAAI,OAAO,0BAA0B,UAAU;AAC9C,kBAAQ,KAAK,iBAAiB,uBAAuB,MAAM,EAAE,CAAC,GAAG;AACjE,gBAAM,KAAK,iBAAiB,SAAS,MAAM,EAAE,CAAC,GAAG;AAAA,QAClD,OAAO;AACN,kBAAQ,OAAO,WAAW,uBAAuB,KAAK,KAAK,KAAK,IAAI;AACpE,gBAAM,OAAO,WAAW,uBAAuB,GAAG,KAAK,KAAK,IAAI;AAAA,QACjE;AACA,cAAM,QAAQ,IAAI,mBAAmB,aAAa;AAAA,UACjD,WAAW;AAAA,UACX,QAAQ;AAAA,YACP;AAAA,YACA;AAAA,UACD;AAAA,QACD,CAAC;AACD,aAAK,SAAS,KAAK,KAAK;AACxB,eAAO;AAAA,MACR;AAAA,MACA,4BAA4B,SAAS;AACpC,aAAK,4BAA4B;AAAA,MAClC;AAAA,MACA,iBAAiB,MAAM,UAAU,SAAS;AACzC,cAAM,0BAA0B,8BAA8B;AAAA,MAC/D;AAAA,MACA,oBAAoB,MAAM,UAAU,SAAS;AAC5C,cAAM,0BAA0B,iCAAiC;AAAA,MAClE;AAAA,MACA,cAAc,OAAO;AACpB,cAAM,0BAA0B,2BAA2B;AAAA,MAC5D;AAAA,MACA,SAAS;AACR,eAAO;AAAA,MACR;AAAA,IACD;AArFa;AAsFN,IAAM,sBAAN,MAA0B;AAAA,MAChC,YAAY;AAAA,MAEZ,YAAY;AAAA,MACZ,YAAY,UAAU;AACrB,aAAK,YAAY;AAAA,MAClB;AAAA,MACA,cAAc;AACb,eAAO,CAAC;AAAA,MACT;AAAA,MACA,aAAa;AACZ,cAAM,0BAA0B,gCAAgC;AAAA,MACjE;AAAA,MACA,QAAQ,SAAS;AAChB,cAAM,0BAA0B,6BAA6B;AAAA,MAC9D;AAAA,MACA,KAAK,IAAI;AACR,eAAO;AAAA,MACR;AAAA,MACA,gBAAgB,IAAI,YAAY,MAAM;AACrC,eAAO,GAAG,KAAK,SAAS,GAAG,IAAI;AAAA,MAChC;AAAA,MACA,UAAU;AACT,eAAO;AAAA,MACR;AAAA,MACA,iBAAiB;AAChB,eAAO;AAAA,MACR;AAAA,MACA,cAAc;AACb,eAAO;AAAA,MACR;AAAA,IACD;AA/Ba;AAEZ,kBAFY,qBAEL,uBAAsB,CAAC;AA8BxB,IAAM,cAAc,WAAW,eAAe,sBAAsB,WAAW,cAAc,WAAW,cAAc,IAAI,YAAY;AAAA;AAAA;;;ACvN7I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AAEA;AAAA;AAAA;;;ACFA,IAAAC,oBAAA;AAAA;AAAA;AAUA,eAAW,cAAc;AACzB,eAAW,cAAc;AACzB,eAAW,mBAAmB;AAC9B,eAAW,kBAAkB;AAC7B,eAAW,qBAAqB;AAChC,eAAW,sBAAsB;AACjC,eAAW,+BAA+B;AAC1C,eAAW,4BAA4B;AAAA;AAAA;;;ACjBvC,IAAO;AAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AAAA,IAAO,eAAQ,OAAO,OAAO,MAAM;AAAA,IAAC,GAAG,EAAE,WAAW,KAAK,CAAC;AAAA;AAAA;;;ACA1D,SAAS,gBAAgB;AAAzB,IAGM,UACO,eACA,SACA,SACA,KACA,MACA,OACA,OACA,OACA,OACA,MACA,YAEA,OACA,OACA,YACA,KACA,QACA,OACA,UACA,gBACA,SACA,YACA,MACA,SACA,SACA,WACA,SACA,QAIA,qBACA;AApCb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AACA;AACA;AACA,IAAM,WAAW,WAAW;AACrB,IAAM,gBAAgB;AACtB,IAAM,UAAU,IAAI,SAAS;AAC7B,IAAM,UAAU,IAAI,SAAS;AAC7B,IAAM,MAAM,UAAU,OAAO;AAC7B,IAAM,OAAO,UAAU,QAAQ;AAC/B,IAAM,QAAQ,UAAU,SAAS;AACjC,IAAM,QAAQ,UAAU,SAAS;AACjC,IAAM,QAAQ,UAAU,SAAS;AACjC,IAAM,QAAQ,UAAU,SAAS;AACjC,IAAM,OAAO,UAAU,QAAQ;AAC/B,IAAM,aAAa,UAAU,cAA4B,+BAAe,oBAAoB;AAE5F,IAAM,QAAQ,UAAU,SAAS;AACjC,IAAM,QAAQ,UAAU,SAAS;AACjC,IAAM,aAAa,UAAU,cAAc;AAC3C,IAAM,MAAM,UAAU,OAAO;AAC7B,IAAM,SAAS,UAAU,UAAU;AACnC,IAAM,QAAQ,UAAU,SAAS;AACjC,IAAM,WAAW,UAAU,YAAY;AACvC,IAAM,iBAAiB,UAAU,kBAAkB;AACnD,IAAM,UAAU,UAAU,WAAW;AACrC,IAAM,aAAa,UAAU,cAAc;AAC3C,IAAM,OAAO,UAAU,QAAQ;AAC/B,IAAM,UAAU,UAAU,WAAW;AACrC,IAAM,UAAU,UAAU,WAAW;AACrC,IAAM,YAAY,UAAU,aAAa;AACzC,IAAM,UAAU,UAAU,WAAyB,oCAAoB,iBAAiB;AACxF,IAAM,SAAuB,oBAAI,IAAI;AAIrC,IAAM,sBAAsB;AAC5B,IAAM,sBAAsB;AAAA;AAAA;;;ACpCnC,IAkBM,gBAEJ,QACAC,QAEA,SACAC,QACAC,aAEAC,aACAC,QACAC,MACAC,SACAC,QACAC,QACAC,iBACAC,WACAC,OACAC,MACAC,UACAC,aACAC,QACAC,OACAC,UACAC,UACAC,YACAC,QACAC,OAWK;AAxDP,IAAAC,gBAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AAAA;AAkBA,IAAM,iBAAiB,WAAW,SAAS;AACpC,KAAM;AAAA,MACX;AAAA,MACA,OAAAvB;AAAA,MAEA;AAAA;AAAA;AAAA;AAAA,MACA,OAAAC;AAAA,MACA,YAAAC;AAAA,MAEA;AAAA;AAAA,QAAAC;AAAA;AAAA,MACA,OAAAC;AAAA,MACA,KAAAC;AAAA,MACA,QAAAC;AAAA,MACA,OAAAC;AAAA,MACA,OAAAC;AAAA,MACA,gBAAAC;AAAA,MACA,UAAAC;AAAA,MACA,MAAAC;AAAA,MACA,KAAAC;AAAA,MACA,SAAAC;AAAA,MACA,YAAAC;AAAA,MACA,OAAAC;AAAA,MACA,MAAAC;AAAA,MACA,SAAAC;AAAA,MACA,SAAAC;AAAA,MACA,WAAAC;AAAA,MACA,OAAAC;AAAA,MACA,MAAAC;AAAA,QACE;AACJ,WAAO,OAAO,gBAAgB;AAAA,MAC5B;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AACD,IAAO,kBAAQ;AAAA;AAAA;;;ACxDf;AAAA;AAAA,IAAAG;AACA,eAAW,UAAU;AAAA;AAAA;;;ACDrB,IAAa;AAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AAAO,IAAM,SAAuB,uBAAO,OAAO,gCAASC,QAAO,WAAW;AAC5E,YAAM,MAAM,KAAK,IAAI;AACrB,YAAM,UAAU,KAAK,MAAM,MAAM,GAAG;AACpC,YAAM,QAAQ,MAAM,MAAM;AAC1B,UAAI,WAAW;AACd,YAAI,cAAc,UAAU,UAAU,CAAC;AACvC,YAAI,YAAY,QAAQ,UAAU,CAAC;AACnC,YAAI,YAAY,GAAG;AAClB,wBAAc,cAAc;AAC5B,sBAAY,MAAM;AAAA,QACnB;AACA,eAAO,CAAC,aAAa,SAAS;AAAA,MAC/B;AACA,aAAO,CAAC,SAAS,KAAK;AAAA,IACvB,GAdkD,WAc/C,EAAE,QAAQ,gCAAS,SAAS;AAC9B,aAAO,OAAO,KAAK,IAAI,IAAI,GAAG;AAAA,IAC/B,GAFa,UAEX,CAAC;AAAA;AAAA;;;AChBH,SAAS,cAAc;AAAvB,IACa;AADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AACO,IAAM,aAAN,cAAyB,OAAO;AAAA,MACtC;AAAA,MACA,YAAY,IAAI;AACf,cAAM;AACN,aAAK,KAAK;AAAA,MACX;AAAA,MACA,QAAQ;AAAA,MACR,WAAW,MAAM;AAChB,aAAK,QAAQ;AACb,eAAO;AAAA,MACR;AAAA,MACA,QAAQ;AAAA,IACT;AAZa;AAAA;AAAA;;;ACDb,SAAS,UAAAC,eAAc;AAAvB,IACa;AADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AACO,IAAM,cAAN,cAA0BD,QAAO;AAAA,MACvC;AAAA,MACA,YAAY,IAAI;AACf,cAAM;AACN,aAAK,KAAK;AAAA,MACX;AAAA,MACA,UAAUE,MAAK,UAAU;AACxB,oBAAY,SAAS;AACrB,eAAO;AAAA,MACR;AAAA,MACA,gBAAgB,UAAU;AACzB,oBAAY,SAAS;AACrB,eAAO;AAAA,MACR;AAAA,MACA,SAAS,GAAG,GAAG,UAAU;AACxB,oBAAY,OAAO,aAAa,cAAc,SAAS;AACvD,eAAO;AAAA,MACR;AAAA,MACA,WAAW,IAAI,IAAI,UAAU;AAC5B,oBAAY,SAAS;AACrB,eAAO;AAAA,MACR;AAAA,MACA,cAAcC,MAAK;AAClB,eAAO;AAAA,MACR;AAAA,MACA,UAAUC,QAAOD,MAAK;AACrB,eAAO;AAAA,MACR;AAAA,MACA,gBAAgB;AACf,eAAO,CAAC,KAAK,SAAS,KAAK,IAAI;AAAA,MAChC;AAAA,MACA,UAAU;AAAA,MACV,OAAO;AAAA,MACP,QAAQ;AAAA,IACT;AAlCa;AAAA;AAAA;;;ACDb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAE;AAEA;AACA;AAAA;AAAA;;;ACHA,SAAS,oBAAoB;AAA7B,IAGa;AAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AACA;AACA;AACO,IAAM,UAAN,cAAsB,aAAa;AAAA,MACzC;AAAA,MACA;AAAA,MACA;AAAA,MACA,YAAY,MAAM;AACjB,cAAM;AACN,aAAK,MAAM,KAAK;AAChB,aAAK,SAAS,KAAK;AACnB,aAAK,WAAW,KAAK;AACrB,mBAAW,QAAQ,CAAC,GAAG,OAAO,oBAAoB,QAAQ,SAAS,GAAG,GAAG,OAAO,oBAAoB,aAAa,SAAS,CAAC,GAAG;AAC7H,gBAAM,QAAQ,KAAK,IAAI;AACvB,cAAI,OAAO,UAAU,YAAY;AAChC,iBAAK,IAAI,IAAI,MAAM,KAAK,IAAI;AAAA,UAC7B;AAAA,QACD;AAAA,MACD;AAAA,MACA,YAAY,SAAS,MAAM,MAAM;AAChC,gBAAQ,KAAK,GAAG,OAAO,IAAI,WAAW,KAAK,OAAO,GAAG,WAAW,KAAK,SAAS;AAAA,MAC/E;AAAA,MACA,QAAQ,MAAM;AACb,eAAO,MAAM,KAAK,GAAG,IAAI;AAAA,MAC1B;AAAA,MACA,UAAU,WAAW;AACpB,eAAO,MAAM,UAAU,SAAS;AAAA,MACjC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,IAAI,QAAQ;AACX,eAAO,KAAK,WAAW,IAAI,WAAW,CAAC;AAAA,MACxC;AAAA,MACA,IAAI,SAAS;AACZ,eAAO,KAAK,YAAY,IAAI,YAAY,CAAC;AAAA,MAC1C;AAAA,MACA,IAAI,SAAS;AACZ,eAAO,KAAK,YAAY,IAAI,YAAY,CAAC;AAAA,MAC1C;AAAA,MACA,OAAO;AAAA,MACP,MAAMC,MAAK;AACV,aAAK,OAAOA;AAAA,MACb;AAAA,MACA,MAAM;AACL,eAAO,KAAK;AAAA,MACb;AAAA,MACA,OAAO;AAAA,MACP,WAAW;AAAA,MACX,OAAO,CAAC;AAAA,MACR,QAAQ;AAAA,MACR,WAAW,CAAC;AAAA,MACZ,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,OAAO;AAAA,MACP,IAAI,UAAU;AACb,eAAO;AAAA,MACR;AAAA,MACA,IAAI,WAAW;AACd,eAAO,CAAC;AAAA,MACT;AAAA,MACA,IAAI,8BAA8B;AACjC,eAAO,oBAAI,IAAI;AAAA,MAChB;AAAA,MACA,IAAI,oBAAoB;AACvB,eAAO;AAAA,MACR;AAAA,MACA,IAAI,YAAY;AACf,eAAO;AAAA,MACR;AAAA,MACA,IAAI,mBAAmB;AACtB,eAAO;AAAA,MACR;AAAA,MACA,IAAI,mBAAmB;AACtB,eAAO;AAAA,MACR;AAAA,MACA,IAAI,WAAW;AACd,eAAO,CAAC;AAAA,MACT;AAAA,MACA,IAAI,UAAU;AACb,eAAO,CAAC;AAAA,MACT;AAAA,MACA,IAAI,YAAY;AACf,eAAO;AAAA,MACR;AAAA,MACA,IAAI,SAAS;AACZ,eAAO,CAAC;AAAA,MACT;AAAA,MACA,IAAI,iBAAiB;AACpB,eAAO,CAAC;AAAA,MACT;AAAA,MACA,oBAAoB;AACnB,eAAO;AAAA,MACR;AAAA,MACA,kBAAkB;AACjB,eAAO;AAAA,MACR;AAAA,MACA,SAAS;AACR,eAAO;AAAA,MACR;AAAA,MACA,gBAAgB;AACf,eAAO,CAAC;AAAA,MACT;AAAA,MACA,MAAM;AAAA,MAAC;AAAA,MACP,QAAQ;AAAA,MAAC;AAAA,MACT,QAAQ;AACP,cAAM,0BAA0B,eAAe;AAAA,MAChD;AAAA,MACA,mBAAmB;AAClB,eAAO;AAAA,MACR;AAAA,MACA,yBAAyB;AACxB,cAAM,0BAA0B,gCAAgC;AAAA,MACjE;AAAA,MACA,OAAO;AACN,cAAM,0BAA0B,cAAc;AAAA,MAC/C;AAAA,MACA,aAAa;AACZ,cAAM,0BAA0B,oBAAoB;AAAA,MACrD;AAAA,MACA,OAAO;AACN,cAAM,0BAA0B,cAAc;AAAA,MAC/C;AAAA,MACA,QAAQ;AACP,cAAM,0BAA0B,eAAe;AAAA,MAChD;AAAA,MACA,SAAS;AACR,cAAM,0BAA0B,gBAAgB;AAAA,MACjD;AAAA,MACA,uBAAuB;AACtB,cAAM,0BAA0B,8BAA8B;AAAA,MAC/D;AAAA,MACA,cAAc;AACb,cAAM,0BAA0B,qBAAqB;AAAA,MACtD;AAAA,MACA,aAAa;AACZ,cAAM,0BAA0B,oBAAoB;AAAA,MACrD;AAAA,MACA,WAAW;AACV,cAAM,0BAA0B,kBAAkB;AAAA,MACnD;AAAA,MACA,sCAAsC;AACrC,cAAM,0BAA0B,6CAA6C;AAAA,MAC9E;AAAA,MACA,sCAAsC;AACrC,cAAM,0BAA0B,6CAA6C;AAAA,MAC9E;AAAA,MACA,aAAa;AACZ,cAAM,0BAA0B,oBAAoB;AAAA,MACrD;AAAA,MACA,YAAY;AACX,cAAM,0BAA0B,mBAAmB;AAAA,MACpD;AAAA,MACA,SAAS;AACR,cAAM,0BAA0B,gBAAgB;AAAA,MACjD;AAAA,MACA,UAAU;AACT,cAAM,0BAA0B,iBAAiB;AAAA,MAClD;AAAA,MACA,aAAa,EAAE,KAAmB,+BAAe,wBAAwB,EAAE;AAAA,MAC3E,SAAS;AAAA,QACR,WAAW;AAAA,QACX,UAAU;AAAA,QACV,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,oBAAoB;AAAA,QACpB,gBAAgB;AAAA,QAChB,2BAA2B;AAAA,QAC3B,WAAyB,+BAAe,0BAA0B;AAAA,QAClE,aAA2B,+BAAe,4BAA4B;AAAA,MACvE;AAAA,MACA,eAAe;AAAA,QACd,UAAwB,+BAAe,+BAA+B;AAAA,QACtE,YAA0B,+BAAe,iCAAiC;AAAA,QAC1E,oBAAkC,+BAAe,yCAAyC;AAAA,MAC3F;AAAA,MACA,cAAc,OAAO,OAAO,OAAO;AAAA,QAClC,cAAc;AAAA,QACd,KAAK;AAAA,QACL,UAAU;AAAA,QACV,WAAW;AAAA,QACX,UAAU;AAAA,MACX,IAAI,EAAE,KAAK,MAAM,EAAE,CAAC;AAAA,MACpB,aAAa;AAAA,MACb,SAAS;AAAA,MACT,OAAO;AAAA,MACP,WAAW;AAAA,MACX,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,MACV,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU;AAAA,MACV,UAAU;AAAA,MACV,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU;AAAA,MACV,eAAe;AAAA,MACf,WAAW;AAAA,MACX,gBAAgB;AAAA,MAChB,YAAY;AAAA,MACZ,gBAAgB;AAAA,MAChB,kBAAkB;AAAA,MAClB,oBAAoB;AAAA,MACpB,qBAAqB;AAAA,MACrB,QAAQ;AAAA,MACR,mBAAmB;AAAA,MACnB,YAAY;AAAA,MACZ,6BAA6B;AAAA,MAC7B,4BAA4B;AAAA,MAC5B,gBAAgB;AAAA,MAChB,cAAc;AAAA,MACd,eAAe;AAAA,MACf,kBAAkB;AAAA,MAClB,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,iBAAiB;AAAA,IAClB;AAzNa;AAAA;AAAA;;;ACHb,IAEM,eACO,kBACE,MAAM,UAAU,UAGzB,cAMJ,OACA,aACA,6BACA,qCACA,qCACA,aACA,mBACA,MACA,MACA,OACA,OACA,QACA,WACA,mBACA,iBACA,UACA,KACA,WACA,QACA,YACA,MACA,aACA,KACA,YACA,UACA,UACA,cACA,UACA,wBACA,iBACAC,SACA,MACA,WACA,eACA,aACA,IACA,KACA,MACA,KACA,MACA,iBACA,qBACA,cACA,SACA,oBACA,gBACA,QACA,eACA,iBACA,sBACA,QACA,OACA,QACA,OACA,kBACA,kBACA,OACA,QACA,SACA,UACA,QACA,YACA,gBACA,YACA,WACAC,SACA,SACA,MACA,UACA,SACA,SACA,SACA,QACA,WACA,QACA,SACA,SACA,QACA,WACA,QACA,YACA,YACA,SACA,cACA,UACA,eACA,WACA,eACA,iBACA,mBACA,oBACA,OACA,kBACA,WACA,4BACA,2BACA,eACA,aACA,cACA,iBACA,UACA,OACA,gBAEI,UA8GC;AAnOP,IAAAC,gBAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AAAA;AACA;AACA,IAAM,gBAAgB,WAAW,SAAS;AACnC,IAAM,mBAAmB,cAAc;AACvC,KAAM,EAAE,MAAM,UAAU,aAAa;AAAA,MAC1C;AAAA,IACF;AACA,IAAM,eAAe,IAAI,QAAa;AAAA,MACpC,KAAK,cAAc;AAAA,MACnB;AAAA,MACA;AAAA,IACF,CAAC;AACM,KAAM;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAAH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAAC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,QACE;AACJ,IAAM,WAAW;AAAA,MACf;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAAD;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAAC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MAC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A;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA;AAAA;;;ACrCA,IACa,KACA,QACA,OACAC,aACAC,cACA,gBACA;AAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC;AAAA;AACO,IAAM,MAAoB,oCAAoB,QAAQ;AACtD,IAAM,SAAuB,oCAAoB,WAAW;AAC5D,IAAM,QAAsB,oCAAoB,UAAU;AAC1D,IAAMF,cAA2B,oCAAoB,eAAe;AACpE,IAAMC,eAA4B,oCAAoB,gBAAgB;AACtE,IAAM,iBAAiBD;AACvB,IAAM,kBAAkBC;AAAA;AAAA;;;ACL/B,SAAS,YAAY,IAAI;AACxB,QAAM,MAAM,mCAAY,MAAM;AAC7B,UAAM,KAAK,KAAK,IAAI;AACpB,OAAG,EAAE,MAAM,CAACE,WAAU,GAAGA,MAAK,CAAC,EAAE,KAAK,CAAC,QAAQ,GAAG,QAAW,GAAG,CAAC;AAAA,EAClE,GAHY;AAIZ,MAAI,gBAAgB;AACpB,MAAI,SAAS;AACb,SAAO;AACR;AAVA,IAWaC,SACAC,aACAC,QACAC,QACAC,WACAC,KACAC,SACAC,SACAC,OACAC,QACAC,UACAC,QACAC,UACAC,WACAC,OACAC,UACAC,UACAC,WACAC,WACAC,SACAC,KACAC,QACAC,OACAC,UACAC,WACAC,SACAC,SACAC,YACAC,SACA,OACA,kBACA,mBACA,QACA,QACA,QACA,WACA,OACA,OACA,WACA,SACA,WACA,MACA,OACA,cACA,UACA,aACAC,QACA,WACA,OACA,QACA,kBACA,YACAC,OACA,gBACA,YACA,WACA,WACA,WACA,cACA,QACA,YACA,YACA,YACA,eA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",
  "names": ["init_performance", "init_performance", "PerformanceMark", "init_performance", "init_performance", "init_performance", "init_performance", "clear", "count", "countReset", "createTask", "debug", "dir", "dirxml", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "profile", "profileEnd", "table", "time", "timeEnd", "timeLog", "timeStamp", "trace", "warn", "init_console", "init_performance", "init_console", "init_performance", "hrtime", "init_performance", "Socket", "init_performance", "dir", "env", "count", "init_performance", "init_performance", "cwd", "hrtime", "assert", "init_process", "init_performance", "init_process", "init_performance", "init_performance", "context", "init_performance", "init_performance", "init_performance", "init_performance", "match", "init_performance", "raw", "text", "init_performance", "context", "init_performance", "text", "init_performance", "init_constants", "init_performance", "init_performance", "init_constants", "app", "env", "context", "init_performance", "init_performance", "context", "init_performance", "init_router", "init_performance", "init_performance", "init_router", "init_performance", "init_router", "init_router", "init_performance", "init_performance", "init_router", "Node", "init_node", "init_performance", "_Node", "init_router", "init_performance", "init_node", "Node", "init_performance", "init_router", "Hono", "init_performance", "init_performance", "init_performance", "init_performance", "context", "init_performance", "config", "context", "init_performance", "init_performance", "init_performance", "init_constants", "init_performance", "init_promises", "init_performance", "init_constants", "ReadStream", "WriteStream", "init_performance", "error", "access", "appendFile", "chown", "chmod", "copyFile", "cp", "lchown", "lchmod", "link", "lstat", "lutimes", "mkdir", "mkdtemp", "realpath", "open", "opendir", "readdir", "readFile", "readlink", "rename", "rm", "rmdir", "stat", "symlink", "truncate", "unlink", "utimes", "writeFile", "statfs", "watch", "glob", "init_performance", "ReadStream", "WriteStream", "access", "appendFile", "chmod", "chown", "copyFile", "cp", "glob", "lchmod", "lchown", "link", "lstat", "lutimes", "mkdir", "mkdtemp", "open", "opendir", "readFile", "readdir", "readlink", "realpath", "rename", "rm", "rmdir", "stat", "statfs", "symlink", "truncate", "unlink", "utimes", "watch", "writeFile", "init_fs", "init_performance", "init_promises", "init_constants", "init_src", "init_performance", "app", "Hono", "error", "init_performance", "init_performance", "init_performance", "src_exports", "init_src", "init_performance", "app", "Hono", "error", "tenants", "count", "permissions", "init_performance", "init_performance", "moduleConfig", "init_module_config", "init_performance", "src_exports", "moduleConfig", "init_src", "init_performance", "init_module_config", "app", "tenants", "Hono", "error", "domain", "init_performance", "init_performance", "moduleConfig", "init_module_config", "init_performance", "src_exports", "moduleConfig", "init_src", "init_performance", "init_module_config", "src_exports", "init_src", "init_performance", "app", "src_exports", "init_src", "init_performance", "app", "src_exports", "init_src", "init_performance", "app", "init_performance", "init_performance", "init_performance", "init_performance", "init_performance", "domain", "init_performance", "init_performance", "Hono", "init_performance", "Hono", "error", "init_performance", "Hono", "table", "error", "init_performance", "settings", "init_performance", "init_performance", "init_performance", "init_performance", "table", "config", "init_performance", "init_performance", "init_performance", "init_performance", "_a", "init_performance", "init_performance", "_a", "config", "table", "init_performance", "init_performance", "table", "_a", "init_performance", "value", "startFrom", "_a", "config", "table", "ref", "actions", "_a", "table", "config", "init_performance", "_a", "sql", "init_performance", "init_performance", "version", "version", "otel", "rawTracer", "init_performance", "init_performance", "_a", "schema", "table", "_a", "config", "_a", "param", "sql", "raw", "placeholder", "name", "SQL", "_a", "_a", "name", "schema", "init_performance", "init_performance", "table", "init_performance", "init_performance", "_a", "ForeignKeyBuilder", "config", "table", "ForeignKey", "init_performance", "uniqueKeyName", "table", "_a", "UniqueConstraintBuilder", "table", "UniqueConstraint", "UniqueOnConstraintBuilder", "uniqueKeyName", "_a", "config", "table", "ref", "actions", "ForeignKeyBuilder", "uniqueKeyName", "_a", "table", "config", "init_performance", "_a", "table", "config", "init_performance", "_a", "config", "table", "init_performance", "_a", "table", "config", "init_performance", "_a", "table", "init_performance", "_a", "config", "table", "init_performance", "init_performance", "_a", "schema", "name", "table", "init_performance", "_a", "table", "config", "init_performance", "init_performance", "init_performance", "settings", "table", "init_performance", "match", "Hono", "table", "error", "sql", "c", "log", "init_performance", "app", "Hono", "error", "tenants", "init_performance", "registerCoreModules", "init_performance", "init_src", "app", "error", "Hono", "init_performance", "env", "init_performance", "env", "error", "init_performance", "env", "env"]
}
